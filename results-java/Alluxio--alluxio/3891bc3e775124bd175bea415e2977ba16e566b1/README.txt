commit 3891bc3e775124bd175bea415e2977ba16e566b1
Author: Haoyuan Li <haoyuan@cs.berkeley.edu>
Date:   Sun Mar 23 18:54:56 2014 -0700

    improve image reader/writer logic