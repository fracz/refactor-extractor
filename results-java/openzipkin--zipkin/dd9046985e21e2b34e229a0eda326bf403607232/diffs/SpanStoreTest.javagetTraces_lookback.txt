/**
 * Traces whose root span has timestamps between (endTs - lookback) and endTs are returned
 */
@Test
public void getTraces_lookback() {
    // span1's timestamp is 1000, span3's timestamp is 2000
    store().accept(asList(span1, span3));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 1L).lookback(1L).build())).containsExactly(asList(span1));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 2L).lookback(1L).build())).containsExactly(asList(span3), asList(span1));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 3L).lookback(1L).build())).containsExactly(asList(span3));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 3L).lookback(2L).build())).containsExactly(asList(span3), asList(span1));
}||||||||/**
 * Traces whose root span has timestamps between (endTs - lookback) and endTs are returned
 */
@Test
public void getTraces_lookback() {
    // span1's timestamp is 1000, span3's timestamp is 2000
    store(span1, span3);
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 1L).lookback(1L).build())).containsExactly(asList(span1));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 2L).lookback(1L).build())).containsExactly(asList(span3), asList(span1));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 3L).lookback(1L).build())).containsExactly(asList(span3));
    assertThat(store().getTraces(new QueryRequest.Builder("service").endTs(today + 3L).lookback(2L).build())).containsExactly(asList(span3), asList(span1));
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					SimpleName
				)
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
				SimpleName
				(MethodCallExpr
					(MethodCallExpr
						(MethodCallExpr
							SimpleName
							(MethodCallExpr
								(LongLiteralExpr
								)
								SimpleName
								(MethodCallExpr
									(BinaryExpr
										NameExpr
											SimpleName
										(LongLiteralExpr
										)
									)
									SimpleName
									(ObjectCreationExpr
										StringLiteralExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
						)
						SimpleName
						(MethodCallExpr
							SimpleName
						)
					)
					SimpleName
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)

