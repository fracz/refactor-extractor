/**
 * Test for the static {@link INodeFile#valueOf(INode, String)}
 * and {@link INodeFileUnderConstruction#valueOf(INode, String)} methods.
 * @throws IOException
 */
@Test
public void testValueOf() throws IOException {
    final String path = "/testValueOf";
    final PermissionStatus perm = new PermissionStatus(userName, null, FsPermission.getDefault());
    final short replication = 3;
    {
        // cast from null
        final INode from = null;
        // cast to INodeFile, should fail
        try {
            INodeFile.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("File does not exist"));
        }
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("File does not exist"));
        }
    }
    {
        // cast from INodeFile
        final INode from = new INodeFile(perm, null, replication, 0L, 0L, preferredBlockSize);
        // cast to INodeFile, should success
        final INodeFile f = INodeFile.valueOf(from, path);
        assertTrue(f == from);
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (IOException ioe) {
            assertTrue(ioe.getMessage().contains("File is not under construction"));
        }
    }
    {
        // cast from INodeFileUnderConstruction
        final INode from = new INodeFileUnderConstruction(perm, replication, 0L, 0L, "client", "machine", null);
        // cast to INodeFile, should success
        final INodeFile f = INodeFile.valueOf(from, path);
        assertTrue(f == from);
        // cast to INodeFileUnderConstruction, should success
        final INodeFileUnderConstruction u = INodeFileUnderConstruction.valueOf(from, path);
        assertTrue(u == from);
    }
    {
        // cast from INodeDirectory
        final INode from = new INodeDirectory(perm, 0L);
        // cast to INodeFile, should fail
        try {
            INodeFile.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("Path is not a file"));
        }
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("Path is not a file"));
        }
    }
}||||||||/**
 * Test for the static {@link INodeFile#valueOf(INode, String)}
 * and {@link INodeFileUnderConstruction#valueOf(INode, String)} methods.
 * @throws IOException
 */
@Test
public void testValueOf() throws IOException {
    final String path = "/testValueOf";
    final PermissionStatus perm = new PermissionStatus(userName, null, FsPermission.getDefault());
    final short replication = 3;
    {
        // cast from null
        final INode from = null;
        // cast to INodeFile, should fail
        try {
            INodeFile.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("File does not exist"));
        }
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("File does not exist"));
        }
        // cast to INodeDirectory, should fail
        try {
            INodeDirectory.valueOf(from, path);
            fail();
        } catch (IOException ioe) {
            assertTrue(ioe.getMessage().contains("Directory does not exist"));
        }
    }
    {
        // cast from INodeFile
        final INode from = new INodeFile(perm, null, replication, 0L, 0L, preferredBlockSize);
        // cast to INodeFile, should success
        final INodeFile f = INodeFile.valueOf(from, path);
        assertTrue(f == from);
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (IOException ioe) {
            assertTrue(ioe.getMessage().contains("File is not under construction"));
        }
        // cast to INodeDirectory, should fail
        try {
            INodeDirectory.valueOf(from, path);
            fail();
        } catch (IOException ioe) {
            assertTrue(ioe.getMessage().contains("Path is not a directory"));
        }
    }
    {
        // cast from INodeFileUnderConstruction
        final INode from = new INodeFileUnderConstruction(perm, replication, 0L, 0L, "client", "machine", null);
        // cast to INodeFile, should success
        final INodeFile f = INodeFile.valueOf(from, path);
        assertTrue(f == from);
        // cast to INodeFileUnderConstruction, should success
        final INodeFileUnderConstruction u = INodeFileUnderConstruction.valueOf(from, path);
        assertTrue(u == from);
        // cast to INodeDirectory, should fail
        try {
            INodeDirectory.valueOf(from, path);
            fail();
        } catch (IOException ioe) {
            assertTrue(ioe.getMessage().contains("Path is not a directory"));
        }
    }
    {
        // cast from INodeDirectory
        final INode from = new INodeDirectory(perm, 0L);
        // cast to INodeFile, should fail
        try {
            INodeFile.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("Path is not a file"));
        }
        // cast to INodeFileUnderConstruction, should fail
        try {
            INodeFileUnderConstruction.valueOf(from, path);
            fail();
        } catch (FileNotFoundException fnfe) {
            assertTrue(fnfe.getMessage().contains("Path is not a file"));
        }
        // cast to INodeDirectory, should success
        final INodeDirectory d = INodeDirectory.valueOf(from, path);
        assertTrue(d == from);
    }
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					StringLiteralExpr
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(ObjectCreationExpr
						NameExpr
							SimpleName
						NullLiteralExpr
						(MethodCallExpr
							SimpleName
							NameExpr
								SimpleName
						)
						(ClassOrInterfaceType
							SimpleName
						)
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(IntegerLiteralExpr
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						NullLiteralExpr
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							NullLiteralExpr
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(LongLiteralExpr
							)
							NameExpr
								SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(LongLiteralExpr
							)
							StringLiteralExpr
							StringLiteralExpr
							NullLiteralExpr
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
	)
	(VoidType
	)
	SimpleName
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					StringLiteralExpr
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(ObjectCreationExpr
						NameExpr
							SimpleName
						NullLiteralExpr
						(MethodCallExpr
							SimpleName
							NameExpr
								SimpleName
						)
						(ClassOrInterfaceType
							SimpleName
						)
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(IntegerLiteralExpr
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						NullLiteralExpr
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							NullLiteralExpr
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(LongLiteralExpr
							)
							NameExpr
								SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(LongLiteralExpr
							)
							StringLiteralExpr
							StringLiteralExpr
							NullLiteralExpr
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
		)
		(BlockStmt
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(ObjectCreationExpr
							NameExpr
								SimpleName
							(LongLiteralExpr
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(TryStmt
				(CatchClause
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
							)
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(ExpressionStmt
						(MethodCallExpr
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(VariableDeclarationExpr
					(VariableDeclarator
						(MethodCallExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				LineComment
			)
			(ExpressionStmt
				(MethodCallExpr
					(BinaryExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)

