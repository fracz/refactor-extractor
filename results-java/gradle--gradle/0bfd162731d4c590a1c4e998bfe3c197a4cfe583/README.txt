commit 0bfd162731d4c590a1c4e998bfe3c197a4cfe583
Author: Szczepan Faber <szczepiq@gmail.com>
Date:   Wed Nov 13 18:58:50 2013 +0100

    Some refactoring, extracted an interface so that the next improvements are easier to implement.