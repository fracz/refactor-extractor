commit 73ebc5540975393082b4dd5b0b7bf4c6196f41b9
Author: Szczepan Faber <szczepiq@gmail.com>
Date:   Thu Jan 10 10:04:22 2013 +0100

    Configuration-on-demand - cherry-picked a commit from master. It includes some minor fixes, refactoring and bunch of coverage.