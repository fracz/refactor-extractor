commit c469cb24b57a23d17452bbf64bf1a3dd1d6ef250
Author: Szczepan Faber <szczepiq@gmail.com>
Date:   Fri Oct 26 18:13:55 2012 +0200

    REVIEW-112 Some refactoring. Shifted some complexity to a different type.