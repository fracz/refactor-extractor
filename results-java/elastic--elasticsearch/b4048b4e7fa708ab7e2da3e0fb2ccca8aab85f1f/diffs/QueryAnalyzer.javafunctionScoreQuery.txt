private static BiFunction<Query, Map<String, Float>, Result> functionScoreQuery() {
    return (query, boosts) -> {
        FunctionScoreQuery functionScoreQuery = (FunctionScoreQuery) query;
        Result result = analyze(functionScoreQuery.getSubQuery(), boosts);
        // If min_score is specified we can't guarantee upfront that this percolator query matches,
        // so in that case we set verified to false.
        // (if it matches with the percolator document matches with the extracted terms.
        // Min score filters out docs, which is different than the functions, which just influences the score.)
        boolean verified = functionScoreQuery.getMinScore() == null;
        return new Result(verified, result.extractions);
    };
}||||||||private static BiFunction<Query, Version, Result> functionScoreQuery() {
    return (query, version) -> {
        FunctionScoreQuery functionScoreQuery = (FunctionScoreQuery) query;
        Result result = analyze(functionScoreQuery.getSubQuery(), version);
        // If min_score is specified we can't guarantee upfront that this percolator query matches,
        // so in that case we set verified to false.
        // (if it matches with the percolator document matches with the extracted terms.
        // Min score filters out docs, which is different than the functions, which just influences the score.)
        boolean verified = functionScoreQuery.getMinScore() == null;
        return new Result(verified, result.extractions, result.minimumShouldMatch);
    };
}||||||||(MethodDeclaration
	(BlockStmt
		(ReturnStmt
			(LambdaExpr
				(BlockStmt
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(CastExpr
									NameExpr
										SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(MethodCallExpr
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									NameExpr
										SimpleName
									SimpleName
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(BinaryExpr
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									NullLiteralExpr
								)
								SimpleName
								(PrimitiveType
								)
							)
						)
						LineComment
					)
					(ReturnStmt
						(ObjectCreationExpr
							NameExpr
								SimpleName
							(FieldAccessExpr
								SimpleName
								NameExpr
									SimpleName
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(Parameter
					SimpleName
					(UnknownType
					)
				)
				(Parameter
					SimpleName
					(UnknownType
					)
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
		(ClassOrInterfaceType
			SimpleName
			(ClassOrInterfaceType
				SimpleName
			)
			(ClassOrInterfaceType
				SimpleName
			)
		)
		(ClassOrInterfaceType
			SimpleName
		)
	)
	SimpleName
)
||||||||(MethodDeclaration
	(BlockStmt
		(ReturnStmt
			(LambdaExpr
				(BlockStmt
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(CastExpr
									NameExpr
										SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(MethodCallExpr
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									NameExpr
										SimpleName
									SimpleName
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
					(ExpressionStmt
						(VariableDeclarationExpr
							(VariableDeclarator
								(BinaryExpr
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									NullLiteralExpr
								)
								SimpleName
								(PrimitiveType
								)
							)
						)
						LineComment
					)
					(ReturnStmt
						(ObjectCreationExpr
							NameExpr
								SimpleName
							(FieldAccessExpr
								SimpleName
								NameExpr
									SimpleName
							)
							(FieldAccessExpr
								SimpleName
								NameExpr
									SimpleName
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(Parameter
					SimpleName
					(UnknownType
					)
				)
				(Parameter
					SimpleName
					(UnknownType
					)
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
		(ClassOrInterfaceType
			SimpleName
		)
		(ClassOrInterfaceType
			SimpleName
		)
	)
	SimpleName
)

