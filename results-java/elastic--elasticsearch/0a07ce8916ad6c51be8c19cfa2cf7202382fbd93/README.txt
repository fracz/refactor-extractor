commit 0a07ce8916ad6c51be8c19cfa2cf7202382fbd93
Author: Britta Weber <britta.weber@elasticsearch.com>
Date:   Wed Jan 28 10:50:39 2015 +0100

    core: disable auto gen id optimization

    This pr removes the optimization for auto generated ids.
    Previously, when ids were auto generated by elasticsearch then there was no
    check to see if a document with same id already existed and instead the new
    document was only appended. However, due to lucene improvements this
    optimization does not add much value. In addition, under rare circumstances it might
    cause duplicate documents:

    When an indexing request is retried (due to connect lost, node closed etc),
    then a flag 'canHaveDuplicates' is set to true for the indexing request
    that is send a second time. This was to make sure that even
    when an indexing request for a document with autogenerated id comes in
    we do not have to update unless this flag is set and instead only append.

    However, it might happen that for a retry or for the replication the
    indexing request that has the canHaveDuplicates set to true (the retried request) arrives
    at the destination before the original request that does have it set false.
    In this case both request add a document and we have a duplicated a document.
    This commit adds a workaround: remove the optimization for auto
    generated ids and always update the document.
    The asumtion is that this will not slow down indexing more than 10 percent,
    see: http://benchmarks.elasticsearch.org/

    closes #8788
    closes #9468