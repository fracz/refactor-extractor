commit 306634edfecc1d1a9edaffef5691b181f0870653
Author: Eduardo Macarron <eduardo.macarron@gmail.com>
Date:   Thu Jul 21 08:12:52 2011 +0000

    Minor refactor (thanks Simo) and some tests