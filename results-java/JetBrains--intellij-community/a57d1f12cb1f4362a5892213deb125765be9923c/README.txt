commit a57d1f12cb1f4362a5892213deb125765be9923c
Author: Dmitry Jemerov <yole@jetbrains.com>
Date:   Mon Jun 17 16:26:02 2013 +0200

    refactoring to separate state and result classes; a bit more diagnostics