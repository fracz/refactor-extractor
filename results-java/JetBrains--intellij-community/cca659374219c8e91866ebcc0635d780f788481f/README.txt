commit cca659374219c8e91866ebcc0635d780f788481f
Author: Dmitry Jemerov <yole@jetbrains.com>
Date:   Mon Aug 29 17:31:24 2011 +0200

    optimize and refactor (fast checks first)