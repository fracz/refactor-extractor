@NotNull
@Override
public PsiElementVisitor buildVisitor(@NotNull final ProblemsHolder holder, boolean isOnTheFly) {
    return new JavaElementVisitor() {

        @Override
        public void visitForeachStatement(PsiForeachStatement statement) {
            super.visitForeachStatement(statement);
            if (PsiUtil.getLanguageLevel(statement).isAtLeast(LanguageLevel.JDK_1_8)) {
                final PsiExpression iteratedValue = statement.getIteratedValue();
                final PsiStatement body = statement.getBody();
                if (iteratedValue != null && body != null) {
                    final PsiType iteratedValueType = iteratedValue.getType();
                    final PsiClass iteratorClass = PsiUtil.resolveClassInClassTypeOnly(iteratedValueType);
                    PsiClass collectionClass = null;
                    final boolean isArray;
                    if (iteratedValueType instanceof PsiArrayType) {
                        if (!isSupported(((PsiArrayType) iteratedValueType).getComponentType()))
                            return;
                        isArray = true;
                    } else {
                        collectionClass = JavaPsiFacade.getInstance(body.getProject()).findClass(CommonClassNames.JAVA_UTIL_COLLECTION, statement.getResolveScope());
                        if (collectionClass != null && InheritanceUtil.isInheritorOrSelf(iteratorClass, collectionClass, true)) {
                            isArray = false;
                        } else
                            return;
                    }
                    try {
                        if (ExceptionUtil.getThrownCheckedExceptions(new PsiElement[] { body }).isEmpty()) {
                            TerminalBlock tb = TerminalBlock.from(statement.getIterationParameter(), body);
                            List<Operation> operations = tb.extractOperations();
                            if (tb.isEmpty())
                                return;
                            final ControlFlow controlFlow = ControlFlowFactory.getInstance(holder.getProject()).getControlFlow(body, LocalsOrMyInstanceFieldsControlFlowPolicy.getInstance());
                            final Collection<PsiStatement> exitPoints = ControlFlowUtil.findExitPointsAndStatements(controlFlow, tb.getStartOffset(controlFlow), tb.getEndOffset(controlFlow), new IntArrayList(), PsiContinueStatement.class, PsiBreakStatement.class, PsiReturnStatement.class, PsiThrowStatement.class);
                            int startOffset = controlFlow.getStartOffset(body);
                            int endOffset = controlFlow.getEndOffset(body);
                            final List<PsiVariable> nonFinalVariables = StreamEx.of(ControlFlowUtil.getUsedVariables(controlFlow, startOffset, endOffset)).remove(variable -> HighlightControlFlowUtil.isEffectivelyFinal(variable, body, null)).toList();
                            if (exitPoints.isEmpty()) {
                                if (getIncrementedVariable(tb, operations, nonFinalVariables) != null) {
                                    registerProblem(holder, isOnTheFly, statement, "count", new ReplaceWithCountFix());
                                }
                                if (getAccumulatedVariable(tb, operations, nonFinalVariables) != null) {
                                    registerProblem(holder, isOnTheFly, statement, "sum", new ReplaceWithSumFix());
                                }
                                if (!nonFinalVariables.isEmpty()) {
                                    return;
                                }
                                if ((isArray || !isRawSubstitution(iteratedValueType, collectionClass)) && isCollectCall(tb, operations)) {
                                    boolean addAll = operations.isEmpty() && isAddAllCall(tb);
                                    String methodName;
                                    if (addAll) {
                                        methodName = "addAll";
                                    } else {
                                        PsiMethodCallExpression methodCallExpression = tb.getSingleMethodCall();
                                        if (methodCallExpression != null && extractReplaceableCollectionInitializer(methodCallExpression.getMethodExpression().getQualifierExpression(), statement) != null) {
                                            methodName = "collect";
                                        } else {
                                            if (!SUGGEST_FOREACH)
                                                return;
                                            methodName = "forEach";
                                        }
                                    }
                                    registerProblem(holder, isOnTheFly, statement, methodName, new ReplaceWithCollectFix(methodName));
                                } else // do not replace for(T e : arr) {} with Arrays.stream(arr).forEach(e -> {}) even if flag is set
                                if (SUGGEST_FOREACH && (!operations.isEmpty() || (!isArray && (REPLACE_TRIVIAL_FOREACH || !isTrivial(body, statement.getIterationParameter()))))) {
                                    final List<LocalQuickFix> fixes = new ArrayList<>();
                                    fixes.add(new ReplaceWithForeachCallFix("forEach"));
                                    if (!operations.isEmpty()) {
                                        // for .stream()
                                        fixes.add(new ReplaceWithForeachCallFix("forEachOrdered"));
                                    }
                                    registerProblem(holder, isOnTheFly, statement, "forEach", fixes.toArray(new LocalQuickFix[fixes.size()]));
                                }
                            } else {
                                if (operations.isEmpty() && !REPLACE_TRIVIAL_FOREACH)
                                    return;
                                if (nonFinalVariables.isEmpty() && tb.getSingleStatement() instanceof PsiReturnStatement) {
                                    handleSingleReturn(statement, tb, operations);
                                }
                                if (nonFinalVariables.size() == 1) {
                                    PsiStatement[] statements = tb.getStatements();
                                    if (statements.length == 2) {
                                        PsiStatement breakStatement = statements[1];
                                        if (!(breakStatement instanceof PsiBreakStatement) || ((PsiBreakStatement) breakStatement).findExitedStatement() != statement) {
                                            return;
                                        }
                                        PsiAssignmentExpression assignment = ExpressionUtils.getAssignment(statements[0]);
                                        if (assignment == null)
                                            return;
                                        PsiExpression lValue = assignment.getLExpression();
                                        if (!(lValue instanceof PsiReferenceExpression))
                                            return;
                                        PsiElement var = ((PsiReferenceExpression) lValue).resolve();
                                        if (!(var instanceof PsiVariable) || !nonFinalVariables.contains(var))
                                            return;
                                        PsiExpression rValue = assignment.getRExpression();
                                        if (rValue == null || isVariableReferenced((PsiVariable) var, rValue))
                                            return;
                                        if (tb.getVariable() instanceof PsiPrimitiveType && !isIdentityMapping(tb.getVariable(), rValue))
                                            return;
                                        registerProblem(holder, isOnTheFly, statement, "findFirst", new ReplaceWithFindFirstFix());
                                    }
                                }
                            }
                        }
                    } catch (AnalysisCanceledException ignored) {
                    }
                }
            }
        }

        void handleSingleReturn(PsiForeachStatement statement, TerminalBlock tb, List<Operation> operations) {
            PsiReturnStatement returnStatement = (PsiReturnStatement) tb.getSingleStatement();
            PsiExpression value = returnStatement.getReturnValue();
            PsiReturnStatement nextReturnStatement = getNextReturnStatement(statement);
            if (nextReturnStatement != null && (isLiteral(value, Boolean.TRUE) || isLiteral(value, Boolean.FALSE))) {
                boolean foundResult = (boolean) ((PsiLiteralExpression) value).getValue();
                if (isLiteral(nextReturnStatement.getReturnValue(), !foundResult)) {
                    String methodName;
                    if (foundResult) {
                        methodName = "anyMatch";
                    } else {
                        methodName = "noneMatch";
                        if (!operations.isEmpty()) {
                            Operation lastOp = operations.get(operations.size() - 1);
                            if (lastOp instanceof FilterOp && BoolUtils.isNegation(lastOp.getExpression())) {
                                methodName = "allMatch";
                            }
                        }
                    }
                    registerProblem(holder, isOnTheFly, statement, methodName, new ReplaceWithMatchFix(methodName));
                    return;
                }
            }
            if (!isVariableReferenced(tb.getVariable(), value)) {
                registerProblem(holder, isOnTheFly, statement, "anyMatch", new ReplaceWithMatchFix("anyMatch"));
            }
            if (nextReturnStatement != null && ExpressionUtils.isSimpleExpression(nextReturnStatement.getReturnValue()) && (!(tb.getVariable().getType() instanceof PsiPrimitiveType) || isIdentityMapping(tb.getVariable(), value))) {
                registerProblem(holder, isOnTheFly, statement, "findFirst", new ReplaceWithFindFirstFix());
            }
        }

        private boolean isRawSubstitution(PsiType iteratedValueType, PsiClass collectionClass) {
            return iteratedValueType instanceof PsiClassType && PsiUtil.isRawSubstitutor(collectionClass, TypeConversionUtil.getSuperClassSubstitutor(collectionClass, (PsiClassType) iteratedValueType));
        }
    };
}||||||||@NotNull
@Override
public PsiElementVisitor buildVisitor(@NotNull final ProblemsHolder holder, boolean isOnTheFly) {
    if (!PsiUtil.isLanguageLevel8OrHigher(holder.getFile())) {
        return PsiElementVisitor.EMPTY_VISITOR;
    }
    return new StreamApiMigrationVisitor(holder, isOnTheFly);
}||||||||(MethodDeclaration
	(BlockStmt
		(ReturnStmt
			(ObjectCreationExpr
				(MethodDeclaration
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								NameExpr
									SimpleName
								SimpleName
								(SuperExpr
								)
							)
						)
						(IfStmt
							(MethodCallExpr
								(FieldAccessExpr
									SimpleName
									NameExpr
										SimpleName
								)
								SimpleName
								(MethodCallExpr
									NameExpr
										SimpleName
									SimpleName
									NameExpr
										SimpleName
								)
							)
							(BlockStmt
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
								(IfStmt
									(BinaryExpr
										(BinaryExpr
											NameExpr
												SimpleName
											NullLiteralExpr
										)
										(BinaryExpr
											NameExpr
												SimpleName
											NullLiteralExpr
										)
									)
									(BlockStmt
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													(MethodCallExpr
														SimpleName
														NameExpr
															SimpleName
													)
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
										)
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													(MethodCallExpr
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
										)
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													NullLiteralExpr
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
										)
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													SimpleName
													(PrimitiveType
													)
												)
											)
										)
										(IfStmt
											(InstanceOfExpr
												NameExpr
													SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(BlockStmt
												(ExpressionStmt
													(AssignExpr
														NameExpr
															SimpleName
														(MethodCallExpr
															(FieldAccessExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															SimpleName
															(MethodCallExpr
																(MethodCallExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
																SimpleName
																NameExpr
																	SimpleName
															)
														)
													)
												)
												(IfStmt
													(BinaryExpr
														(BinaryExpr
															NameExpr
																SimpleName
															NullLiteralExpr
														)
														(MethodCallExpr
															NameExpr
																SimpleName
															NameExpr
																SimpleName
															(BooleanLiteralExpr
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
													(ReturnStmt
													)
													(BlockStmt
														(ExpressionStmt
															(AssignExpr
																NameExpr
																	SimpleName
																(BooleanLiteralExpr
																)
															)
														)
													)
												)
											)
											(BlockStmt
												(IfStmt
													(UnaryExpr
														(MethodCallExpr
															(MethodCallExpr
																SimpleName
																(EnclosedExpr
																	(CastExpr
																		NameExpr
																			SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
															SimpleName
														)
													)
													(ReturnStmt
													)
												)
												(ExpressionStmt
													(AssignExpr
														NameExpr
															SimpleName
														(BooleanLiteralExpr
														)
													)
												)
											)
										)
										(TryStmt
											(CatchClause
												(BlockStmt
												)
												(Parameter
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														SimpleName
														(MethodCallExpr
															(ArrayCreationExpr
																(ClassOrInterfaceType
																	SimpleName
																)
																(ArrayInitializerExpr
																	NameExpr
																		SimpleName
																)
																(ArrayCreationLevel
																)
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
													(BlockStmt
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
														)
														(IfStmt
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															(ReturnStmt
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(MethodCallExpr
																			(MethodCallExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		(ObjectCreationExpr
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		(ClassExpr
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		(ClassExpr
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		(ClassExpr
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		(ClassExpr
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(PrimitiveType
																	)
																)
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(PrimitiveType
																	)
																)
															)
														)
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		SimpleName
																		(MethodCallExpr
																			(LambdaExpr
																				(ExpressionStmt
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						NameExpr
																							SimpleName
																						NullLiteralExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																				(Parameter
																					SimpleName
																					(UnknownType
																					)
																				)
																			)
																			SimpleName
																			(MethodCallExpr
																				(MethodCallExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																		)
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
														)
														(IfStmt
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															(BlockStmt
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		(UnaryExpr
																			NameExpr
																				SimpleName
																		)
																	)
																	(ReturnStmt
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		(InstanceOfExpr
																			(MethodCallExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				SimpleName
																			)
																		)
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		(IntegerLiteralExpr
																		)
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(VariableDeclarationExpr
																				(VariableDeclarator
																					(MethodCallExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					SimpleName
																					(ArrayType
																						(ClassOrInterfaceType
																							SimpleName
																						)
																					)
																				)
																			)
																		)
																		(IfStmt
																			(BinaryExpr
																				(FieldAccessExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				(IntegerLiteralExpr
																				)
																			)
																			(BlockStmt
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(ArrayAccessExpr
																								(IntegerLiteralExpr
																								)
																								NameExpr
																									SimpleName
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						(UnaryExpr
																							(EnclosedExpr
																								(InstanceOfExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																							)
																						)
																						(BinaryExpr
																							(MethodCallExpr
																								SimpleName
																								(EnclosedExpr
																									(CastExpr
																										NameExpr
																											SimpleName
																										(ClassOrInterfaceType
																											SimpleName
																										)
																									)
																								)
																							)
																							NameExpr
																								SimpleName
																						)
																					)
																					(BlockStmt
																						(ReturnStmt
																						)
																					)
																				)
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(MethodCallExpr
																								(ArrayAccessExpr
																									(IntegerLiteralExpr
																									)
																									NameExpr
																										SimpleName
																								)
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						NameExpr
																							SimpleName
																						NullLiteralExpr
																					)
																					(ReturnStmt
																					)
																				)
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(UnaryExpr
																						(EnclosedExpr
																							(InstanceOfExpr
																								NameExpr
																									SimpleName
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																						)
																					)
																					(ReturnStmt
																					)
																				)
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(MethodCallExpr
																								SimpleName
																								(EnclosedExpr
																									(CastExpr
																										NameExpr
																											SimpleName
																										(ClassOrInterfaceType
																											SimpleName
																										)
																									)
																								)
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						(UnaryExpr
																							(EnclosedExpr
																								(InstanceOfExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																							)
																						)
																						(UnaryExpr
																							(MethodCallExpr
																								NameExpr
																									SimpleName
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																					(ReturnStmt
																					)
																				)
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						(BinaryExpr
																							NameExpr
																								SimpleName
																							NullLiteralExpr
																						)
																						(MethodCallExpr
																							(CastExpr
																								NameExpr
																									SimpleName
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																							NameExpr
																								SimpleName
																							SimpleName
																						)
																					)
																					(ReturnStmt
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						(InstanceOfExpr
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																						(UnaryExpr
																							(MethodCallExpr
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																								NameExpr
																									SimpleName
																								SimpleName
																							)
																						)
																					)
																					(ReturnStmt
																					)
																				)
																				(ExpressionStmt
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						NameExpr
																							SimpleName
																						NameExpr
																							SimpleName
																						StringLiteralExpr
																						(ObjectCreationExpr
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																						SimpleName
																					)
																				)
																			)
																		)
																	)
																)
															)
															(BlockStmt
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			SimpleName
																		)
																		NullLiteralExpr
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				StringLiteralExpr
																				(ObjectCreationExpr
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																				SimpleName
																			)
																		)
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			SimpleName
																		)
																		NullLiteralExpr
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				StringLiteralExpr
																				(ObjectCreationExpr
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																				SimpleName
																			)
																		)
																	)
																)
																(IfStmt
																	(UnaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(BlockStmt
																		(ReturnStmt
																		)
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(EnclosedExpr
																			(BinaryExpr
																				NameExpr
																					SimpleName
																				(UnaryExpr
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						NameExpr
																							SimpleName
																						SimpleName
																					)
																				)
																			)
																		)
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			SimpleName
																		)
																	)
																	(IfStmt
																		(BinaryExpr
																			NameExpr
																				SimpleName
																			(EnclosedExpr
																				(BinaryExpr
																					(UnaryExpr
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(EnclosedExpr
																						(BinaryExpr
																							(UnaryExpr
																								NameExpr
																									SimpleName
																							)
																							(EnclosedExpr
																								(BinaryExpr
																									NameExpr
																										SimpleName
																									(UnaryExpr
																										(MethodCallExpr
																											NameExpr
																												SimpleName
																											(MethodCallExpr
																												SimpleName
																												NameExpr
																													SimpleName
																											)
																											SimpleName
																										)
																									)
																								)
																							)
																						)
																					)
																				)
																			)
																		)
																		(BlockStmt
																			(ExpressionStmt
																				(VariableDeclarationExpr
																					(VariableDeclarator
																						(ObjectCreationExpr
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																						SimpleName
																						(ClassOrInterfaceType
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					(ObjectCreationExpr
																						StringLiteralExpr
																						(ClassOrInterfaceType
																							SimpleName
																						)
																					)
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(IfStmt
																				(UnaryExpr
																					(MethodCallExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																				(BlockStmt
																					(ExpressionStmt
																						(MethodCallExpr
																							(ObjectCreationExpr
																								StringLiteralExpr
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																						LineComment
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					StringLiteralExpr
																					(MethodCallExpr
																						(ArrayCreationExpr
																							(ClassOrInterfaceType
																								SimpleName
																							)
																							(ArrayCreationLevel
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																						)
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					SimpleName
																				)
																			)
																		)
																		LineComment
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(VariableDeclarationExpr
																				(VariableDeclarator
																					(BinaryExpr
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																						(MethodCallExpr
																							NameExpr
																								SimpleName
																							SimpleName
																						)
																					)
																					SimpleName
																					(PrimitiveType
																					)
																				)
																			)
																		)
																		(ExpressionStmt
																			(VariableDeclarationExpr
																				(VariableDeclarator
																					SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																			)
																		)
																		(IfStmt
																			NameExpr
																				SimpleName
																			(BlockStmt
																				(ExpressionStmt
																					(VariableDeclarationExpr
																						(VariableDeclarator
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																							SimpleName
																							(ClassOrInterfaceType
																								SimpleName
																							)
																						)
																					)
																				)
																				(IfStmt
																					(BinaryExpr
																						(BinaryExpr
																							NameExpr
																								SimpleName
																							NullLiteralExpr
																						)
																						(BinaryExpr
																							(MethodCallExpr
																								(MethodCallExpr
																									SimpleName
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																								NameExpr
																									SimpleName
																								SimpleName
																							)
																							NullLiteralExpr
																						)
																					)
																					(BlockStmt
																						(IfStmt
																							(UnaryExpr
																								NameExpr
																									SimpleName
																							)
																							(ReturnStmt
																							)
																						)
																						(ExpressionStmt
																							(AssignExpr
																								NameExpr
																									SimpleName
																								StringLiteralExpr
																							)
																						)
																					)
																					(BlockStmt
																						(ExpressionStmt
																							(AssignExpr
																								NameExpr
																									SimpleName
																								StringLiteralExpr
																							)
																						)
																					)
																				)
																			)
																			(BlockStmt
																				(ExpressionStmt
																					(AssignExpr
																						NameExpr
																							SimpleName
																						StringLiteralExpr
																					)
																				)
																			)
																		)
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				(ObjectCreationExpr
																					NameExpr
																						SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																				SimpleName
																			)
																		)
																	)
																)
															)
														)
													)
												)
											)
										)
									)
								)
							)
						)
					)
					(VoidType
					)
					SimpleName
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					(MarkerAnnotationExpr
						Name
					)
				)
				(MethodDeclaration
					(BlockStmt
						(ExpressionStmt
							(VariableDeclarationExpr
								(VariableDeclarator
									(CastExpr
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
										(ClassOrInterfaceType
											SimpleName
										)
									)
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(ExpressionStmt
							(VariableDeclarationExpr
								(VariableDeclarator
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(ExpressionStmt
							(VariableDeclarationExpr
								(VariableDeclarator
									(MethodCallExpr
										NameExpr
											SimpleName
										SimpleName
									)
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(IfStmt
							(BinaryExpr
								(BinaryExpr
									NameExpr
										SimpleName
									NullLiteralExpr
								)
								(EnclosedExpr
									(BinaryExpr
										(MethodCallExpr
											NameExpr
												SimpleName
											(FieldAccessExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
										)
										(MethodCallExpr
											NameExpr
												SimpleName
											(FieldAccessExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
										)
									)
								)
							)
							(BlockStmt
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(CastExpr
												(MethodCallExpr
													SimpleName
													(EnclosedExpr
														(CastExpr
															NameExpr
																SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
													)
												)
												(PrimitiveType
												)
											)
											SimpleName
											(PrimitiveType
											)
										)
									)
								)
								(IfStmt
									(MethodCallExpr
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
										(UnaryExpr
											NameExpr
												SimpleName
										)
										SimpleName
									)
									(BlockStmt
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
										)
										(IfStmt
											NameExpr
												SimpleName
											(BlockStmt
												(ExpressionStmt
													(AssignExpr
														NameExpr
															SimpleName
														StringLiteralExpr
													)
												)
												(IfStmt
													(UnaryExpr
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
													)
													(BlockStmt
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(MethodCallExpr
																		(BinaryExpr
																			(MethodCallExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			(IntegerLiteralExpr
																			)
																		)
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
															)
														)
														(IfStmt
															(BinaryExpr
																(InstanceOfExpr
																	NameExpr
																		SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
																(MethodCallExpr
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																	NameExpr
																		SimpleName
																)
															)
															(BlockStmt
																(ExpressionStmt
																	(AssignExpr
																		NameExpr
																			SimpleName
																		StringLiteralExpr
																	)
																)
															)
														)
													)
												)
											)
											(BlockStmt
												(ExpressionStmt
													(AssignExpr
														NameExpr
															SimpleName
														StringLiteralExpr
													)
												)
											)
										)
										(ExpressionStmt
											(MethodCallExpr
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												(ObjectCreationExpr
													NameExpr
														SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
												SimpleName
											)
										)
										(ReturnStmt
										)
									)
								)
							)
						)
						(IfStmt
							(UnaryExpr
								(MethodCallExpr
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									NameExpr
										SimpleName
									SimpleName
								)
							)
							(BlockStmt
								(ExpressionStmt
									(MethodCallExpr
										NameExpr
											SimpleName
										NameExpr
											SimpleName
										NameExpr
											SimpleName
										StringLiteralExpr
										(ObjectCreationExpr
											StringLiteralExpr
											(ClassOrInterfaceType
												SimpleName
											)
										)
										SimpleName
									)
								)
							)
						)
						(IfStmt
							(BinaryExpr
								(BinaryExpr
									(BinaryExpr
										NameExpr
											SimpleName
										NullLiteralExpr
									)
									(MethodCallExpr
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
										SimpleName
										NameExpr
											SimpleName
									)
								)
								(EnclosedExpr
									(BinaryExpr
										(UnaryExpr
											(EnclosedExpr
												(InstanceOfExpr
													(MethodCallExpr
														SimpleName
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
													)
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
										)
										(MethodCallExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											NameExpr
												SimpleName
											SimpleName
										)
									)
								)
							)
							(BlockStmt
								(ExpressionStmt
									(MethodCallExpr
										NameExpr
											SimpleName
										NameExpr
											SimpleName
										NameExpr
											SimpleName
										StringLiteralExpr
										(ObjectCreationExpr
											(ClassOrInterfaceType
												SimpleName
											)
										)
										SimpleName
									)
								)
							)
						)
					)
					(VoidType
					)
					SimpleName
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(MethodDeclaration
					(BlockStmt
						(ReturnStmt
							(BinaryExpr
								(InstanceOfExpr
									NameExpr
										SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
								(MethodCallExpr
									NameExpr
										SimpleName
									(MethodCallExpr
										NameExpr
											SimpleName
										(CastExpr
											NameExpr
												SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
										SimpleName
										NameExpr
											SimpleName
									)
									SimpleName
									NameExpr
										SimpleName
								)
							)
						)
					)
					(PrimitiveType
					)
					SimpleName
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					(Parameter
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(MarkerAnnotationExpr
		Name
	)
	(MarkerAnnotationExpr
		Name
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(IfStmt
			(UnaryExpr
				(MethodCallExpr
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(ReturnStmt
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
			)
		)
		(ReturnStmt
			(ObjectCreationExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(MarkerAnnotationExpr
		Name
	)
	(MarkerAnnotationExpr
		Name
	)
)

