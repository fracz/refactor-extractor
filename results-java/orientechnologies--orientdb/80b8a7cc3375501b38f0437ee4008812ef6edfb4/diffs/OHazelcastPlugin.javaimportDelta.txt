/**
 * Deleted records are written in output stream first, then created/updated records. All records are sorted by record id.
 *
 * Each record in output stream is written using following format:
 * <ol>
 * <li>Record's cluster id - 4 bytes</li>
 * <li>Record's cluster position - 8 bytes</li>
 * <li>Delete flag, 1 if record is deleted - 1 byte</li>
 * <li>Record version , only if record is not deleted - 4 bytes</li>
 * <li>Record type, only if record is not deleted - 1 byte</li>
 * <li>Length of binary presentation of record, only if record is not deleted - 4 bytes</li>
 * <li>Binary presentation of the record, only if record is not deleted - length of content is provided in above entity</li>
 * </ol>
 *
 * @param in
 */
private void importDelta(final ODatabaseDocumentTx db, final FileInputStream in) throws IOException {
    try {
        serverInstance.openDatabase(db);
        OScenarioThreadLocal.executeAsDistributed(new Callable<Object>() {

            @Override
            public Object call() throws Exception {
                db.activateOnCurrentThread();
                long total = 0;
                // final GZIPInputStream gzipInput = new GZIPInputStream(in);
                try {
                    final DataInputStream input = new DataInputStream(in);
                    try {
                        final long records = input.readLong();
                        for (long i = 0; i < records; ++i) {
                            final int clusterId = input.readInt();
                            final long clusterPos = input.readLong();
                            final boolean deleted = input.readBoolean();
                            final ORecordId rid = new ORecordId(clusterId, clusterPos);
                            total++;
                            final ORecord loadedRecord = rid.getRecord();
                            if (deleted) {
                                OLogManager.instance().info(this, "DELTA <- deleting " + rid);
                                if (loadedRecord != null)
                                    // DELETE IT
                                    db.delete(rid);
                            } else {
                                final int recordVersion = input.readInt();
                                final int recordType = input.readByte();
                                final int recordSize = input.readInt();
                                final byte[] recordContent = new byte[recordSize];
                                input.read(recordContent);
                                ORecord newRecord = null;
                                if (loadedRecord == null) {
                                    // CREATE
                                    OLogManager.instance().info(this, "DELTA <- creating rid=%s type=%d size=%d v=%d", rid, recordType, recordSize, recordVersion);
                                    do {
                                        newRecord = Orient.instance().getRecordFactoryManager().newInstance((byte) recordType);
                                        ORecordInternal.fill(newRecord, new ORecordId(rid.getClusterId(), -1), recordVersion - 1, recordContent, true);
                                        newRecord.save();
                                        if (newRecord.getIdentity().getClusterPosition() < clusterPos) {
                                            // DELETE THE RECORD TO CREATE A HOLE
                                            OLogManager.instance().info(this, "DELTA <- creating hole rid=%s", newRecord.getIdentity());
                                            newRecord.delete();
                                        }
                                    } while (newRecord.getIdentity().getClusterPosition() < clusterPos);
                                } else {
                                    // UPDATE
                                    OLogManager.instance().info(this, "DELTA <- updating rid=%s type=%d size=%d v=%d", rid, recordType, recordSize, recordVersion);
                                    newRecord = Orient.instance().getRecordFactoryManager().newInstance((byte) recordType);
                                    ORecordInternal.fill(newRecord, rid, ORecordVersionHelper.setRollbackMode(recordVersion), recordContent, true);
                                    if (loadedRecord instanceof ODocument) {
                                        // APPLY CHANGES FIELD BY FIELD TO MARK DIRTY FIELDS FOR INDEXES/HOOKS
                                        ODocument loadedDocument = (ODocument) loadedRecord;
                                        loadedDocument.merge((ODocument) newRecord, false, false).getVersion();
                                        loadedDocument.setDirty();
                                        newRecord = loadedDocument;
                                    }
                                    // SAVE THE UPDATE RECORD
                                    newRecord.save();
                                }
                                if (!newRecord.getIdentity().equals(rid))
                                    throw new ODistributedDatabaseDeltaSyncException("Error on synchronization of records, rids are different: saved " + newRecord.getIdentity() + ", but it should be " + rid);
                            }
                        }
                        db.getMetadata().reload();
                    } finally {
                        input.close();
                    }
                } catch (Exception e) {
                    ODistributedServerLog.error(this, nodeName, null, DIRECTION.IN, "Error on installing database delta '%s' on local server", e, db.getName());
                    throw OException.wrapException(new ODistributedException("Error on installing database delta '" + db.getName() + "' on local server"), e);
                } finally {
                // gzipInput.close();
                }
                ODistributedServerLog.info(this, nodeName, null, DIRECTION.IN, "Installed database delta for '%s', %d total records", db.getName(), total);
                return null;
            }
        });
        db.activateOnCurrentThread();
    } catch (Exception e) {
        // FORCE FULL DATABASE SYNC
        ODistributedServerLog.error(this, nodeName, null, DIRECTION.NONE, "Error while applying changes of database delta sync on '%s': forcing full database sync...", e, db.getName());
        throw OException.wrapException(new ODistributedDatabaseDeltaSyncException("Error while applying changes of database delta sync on '" + db.getName() + "': forcing full database sync..."), e);
    }
}||||||||/**
 * Deleted records are written in output stream first, then created/updated records. All records are sorted by record id.
 * <p>
 * Each record in output stream is written using following format:
 * <ol>
 * <li>Record's cluster id - 4 bytes</li>
 * <li>Record's cluster position - 8 bytes</li>
 * <li>Delete flag, 1 if record is deleted - 1 byte</li>
 * <li>Record version , only if record is not deleted - 4 bytes</li>
 * <li>Record type, only if record is not deleted - 1 byte</li>
 * <li>Length of binary presentation of record, only if record is not deleted - 4 bytes</li>
 * <li>Binary presentation of the record, only if record is not deleted - length of content is provided in above entity</li>
 * </ol>
 *
 * @param in
 */
private void importDelta(final ODatabaseDocumentTx db, final FileInputStream in) throws IOException {
    try {
        serverInstance.openDatabase(db);
        OScenarioThreadLocal.executeAsDistributed(new Callable<Object>() {

            @Override
            public Object call() throws Exception {
                db.activateOnCurrentThread();
                long totalRecords = 0;
                long totalCreated = 0;
                long totalUpdated = 0;
                long totalDeleted = 0;
                long totalHoles = 0;
                ODistributedServerLog.info(this, nodeName, null, DIRECTION.NONE, "Started import of delta for database '" + db.getName() + "'");
                long lastLap = System.currentTimeMillis();
                // final GZIPInputStream gzipInput = new GZIPInputStream(in);
                try {
                    final DataInputStream input = new DataInputStream(in);
                    try {
                        final long records = input.readLong();
                        for (long i = 0; i < records; ++i) {
                            final int clusterId = input.readInt();
                            final long clusterPos = input.readLong();
                            final boolean deleted = input.readBoolean();
                            final ORecordId rid = new ORecordId(clusterId, clusterPos);
                            totalRecords++;
                            final ORecord loadedRecord = rid.getRecord();
                            if (deleted) {
                                ODistributedServerLog.debug(this, nodeName, null, DIRECTION.NONE, "DELTA <- deleting " + rid);
                                if (loadedRecord != null)
                                    // DELETE IT
                                    db.delete(rid);
                                totalDeleted++;
                            } else {
                                final int recordVersion = input.readInt();
                                final int recordType = input.readByte();
                                final int recordSize = input.readInt();
                                final byte[] recordContent = new byte[recordSize];
                                input.read(recordContent);
                                ORecord newRecord = null;
                                if (loadedRecord == null) {
                                    // CREATE
                                    ODistributedServerLog.debug(this, nodeName, null, DIRECTION.NONE, "DELTA <- creating rid=%s type=%d size=%d v=%d", rid, recordType, recordSize, recordVersion);
                                    do {
                                        newRecord = Orient.instance().getRecordFactoryManager().newInstance((byte) recordType);
                                        ORecordInternal.fill(newRecord, new ORecordId(rid.getClusterId(), -1), recordVersion - 1, recordContent, true);
                                        newRecord.save();
                                        if (newRecord.getIdentity().getClusterPosition() < clusterPos) {
                                            // DELETE THE RECORD TO CREATE A HOLE
                                            ODistributedServerLog.debug(this, nodeName, null, DIRECTION.NONE, "DELTA <- creating hole rid=%s", newRecord.getIdentity());
                                            newRecord.delete();
                                            totalHoles++;
                                        }
                                    } while (newRecord.getIdentity().getClusterPosition() < clusterPos);
                                    totalCreated++;
                                } else {
                                    // UPDATE
                                    ODistributedServerLog.debug(this, nodeName, null, DIRECTION.NONE, "DELTA <- updating rid=%s type=%d size=%d v=%d", rid, recordType, recordSize, recordVersion);
                                    newRecord = Orient.instance().getRecordFactoryManager().newInstance((byte) recordType);
                                    ORecordInternal.fill(newRecord, rid, ORecordVersionHelper.setRollbackMode(recordVersion), recordContent, true);
                                    if (loadedRecord instanceof ODocument) {
                                        // APPLY CHANGES FIELD BY FIELD TO MARK DIRTY FIELDS FOR INDEXES/HOOKS
                                        ODocument loadedDocument = (ODocument) loadedRecord;
                                        loadedDocument.merge((ODocument) newRecord, false, false).getVersion();
                                        loadedDocument.setDirty();
                                        newRecord = loadedDocument;
                                    }
                                    // SAVE THE UPDATE RECORD
                                    newRecord.save();
                                    totalUpdated++;
                                }
                                if (!newRecord.getIdentity().equals(rid))
                                    throw new ODistributedDatabaseDeltaSyncException("Error on synchronization of records, rids are different: saved " + newRecord.getIdentity() + ", but it should be " + rid);
                            }
                            final long now = System.currentTimeMillis();
                            if (now - lastLap > 1000) {
                                // DUMP STATS EVERY SECOND
                                ODistributedServerLog.info(this, nodeName, null, DIRECTION.IN, "- %d total entries: %d created, %d updated, %d deleted, %d holes...", db.getName(), totalRecords, totalCreated, totalUpdated, totalDeleted, totalHoles);
                                lastLap = now;
                            }
                        }
                        db.getMetadata().reload();
                    } finally {
                        input.close();
                    }
                } catch (Exception e) {
                    ODistributedServerLog.error(this, nodeName, null, DIRECTION.IN, "Error on installing database delta '%s' on local server", e, db.getName());
                    throw OException.wrapException(new ODistributedException("Error on installing database delta '" + db.getName() + "' on local server"), e);
                } finally {
                // gzipInput.close();
                }
                ODistributedServerLog.info(this, nodeName, null, DIRECTION.IN, "Installed database delta for '%s'. %d total entries: %d created, %d updated, %d deleted, %d holes", db.getName(), totalRecords, totalCreated, totalUpdated, totalDeleted, totalHoles);
                return null;
            }
        });
        db.activateOnCurrentThread();
    } catch (Exception e) {
        // FORCE FULL DATABASE SYNC
        ODistributedServerLog.error(this, nodeName, null, DIRECTION.NONE, "Error while applying changes of database delta sync on '%s': forcing full database sync...", e, db.getName());
        throw OException.wrapException(new ODistributedDatabaseDeltaSyncException("Error while applying changes of database delta sync on '" + db.getName() + "': forcing full database sync..."), e);
    }
}||||||||(MethodDeclaration
	(BlockStmt
		(TryStmt
			(CatchClause
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							(ThisExpr
							)
							NameExpr
								SimpleName
							NullLiteralExpr
							(FieldAccessExpr
								SimpleName
								NameExpr
									SimpleName
							)
							StringLiteralExpr
							NameExpr
								SimpleName
							(MethodCallExpr
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							NameExpr
								SimpleName
						)
						LineComment
					)
					(ThrowStmt
						(MethodCallExpr
							(ObjectCreationExpr
								(BinaryExpr
									(BinaryExpr
										StringLiteralExpr
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
									)
									StringLiteralExpr
								)
								(ClassOrInterfaceType
									SimpleName
								)
							)
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
				)
				(Parameter
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						(ObjectCreationExpr
							(MethodDeclaration
								(BlockStmt
									(ExpressionStmt
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(TryStmt
										(CatchClause
											(BlockStmt
												(ExpressionStmt
													(MethodCallExpr
														(ThisExpr
														)
														NameExpr
															SimpleName
														NullLiteralExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														StringLiteralExpr
														NameExpr
															SimpleName
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ThrowStmt
													(MethodCallExpr
														(ObjectCreationExpr
															(BinaryExpr
																(BinaryExpr
																	StringLiteralExpr
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																StringLiteralExpr
															)
															(ClassOrInterfaceType
																SimpleName
															)
														)
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(BlockStmt
										)
										(BlockStmt
											(ExpressionStmt
												(VariableDeclarationExpr
													(VariableDeclarator
														(ObjectCreationExpr
															NameExpr
																SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
														SimpleName
														(ClassOrInterfaceType
															SimpleName
														)
													)
												)
											)
											(TryStmt
												(BlockStmt
													(ExpressionStmt
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
												(BlockStmt
													(ExpressionStmt
														(VariableDeclarationExpr
															(VariableDeclarator
																(MethodCallExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
																SimpleName
																(PrimitiveType
																)
															)
														)
													)
													(ForStmt
														(BlockStmt
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(ObjectCreationExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
															(ExpressionStmt
																(UnaryExpr
																	NameExpr
																		SimpleName
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
															(IfStmt
																NameExpr
																	SimpleName
																(BlockStmt
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(ArrayCreationExpr
																					(PrimitiveType
																					)
																					(ArrayCreationLevel
																						NameExpr
																							SimpleName
																					)
																				)
																				SimpleName
																				(ArrayType
																					(PrimitiveType
																					)
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				NullLiteralExpr
																				SimpleName
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																		)
																	)
																	(IfStmt
																		(BinaryExpr
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																		)
																		(BlockStmt
																			(ExpressionStmt
																				(MethodCallExpr
																					(ThisExpr
																					)
																					StringLiteralExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					SimpleName
																					(MethodCallExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																				LineComment
																			)
																			(ExpressionStmt
																				(AssignExpr
																					NameExpr
																						SimpleName
																					(MethodCallExpr
																						(CastExpr
																							NameExpr
																								SimpleName
																							(PrimitiveType
																							)
																						)
																						SimpleName
																						(MethodCallExpr
																							SimpleName
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					NameExpr
																						SimpleName
																					(BooleanLiteralExpr
																					)
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(IfStmt
																				(InstanceOfExpr
																					NameExpr
																						SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																				(BlockStmt
																					(ExpressionStmt
																						(VariableDeclarationExpr
																							(VariableDeclarator
																								(CastExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																								SimpleName
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																						)
																						LineComment
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							(MethodCallExpr
																								(CastExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																								(BooleanLiteralExpr
																								)
																								(BooleanLiteralExpr
																								)
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(ExpressionStmt
																						(AssignExpr
																							NameExpr
																								SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				LineComment
																			)
																		)
																		(BlockStmt
																			(ExpressionStmt
																				(MethodCallExpr
																					(ThisExpr
																					)
																					StringLiteralExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					SimpleName
																					(MethodCallExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																				LineComment
																			)
																			(DoStmt
																				(BlockStmt
																					(ExpressionStmt
																						(AssignExpr
																							NameExpr
																								SimpleName
																							(MethodCallExpr
																								(CastExpr
																									NameExpr
																										SimpleName
																									(PrimitiveType
																									)
																								)
																								SimpleName
																								(MethodCallExpr
																									SimpleName
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																							)
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							NameExpr
																								SimpleName
																							(ObjectCreationExpr
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																								(UnaryExpr
																									(IntegerLiteralExpr
																									)
																								)
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																							(BinaryExpr
																								NameExpr
																									SimpleName
																								(IntegerLiteralExpr
																								)
																							)
																							NameExpr
																								SimpleName
																							(BooleanLiteralExpr
																							)
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(IfStmt
																						(BinaryExpr
																							(MethodCallExpr
																								SimpleName
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																							NameExpr
																								SimpleName
																						)
																						(BlockStmt
																							(ExpressionStmt
																								(MethodCallExpr
																									(ThisExpr
																									)
																									StringLiteralExpr
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																									SimpleName
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																								LineComment
																							)
																							(ExpressionStmt
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																						)
																					)
																				)
																				(BinaryExpr
																					(MethodCallExpr
																						SimpleName
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																	)
																	(IfStmt
																		(UnaryExpr
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				SimpleName
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																		(ThrowStmt
																			(ObjectCreationExpr
																				(BinaryExpr
																					(BinaryExpr
																						(BinaryExpr
																							StringLiteralExpr
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																						StringLiteralExpr
																					)
																					NameExpr
																						SimpleName
																				)
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																		)
																	)
																)
																(BlockStmt
																	(ExpressionStmt
																		(MethodCallExpr
																			(ThisExpr
																			)
																			(BinaryExpr
																				StringLiteralExpr
																				NameExpr
																					SimpleName
																			)
																			SimpleName
																			(MethodCallExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																		)
																	)
																	(IfStmt
																		(BinaryExpr
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																		)
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			LineComment
																		)
																	)
																)
															)
														)
														(BinaryExpr
															NameExpr
																SimpleName
															NameExpr
																SimpleName
														)
														(VariableDeclarationExpr
															(VariableDeclarator
																(IntegerLiteralExpr
																)
																SimpleName
																(PrimitiveType
																)
															)
														)
														(UnaryExpr
															NameExpr
																SimpleName
														)
													)
													(ExpressionStmt
														(MethodCallExpr
															SimpleName
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
														)
													)
												)
											)
										)
										LineComment
									)
									(ExpressionStmt
										(MethodCallExpr
											(ThisExpr
											)
											NameExpr
												SimpleName
											NullLiteralExpr
											(FieldAccessExpr
												SimpleName
												NameExpr
													SimpleName
											)
											StringLiteralExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											NameExpr
												SimpleName
											SimpleName
											NameExpr
												SimpleName
										)
									)
									(ReturnStmt
										NullLiteralExpr
									)
								)
								(ClassOrInterfaceType
									SimpleName
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
								(MarkerAnnotationExpr
									Name
								)
							)
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(TryStmt
			(CatchClause
				(BlockStmt
					(ExpressionStmt
						(MethodCallExpr
							(ThisExpr
							)
							NameExpr
								SimpleName
							NullLiteralExpr
							(FieldAccessExpr
								SimpleName
								NameExpr
									SimpleName
							)
							StringLiteralExpr
							NameExpr
								SimpleName
							(MethodCallExpr
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							NameExpr
								SimpleName
						)
						LineComment
					)
					(ThrowStmt
						(MethodCallExpr
							(ObjectCreationExpr
								(BinaryExpr
									(BinaryExpr
										StringLiteralExpr
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
									)
									StringLiteralExpr
								)
								(ClassOrInterfaceType
									SimpleName
								)
							)
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
					)
				)
				(Parameter
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						(ObjectCreationExpr
							(MethodDeclaration
								(BlockStmt
									(ExpressionStmt
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(IntegerLiteralExpr
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(ExpressionStmt
										(MethodCallExpr
											(ThisExpr
											)
											NameExpr
												SimpleName
											NullLiteralExpr
											(FieldAccessExpr
												SimpleName
												NameExpr
													SimpleName
											)
											(BinaryExpr
												(BinaryExpr
													StringLiteralExpr
													(MethodCallExpr
														SimpleName
														NameExpr
															SimpleName
													)
												)
												StringLiteralExpr
											)
											SimpleName
											NameExpr
												SimpleName
										)
									)
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(MethodCallExpr
													SimpleName
													NameExpr
														SimpleName
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(TryStmt
										(CatchClause
											(BlockStmt
												(ExpressionStmt
													(MethodCallExpr
														(ThisExpr
														)
														NameExpr
															SimpleName
														NullLiteralExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														StringLiteralExpr
														NameExpr
															SimpleName
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ThrowStmt
													(MethodCallExpr
														(ObjectCreationExpr
															(BinaryExpr
																(BinaryExpr
																	StringLiteralExpr
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																StringLiteralExpr
															)
															(ClassOrInterfaceType
																SimpleName
															)
														)
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(BlockStmt
										)
										(BlockStmt
											(ExpressionStmt
												(VariableDeclarationExpr
													(VariableDeclarator
														(ObjectCreationExpr
															NameExpr
																SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
														SimpleName
														(ClassOrInterfaceType
															SimpleName
														)
													)
												)
											)
											(TryStmt
												(BlockStmt
													(ExpressionStmt
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
												(BlockStmt
													(ExpressionStmt
														(VariableDeclarationExpr
															(VariableDeclarator
																(MethodCallExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
																SimpleName
																(PrimitiveType
																)
															)
														)
													)
													(ForStmt
														(BlockStmt
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(ObjectCreationExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
															(ExpressionStmt
																(UnaryExpr
																	NameExpr
																		SimpleName
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
															(IfStmt
																NameExpr
																	SimpleName
																(BlockStmt
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				(PrimitiveType
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				(ArrayCreationExpr
																					(PrimitiveType
																					)
																					(ArrayCreationLevel
																						NameExpr
																							SimpleName
																					)
																				)
																				SimpleName
																				(ArrayType
																					(PrimitiveType
																					)
																				)
																			)
																		)
																	)
																	(ExpressionStmt
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(ExpressionStmt
																		(VariableDeclarationExpr
																			(VariableDeclarator
																				NullLiteralExpr
																				SimpleName
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																		)
																	)
																	(IfStmt
																		(BinaryExpr
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																		)
																		(BlockStmt
																			(ExpressionStmt
																				(MethodCallExpr
																					(ThisExpr
																					)
																					NameExpr
																						SimpleName
																					NullLiteralExpr
																					(FieldAccessExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					StringLiteralExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				LineComment
																			)
																			(ExpressionStmt
																				(AssignExpr
																					NameExpr
																						SimpleName
																					(MethodCallExpr
																						(CastExpr
																							NameExpr
																								SimpleName
																							(PrimitiveType
																							)
																						)
																						SimpleName
																						(MethodCallExpr
																							SimpleName
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					NameExpr
																						SimpleName
																					(BooleanLiteralExpr
																					)
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(IfStmt
																				(InstanceOfExpr
																					NameExpr
																						SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																				(BlockStmt
																					(ExpressionStmt
																						(VariableDeclarationExpr
																							(VariableDeclarator
																								(CastExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																								SimpleName
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																						)
																						LineComment
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							(MethodCallExpr
																								(CastExpr
																									NameExpr
																										SimpleName
																									(ClassOrInterfaceType
																										SimpleName
																									)
																								)
																								(BooleanLiteralExpr
																								)
																								(BooleanLiteralExpr
																								)
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(ExpressionStmt
																						(AssignExpr
																							NameExpr
																								SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																				)
																			)
																			(ExpressionStmt
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				LineComment
																			)
																			(ExpressionStmt
																				(UnaryExpr
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																		(BlockStmt
																			(ExpressionStmt
																				(MethodCallExpr
																					(ThisExpr
																					)
																					NameExpr
																						SimpleName
																					NullLiteralExpr
																					(FieldAccessExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					StringLiteralExpr
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					NameExpr
																						SimpleName
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				LineComment
																			)
																			(DoStmt
																				(BlockStmt
																					(ExpressionStmt
																						(AssignExpr
																							NameExpr
																								SimpleName
																							(MethodCallExpr
																								(CastExpr
																									NameExpr
																										SimpleName
																									(PrimitiveType
																									)
																								)
																								SimpleName
																								(MethodCallExpr
																									SimpleName
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																							)
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							NameExpr
																								SimpleName
																							(ObjectCreationExpr
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																								(UnaryExpr
																									(IntegerLiteralExpr
																									)
																								)
																								(ClassOrInterfaceType
																									SimpleName
																								)
																							)
																							(BinaryExpr
																								NameExpr
																									SimpleName
																								(IntegerLiteralExpr
																								)
																							)
																							NameExpr
																								SimpleName
																							(BooleanLiteralExpr
																							)
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(IfStmt
																						(BinaryExpr
																							(MethodCallExpr
																								SimpleName
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																							NameExpr
																								SimpleName
																						)
																						(BlockStmt
																							(ExpressionStmt
																								(MethodCallExpr
																									(ThisExpr
																									)
																									NameExpr
																										SimpleName
																									NullLiteralExpr
																									(FieldAccessExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																									StringLiteralExpr
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																								LineComment
																							)
																							(ExpressionStmt
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																							(ExpressionStmt
																								(UnaryExpr
																									NameExpr
																										SimpleName
																								)
																							)
																						)
																					)
																				)
																				(BinaryExpr
																					(MethodCallExpr
																						SimpleName
																						(MethodCallExpr
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					NameExpr
																						SimpleName
																				)
																			)
																			(ExpressionStmt
																				(UnaryExpr
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																	)
																	(IfStmt
																		(UnaryExpr
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				SimpleName
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																		(ThrowStmt
																			(ObjectCreationExpr
																				(BinaryExpr
																					(BinaryExpr
																						(BinaryExpr
																							StringLiteralExpr
																							(MethodCallExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																						StringLiteralExpr
																					)
																					NameExpr
																						SimpleName
																				)
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																		)
																	)
																)
																(BlockStmt
																	(ExpressionStmt
																		(MethodCallExpr
																			(ThisExpr
																			)
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																			(FieldAccessExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			(BinaryExpr
																				StringLiteralExpr
																				NameExpr
																					SimpleName
																			)
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(IfStmt
																		(BinaryExpr
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																		)
																		(ExpressionStmt
																			(MethodCallExpr
																				NameExpr
																					SimpleName
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			LineComment
																		)
																	)
																	(ExpressionStmt
																		(UnaryExpr
																			NameExpr
																				SimpleName
																		)
																	)
																)
															)
															(ExpressionStmt
																(VariableDeclarationExpr
																	(VariableDeclarator
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		SimpleName
																		(PrimitiveType
																		)
																	)
																)
															)
															(IfStmt
																(BinaryExpr
																	(BinaryExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																	)
																	(IntegerLiteralExpr
																	)
																)
																(BlockStmt
																	(ExpressionStmt
																		(MethodCallExpr
																			(ThisExpr
																			)
																			NameExpr
																				SimpleName
																			NullLiteralExpr
																			(FieldAccessExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			StringLiteralExpr
																			(MethodCallExpr
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		LineComment
																	)
																	(ExpressionStmt
																		(AssignExpr
																			NameExpr
																				SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																)
															)
														)
														(BinaryExpr
															NameExpr
																SimpleName
															NameExpr
																SimpleName
														)
														(VariableDeclarationExpr
															(VariableDeclarator
																(IntegerLiteralExpr
																)
																SimpleName
																(PrimitiveType
																)
															)
														)
														(UnaryExpr
															NameExpr
																SimpleName
														)
													)
													(ExpressionStmt
														(MethodCallExpr
															SimpleName
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
														)
													)
												)
											)
										)
										LineComment
									)
									(ExpressionStmt
										(MethodCallExpr
											(ThisExpr
											)
											NameExpr
												SimpleName
											NullLiteralExpr
											(FieldAccessExpr
												SimpleName
												NameExpr
													SimpleName
											)
											StringLiteralExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											NameExpr
												SimpleName
											NameExpr
												SimpleName
											NameExpr
												SimpleName
											NameExpr
												SimpleName
											NameExpr
												SimpleName
											SimpleName
											NameExpr
												SimpleName
										)
									)
									(ReturnStmt
										NullLiteralExpr
									)
								)
								(ClassOrInterfaceType
									SimpleName
								)
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
								(MarkerAnnotationExpr
									Name
								)
							)
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	(JavadocComment
	)
)

