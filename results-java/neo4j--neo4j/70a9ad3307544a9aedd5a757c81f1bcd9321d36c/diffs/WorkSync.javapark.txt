void park(long time, TimeUnit unit) {
    if (compareAndSet(STATE_QUEUED, STATE_PARKED)) {
        LockSupport.parkNanos(unit.toNanos(time));
        compareAndSet(STATE_PARKED, STATE_QUEUED);
    }
    if (successor) {
        // It's our job to go through all the 'next' references, and unpark all the threads
        // for the work units that are marked as done.
        // If we encounter a unit that isn't marked as done, then we have raced with the
        // done-marking, and we just spin until we observe the done flag. This is pretty
        // unlikely, since unparking a thread is pretty expensive on most platforms.
        // We also spin on null 'next' references, in the unlikely event that our thread
        // yet observed the complete enqueueing of work units prior to ours.
        wakeUpAsSuccessor();
    }
}||||||||void park(long time, TimeUnit unit) {
    if (compareAndSet(STATE_QUEUED, STATE_PARKED)) {
        LockSupport.parkNanos(unit.toNanos(time));
        compareAndSet(STATE_PARKED, STATE_QUEUED);
    }
}||||||||(MethodDeclaration
	(BlockStmt
		(IfStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				SimpleName
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						(MethodCallExpr
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
						SimpleName
					)
				)
			)
		)
		(IfStmt
			NameExpr
				SimpleName
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
					)
					LineComment
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(IfStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				SimpleName
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						(MethodCallExpr
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						NameExpr
							SimpleName
						SimpleName
					)
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)

