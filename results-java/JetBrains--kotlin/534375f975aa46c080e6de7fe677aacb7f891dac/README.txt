commit 534375f975aa46c080e6de7fe677aacb7f891dac
Author: Pavel Talanov <Pavel.Talanov@jetbrains.com>
Date:   Sun Feb 5 17:10:44 2012 +0400

    a bunch or refactoring and TODO fixes