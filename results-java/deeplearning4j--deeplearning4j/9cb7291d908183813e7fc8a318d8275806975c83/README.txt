commit 9cb7291d908183813e7fc8a318d8275806975c83
Author: Alex Black <blacka101@gmail.com>
Date:   Mon Jul 17 17:36:37 2017 +1000

    More refactoring/changes for different edge cases; all layers done (again)