public void testBursty() {
    RateLimiter limiter = RateLimiter.createBursty(ticker, 1.0, 10);
    // reach full capacity
    ticker.sleepMillis(10000);
    // all these are served in a burst (10 + 1 by borrowing from the future)
    limiter.acquire(11);
    // out of capacity, we have to wait
    limiter.acquire(1);
    // and wait
    limiter.acquire(1);
    // fill up 3 permits
    ticker.sleepMillis(3000);
    // we had 3 ready, thus we borrow 2 permits
    limiter.acquire(5);
    // this acquire() will also repay for the previous acquire()
    limiter.acquire(1);
    assertEvents("U10.00", // 10 permits grabbed
    "R0.00", // 1 and 1
    "R1.00", // 1 and 1
    "R1.00", // 5 grabbed
    "U3.00", // 5 grabbed
    "R0.00", // 1 grabbed
    "R3.00");
}||||||||public void testBursty() {
    RateLimiter limiter = RateLimiter.createBursty(ticker, 1.0, 10, TimeUnit.SECONDS);
    // reach full capacity
    ticker.sleepMillis(10000);
    // all these are served in a burst (10 + 1 by borrowing from the future)
    limiter.acquire(11);
    // out of capacity, we have to wait
    limiter.acquire(1);
    // and wait
    limiter.acquire(1);
    // fill up 3 permits
    ticker.sleepMillis(3000);
    // we had 3 ready, thus we borrow 2 permits
    limiter.acquire(5);
    // this acquire() will also repay for the previous acquire()
    limiter.acquire(1);
    assertEvents("U10.00", // 10 permits grabbed
    "R0.00", // 1 and 1
    "R1.00", // 1 and 1
    "R1.00", // 5 grabbed
    "U3.00", // 5 grabbed
    "R0.00", // 1 grabbed
    "R3.00");
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						NameExpr
							SimpleName
						(DoubleLiteralExpr
						)
						(IntegerLiteralExpr
						)
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				StringLiteralExpr
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						NameExpr
							SimpleName
						(DoubleLiteralExpr
						)
						(IntegerLiteralExpr
						)
						(FieldAccessExpr
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(IntegerLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				StringLiteralExpr
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				StringLiteralExpr
					LineComment
				SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
)

