commit 644bfcd310f98134b4bba7157dba764e21159f7e
Author: Matthias Broecheler <me@matthiasb.com>
Date:   Tue Aug 20 17:33:39 2013 -0700

    Finished initial refactoring for Pavel to review. DOES NOT BUILD