/**
 * {@inheritDoc}
 */
@Override
public void init() {
    logger.log(Level.INFO, "Starting Atmosphere Redis Clustering support");
    final Broadcaster broadcaster = bc;
    listener.submit(new Runnable() {

        public void run() {
            jedisSubscriber.subscribe(new JedisPubSub() {

                public void onMessage(String channel, String message) {
                    receivedMessages.offer(message);
                    broadcaster.broadcast(message);
                }

                public void onSubscribe(String channel, int subscribedChannels) {
                }

                public void onUnsubscribe(String channel, int subscribedChannels) {
                }

                public void onPSubscribe(String pattern, int subscribedChannels) {
                }

                public void onPUnsubscribe(String pattern, int subscribedChannels) {
                }

                public void onPMessage(String pattern, String channel, String message) {
                }
            }, bc.getID());
        }
    });
}||||||||/**
 * {@inheritDoc}
 */
@Override
public void init() {
    logger.log(Level.INFO, "Starting Atmosphere Redis Clustering support");
    final Broadcaster broadcaster = bc;
    listener.submit(new Runnable() {

        public void run() {
            jedisSubscriber.subscribe(new JedisPubSub() {

                public void onMessage(String channel, String message) {
                    receivedMessages.offer(message);
                    broadcaster.broadcast(message);
                }

                public void onSubscribe(String channel, int subscribedChannels) {
                    if (logger.isLoggable(Level.FINE))
                        logger.fine("onSubscribe: " + channel);
                }

                public void onUnsubscribe(String channel, int subscribedChannels) {
                    if (logger.isLoggable(Level.FINE))
                        logger.fine("onUnsubscribe: " + channel);
                }

                public void onPSubscribe(String pattern, int subscribedChannels) {
                    if (logger.isLoggable(Level.FINE))
                        logger.fine("onPSubscribe: " + pattern);
                }

                public void onPUnsubscribe(String pattern, int subscribedChannels) {
                    if (logger.isLoggable(Level.FINE))
                        logger.fine("onPUnsubscribe: " + pattern);
                }

                public void onPMessage(String pattern, String channel, String message) {
                    if (logger.isLoggable(Level.FINE))
                        logger.fine("onPMessage: " + pattern + " " + channel + " " + message);
                }
            }, bc.getID());
        }
    });
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				StringLiteralExpr
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					NameExpr
						SimpleName
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(MethodDeclaration
						(BlockStmt
							(ExpressionStmt
								(MethodCallExpr
									(ObjectCreationExpr
										(MethodDeclaration
											(BlockStmt
												(ExpressionStmt
													(MethodCallExpr
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ExpressionStmt
													(MethodCallExpr
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(ClassOrInterfaceType
											SimpleName
										)
									)
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									SimpleName
									NameExpr
										SimpleName
								)
							)
						)
						(VoidType
						)
						SimpleName
					)
					(ClassOrInterfaceType
						SimpleName
					)
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				StringLiteralExpr
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					NameExpr
						SimpleName
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(MethodDeclaration
						(BlockStmt
							(ExpressionStmt
								(MethodCallExpr
									(ObjectCreationExpr
										(MethodDeclaration
											(BlockStmt
												(ExpressionStmt
													(MethodCallExpr
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ExpressionStmt
													(MethodCallExpr
														NameExpr
															SimpleName
														SimpleName
														NameExpr
															SimpleName
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(ExpressionStmt
														(MethodCallExpr
															(BinaryExpr
																StringLiteralExpr
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(ExpressionStmt
														(MethodCallExpr
															(BinaryExpr
																StringLiteralExpr
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(ExpressionStmt
														(MethodCallExpr
															(BinaryExpr
																StringLiteralExpr
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(ExpressionStmt
														(MethodCallExpr
															(BinaryExpr
																StringLiteralExpr
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(PrimitiveType
												)
											)
										)
										(MethodDeclaration
											(BlockStmt
												(IfStmt
													(MethodCallExpr
														(FieldAccessExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(ExpressionStmt
														(MethodCallExpr
															(BinaryExpr
																(BinaryExpr
																	(BinaryExpr
																		(BinaryExpr
																			(BinaryExpr
																				StringLiteralExpr
																				NameExpr
																					SimpleName
																			)
																			StringLiteralExpr
																		)
																		NameExpr
																			SimpleName
																	)
																	StringLiteralExpr
																)
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
													)
												)
											)
											(VoidType
											)
											SimpleName
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
											(Parameter
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(ClassOrInterfaceType
											SimpleName
										)
									)
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
									SimpleName
									NameExpr
										SimpleName
								)
							)
						)
						(VoidType
						)
						SimpleName
					)
					(ClassOrInterfaceType
						SimpleName
					)
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)

