  public function testConvertsARequestToAContextArray()
  {
    $request = new Message\Request('POST', '/resource/123', 'http://example.com');
    $request->addHeader('Content-Type: application/x-www-form-urlencoded');
    $request->addHeader('Content-Length: 15');
    $request->setContent('foo=bar&bar=baz');

    $client = new StreamClient();
    $client->setMaxRedirects(5);
    $expected = array('http' => array(
      'method'           => 'POST',
      'header'           => "Content-Type: application/x-www-form-urlencoded\r\nContent-Length: 15",
      'content'          => 'foo=bar&bar=baz',
      'protocol_version' => 1.0,
      'ignore_errors'    => true,
      'max_redirects'    => 5,
      'timeout'          => 5,
    ));

    $this->assertEquals($client->getStreamContextArray($request), $expected);
  }
}||||||||  public function testConvertsARequestToAContextArray()
  {
    $request = new Message\Request('POST', '/resource/123', 'http://example.com');
    $request->addHeader('Content-Type: application/x-www-form-urlencoded');
    $request->addHeader('Content-Length: 15');
    $request->setContent('foo=bar&bar=baz');

    $client = new StreamClient();
    $client->setMaxRedirects(5);
    $client->setIgnoreErrors(false);
    $client->setTimeout(10);
    $expected = array('http' => array(
      'method'           => 'POST',
      'header'           => "Content-Type: application/x-www-form-urlencoded\r\nContent-Length: 15",
      'content'          => 'foo=bar&bar=baz',
      'protocol_version' => 1.0,
      'ignore_errors'    => false,
      'max_redirects'    => 5,
      'timeout'          => 10,
    ));

    $this->assertEquals($client->getStreamContextArray($request), $expected);
  }
}||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (SCALAR)
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (AST_CONST)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR)))
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR)))
            (AST_VAR))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (SCALAR)
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_CONST)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (AST_CONST)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR)))
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR)))
            (AST_VAR))))