	private function displayModuleAccesses($currentProfile)
	{
		echo '
		<script type="text/javascript">
			function changeModuleAccess(checkbox, id_module, variable)
			{
				getE(\'ajax_confirmation\').innerHTML = \'<span class="bold">\'+lang[2]+\'</span>\';
				$.post(
					\'ajax-tab.php?tab=AdminAccess&token='.Tools::getAdminTokenLite('AdminAccess').'&changeModuleAccess\',
					{id_profile:'.(int)$currentProfile.',id_module:id_module,action:checkbox.checked,variable:variable},
					function(r) {
						if (r != \'ok\')
							getE(\'ajax_confirmation\').innerHTML = \'<span class="bold">'.addslashes(Tools::displayError('An error occurred:')).' \'+lang[1]+\'</span>\';
						else
						{
							getE(\'ajax_confirmation\').innerHTML = \'<span class="bold">\'+lang[0]+\'</span>\';
							if (id_module == -1)
								$(\'.ajax-ma-\'+variable).each(function(key, value) {
									value.checked = checkbox.checked;
								});
							else if (!checkbox.checked)
								$(\'#ajax-ma-\'+variable+\'-master\').each(function(key, value) {
									value.checked = checkbox.checked;
								});
						}
					}
				);
			}
		</script>
		<table class="table float" cellspacing="0" style="margin-left:20px">
		<tr>
			<th>'.$this->l('Modules').'</th>
			<th class="center"><input type="checkbox" id="ajax-ma-view-master" '.($this->tabAccess['edit'] == 1 ? 'onclick="changeModuleAccess(this, -1, \'view\');"' : 'disabled="disabled"').' /> '.$this->l('View').'</th>
			<th class="center"><input type="checkbox" id="ajax-ma-configure-master" '.($this->tabAccess['edit'] == 1 ? 'onclick="changeModuleAccess(this, -1, \'configure\');"' : 'disabled="disabled"').' /> '.$this->l('Configure').'</th>
		</tr>';

		$modules = Db::getInstance(_PS_USE_SQL_SLAVE_)->ExecuteS('
		SELECT ma.id_module, m.name, ma.`view`, ma.`configure`
		FROM '._DB_PREFIX_.'module_access ma
		LEFT JOIN '._DB_PREFIX_.'module m ON ma.id_module = m.id_module
		WHERE id_profile = '.(int)$currentProfile.'
		ORDER BY m.name');
		if (!sizeof($modules))
			echo '<tr><td colspan="2">'.$this->l('No modules installed').'</td></tr>';
		else
			foreach ($modules AS $module)
				echo '<tr>
					<td>&raquo; '.$module['name'].'</td>
					<td>
						<input type="checkbox" class="ajax-ma-view"
							'.((int)$module['view'] == 1 ? 'checked="checked"' : '').'
							'.($this->tabAccess['edit'] == 1 ? 'onclick="changeModuleAccess(this, '.(int)$module['id_module'].', \'view\');"' : 'disabled="disabled"').'
						/>
					</td>
					<td>
						<input type="checkbox" class="ajax-ma-configure"
							'.((int)$module['configure'] == 1 ? 'checked="checked"' : '').'
							'.($this->tabAccess['edit'] == 1 ? 'onclick="changeModuleAccess(this, '.(int)$module['id_module'].', \'configure\');"' : 'disabled="disabled"').'
						/>
					</td>
				</tr>';

		echo '</table>';
	}
}

||||||||	private function displayModuleAccesses($currentProfile)
	{
		echo '
		<script type="text/javascript">
			$(document).ready(function(){
				$(".changeModuleAccess").change(function(){
					var tout = $(this).attr("rel").split("||");
					var id_module = tout[0];
					var perm = tout[1];
					var enabled = $(this).is(":checked")? 1 : 0;

					if (id_module == -1)
						$(\'.ajax-ma-\'+perm).each(function(key, value) {
							$(this).attr("checked", enabled);
						});
					else if (!enabled)
						$(\'#ajax-ma-\'+perm+\'-master\').each(function(key, value) {
							$(this).attr("checked", enabled);
						});

					$.ajax({
						type:"POST",
						url : "ajax-tab.php",
						async: true,
						data : {
							ajaxMode : "1",
							id_module:id_module,
							perm:perm,
							enabled:enabled,
							id_profile:'.(int)$currentProfile.',
							changeModuleAccess:"1",
							token : "'.$this->token.'",
							controller:"AdminAccess"
						},
						success : function(res,textStatus,jqXHR)
						{
							try
							{
								res = $.parseJSON(res);
								if (res.result == "ok")
									showSuccessMessage(res.msg);
								else
									showErrorMessage(res.msg);
							}
							catch(e)
							{
								alert("oups");
							}
						}
					});
				});
			});
		</script>
		<table class="table float" cellspacing="0" style="margin-left:20px">
		<tr>
			<th>'.$this->l('Modules').'</th>
			<th class="center"><input type="checkbox" id="ajax-ma-view-master" '.($this->tabAccess['edit'] == 1 ? 'class="changeModuleAccess" rel="-1||view"' : 'disabled="disabled"').' /> '.$this->l('View').'</th>
			<th class="center"><input type="checkbox" id="ajax-ma-configure-master" '.($this->tabAccess['edit'] == 1 ? 'class="changeModuleAccess" rel="-1||configure"' : 'disabled="disabled"').' /> '.$this->l('Configure').'</th>
		</tr>';

		$modules = Db::getInstance(_PS_USE_SQL_SLAVE_)->ExecuteS('
		SELECT ma.id_module, m.name, ma.`view`, ma.`configure`
		FROM '._DB_PREFIX_.'module_access ma
		LEFT JOIN '._DB_PREFIX_.'module m ON ma.id_module = m.id_module
		WHERE id_profile = '.(int)$currentProfile.'
		ORDER BY m.name');
		if (!sizeof($modules))
			echo '<tr><td colspan="2">'.$this->l('No modules installed').'</td></tr>';
		else
			foreach ($modules AS $module)
				echo '<tr>
					<td>&raquo; '.$module['name'].'</td>
					<td>
						<input type="checkbox"
							'.((int)$module['view'] == 1 ? 'checked="checked"' : '').'
							'.($this->tabAccess['edit'] == 1 ? 'class="ajax-ma-view changeModuleAccess" rel="'.(int)$module['id_module'].'||view"' : ' class="ajax-ma-view" disabled="disabled"').'
						/>
					</td>
					<td>
						<input type="checkbox"
							'.((int)$module['configure'] == 1 ? 'checked="checked"' : '').'
							'.($this->tabAccess['edit'] == 1 ? ' class="ajax-ma-configure changeModuleAccess" rel="'.(int)$module['id_module'].'||configure"' : ' class="ajax-ma-configure" disabled="disabled"').'
						/>
					</td>
				</tr>';

		echo '</table>';
	}
}

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_ECHO
        (AST_BINARY_OP
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_BINARY_OP
                                                                    (AST_BINARY_OP
                                                                        (SCALAR)
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (SCALAR))))
                                                                    (SCALAR))
                                                                (AST_CAST
                                                                    (AST_VAR)))
                                                            (SCALAR))
                                                        (AST_CALL
                                                            (
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (SCALAR))))))
                                                    (SCALAR))
                                                (AST_METHOD_CALL
                                                    (AST_VAR)
                                                    (
                                                        (SCALAR))))
                                            (SCALAR))
                                        (AST_CONDITIONAL
                                            (AST_BINARY_OP
                                                (AST_DIM
                                                    (AST_PROP
                                                        (AST_VAR))
                                                    (SCALAR))
                                                (SCALAR))
                                            (SCALAR)
                                            (SCALAR)))
                                    (SCALAR))
                                (AST_METHOD_CALL
                                    (AST_VAR)
                                    (
                                        (SCALAR))))
                            (SCALAR))
                        (AST_CONDITIONAL
                            (AST_BINARY_OP
                                (AST_DIM
                                    (AST_PROP
                                        (AST_VAR))
                                    (SCALAR))
                                (SCALAR))
                            (SCALAR)
                            (SCALAR)))
                    (SCALAR))
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (SCALAR))))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_STATIC_CALL
                (
                    (AST_CONST)))
            (
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (SCALAR)
                                        (AST_CONST))
                                    (SCALAR))
                                (AST_CONST))
                            (SCALAR))
                        (AST_CAST
                            (AST_VAR)))
                    (SCALAR)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_CALL
                    (
                        (AST_VAR))))
            (
                (AST_ECHO
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_METHOD_CALL
                                (AST_VAR)
                                (
                                    (SCALAR))))
                        (SCALAR)))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_FOREACH
                    (AST_VAR)
                    (AST_VAR)
                    (NULL)
                    (
                        (AST_ECHO
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_BINARY_OP
                                                                    (SCALAR)
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR)))
                                                                (SCALAR))
                                                            (AST_CONDITIONAL
                                                                (AST_BINARY_OP
                                                                    (AST_CAST
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (SCALAR)))
                                                                    (SCALAR))
                                                                (SCALAR)
                                                                (SCALAR)))
                                                        (SCALAR))
                                                    (AST_CONDITIONAL
                                                        (AST_BINARY_OP
                                                            (AST_DIM
                                                                (AST_PROP
                                                                    (AST_VAR))
                                                                (SCALAR))
                                                            (SCALAR))
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_CAST
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR))))
                                                            (SCALAR))
                                                        (SCALAR)))
                                                (SCALAR))
                                            (AST_CONDITIONAL
                                                (AST_BINARY_OP
                                                    (AST_CAST
                                                        (AST_DIM
                                                            (AST_VAR)
                                                            (SCALAR)))
                                                    (SCALAR))
                                                (SCALAR)
                                                (SCALAR)))
                                        (SCALAR))
                                    (AST_CONDITIONAL
                                        (AST_BINARY_OP
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (SCALAR))
                                            (SCALAR))
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_CAST
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR))))
                                            (SCALAR))
                                        (SCALAR)))
                                (SCALAR))))))))
    (AST_ECHO
        (SCALAR)))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_ECHO
        (AST_BINARY_OP
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_CAST
                                                                    (AST_VAR)))
                                                            (SCALAR))
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (SCALAR))
                                                (AST_METHOD_CALL
                                                    (AST_VAR)
                                                    (
                                                        (SCALAR))))
                                            (SCALAR))
                                        (AST_CONDITIONAL
                                            (AST_BINARY_OP
                                                (AST_DIM
                                                    (AST_PROP
                                                        (AST_VAR))
                                                    (SCALAR))
                                                (SCALAR))
                                            (SCALAR)
                                            (SCALAR)))
                                    (SCALAR))
                                (AST_METHOD_CALL
                                    (AST_VAR)
                                    (
                                        (SCALAR))))
                            (SCALAR))
                        (AST_CONDITIONAL
                            (AST_BINARY_OP
                                (AST_DIM
                                    (AST_PROP
                                        (AST_VAR))
                                    (SCALAR))
                                (SCALAR))
                            (SCALAR)
                            (SCALAR)))
                    (SCALAR))
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (SCALAR))))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_STATIC_CALL
                (
                    (AST_CONST)))
            (
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (SCALAR)
                                        (AST_CONST))
                                    (SCALAR))
                                (AST_CONST))
                            (SCALAR))
                        (AST_CAST
                            (AST_VAR)))
                    (SCALAR)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_CALL
                    (
                        (AST_VAR))))
            (
                (AST_ECHO
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_METHOD_CALL
                                (AST_VAR)
                                (
                                    (SCALAR))))
                        (SCALAR)))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_FOREACH
                    (AST_VAR)
                    (AST_VAR)
                    (NULL)
                    (
                        (AST_ECHO
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_BINARY_OP
                                                                    (SCALAR)
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR)))
                                                                (SCALAR))
                                                            (AST_CONDITIONAL
                                                                (AST_BINARY_OP
                                                                    (AST_CAST
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (SCALAR)))
                                                                    (SCALAR))
                                                                (SCALAR)
                                                                (SCALAR)))
                                                        (SCALAR))
                                                    (AST_CONDITIONAL
                                                        (AST_BINARY_OP
                                                            (AST_DIM
                                                                (AST_PROP
                                                                    (AST_VAR))
                                                                (SCALAR))
                                                            (SCALAR))
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_CAST
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR))))
                                                            (SCALAR))
                                                        (SCALAR)))
                                                (SCALAR))
                                            (AST_CONDITIONAL
                                                (AST_BINARY_OP
                                                    (AST_CAST
                                                        (AST_DIM
                                                            (AST_VAR)
                                                            (SCALAR)))
                                                    (SCALAR))
                                                (SCALAR)
                                                (SCALAR)))
                                        (SCALAR))
                                    (AST_CONDITIONAL
                                        (AST_BINARY_OP
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (SCALAR))
                                            (SCALAR))
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_CAST
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR))))
                                            (SCALAR))
                                        (SCALAR)))
                                (SCALAR))))))))
    (AST_ECHO
        (SCALAR)))