    public function test_addSetting_shouldPassTrackerStorage_IfInTrackerMode()
    {
        $this->setSuperUser();

        $GLOBALS['PIWIK_TRACKER_MODE'] = true;

        $settings = $this->createSettingsInstance();
        $setting = $this->buildUserSetting('myname', 'mytitle', 'myRandomName');
        $settings->addSetting($setting);

        unset($GLOBALS['PIWIK_TRACKER_MODE']);

        $storage = $setting->getStorage();
        $this->assertTrue($storage instanceof SettingsStorage);
    }

    /**
     * @expectedException \Exception
     * @expectedExceptionMessage CoreAdminHome_PluginSettingsValueNotAllowed
     */
||||||||    public function test_addSetting_shouldPassTrackerStorage_IfInTrackerMode()
    {
        $this->setSuperUser();

        SettingsServer::setIsTrackerApiRequest();

        $settings = $this->createSettingsInstance();
        $setting = $this->buildUserSetting('myname', 'mytitle', 'myRandomName');
        $settings->addSetting($setting);

        SettingsServer::setIsNotTrackerApiRequest();

        $storage = $setting->getStorage();
        $this->assertTrue($storage instanceof SettingsStorage);
    }

    /**
     * @expectedException \Exception
     * @expectedExceptionMessage CoreAdminHome_PluginSettingsValueNotAllowed
     */
||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_ASSIGN
        (AST_DIM
            (AST_VAR)
            (SCALAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR)
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)))
    (AST_UNSET
        (AST_DIM
            (AST_VAR)
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_INSTANCEOF
                (AST_VAR)))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_STATIC_CALL)
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR)
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)))
    (AST_STATIC_CALL)
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_INSTANCEOF
                (AST_VAR)))))