	public function postProcess()
	{
		if (!Feature::isFeatureActive())
			return;

		if (Tools::isSubmit('deletefeature_value') || Tools::isSubmit('submitAddfeature_value'))
		{
			Hook::exec('displayFeatureValuePostProcess',
				array('errors' => &$this->errors)); // send errors as reference to allow displayFeatureValuePostProcess to stop saving process

			if (Tools::isSubmit('deletefeature_value'))
			{
				if ($this->tabAccess['delete'] === '1')
				{
					if (Tools::getValue('id_feature_value'))
					{
						$object = new FeatureValue((int)Tools::getValue('id_feature_value'));
						if ($object->delete())
							Tools::redirectAdmin(self::$currentIndex.'&conf=2'.'&token='.$this->token);
						else
							$this->errors[] = Tools::displayError('An error occurred during deletion.');
					}
				}
				else
					$this->errors[] = Tools::displayError('You do not have permission to delete here.');
			}
			else if (Tools::isSubmit('submitAddfeature_value') || Tools::isSubmit('submitAddfeature_valueAndStay'))
			{
				$this->table = 'feature_value';
				$this->className = 'FeatureValue';
				$this->identifier = 'id_feature_value';

				$id = (int)Tools::getValue('id_feature_value');
				$feature_value = new FeatureValue($id);
				$feature_value->value = array();

				if (!Tools::getValue('value_'.$this->context->language->id))
					$this->errors[] = Tools::displayError('The value is required for the default language.');

				$languages = Language::getLanguages(false);
					foreach ($languages as $language)
						$feature_value->value[$language['id_lang']] = Tools::getValue('value_'.$language['id_lang']);
				$feature_value->id_feature = Tools::getValue('id_feature');

				if (count($this->errors) > 0)
				{
					$this->display = 'editFeatureValue';
					parent::postProcess();
				}
				else if (isset($id) && !empty($id))
				{
					// Update
					if (!$feature_value->update())
						$this->errors[] = Tools::displayError('An error has occurred: Can\'t save the current feature value');
					else if (Tools::isSubmit('submitAdd'.$this->table.'AndStay') && !count($this->errors))
						Tools::redirectAdmin(self::$currentIndex.'&'.$this->identifier.'=&id_feature='.(int)Tools::getValue('id_feature').'&conf=3&update'.$this->table.'&token='.$this->token);
					else
						Tools::redirectAdmin(self::$currentIndex.'&conf=4&token='.$this->token);
				}
				else
				{
					// Create
					if (!$feature_value->add())
						$this->errors[] = Tools::displayError('An error has occurred: Can\'t save the current feature value');
					else if (Tools::isSubmit('submitAdd'.$this->table.'AndStay') && !count($this->errors))
						Tools::redirectAdmin(self::$currentIndex.'&'.$this->identifier.'=&id_feature='.(int)Tools::getValue('id_feature').'&conf=3&update'.$this->table.'&token='.$this->token);
					else
						Tools::redirectAdmin(self::$currentIndex.'&conf=4&token='.$this->token);
				}
			}
			else
				parent::postProcess();
		}
		else
		{
			Hook::exec('displayFeaturePostProcess',
				array('errors' => &$this->errors)); // send errors as reference to allow displayFeaturePostProcess to stop saving process

			if (Tools::getValue('submitDel'.$this->table))
			{
				if ($this->tabAccess['delete'] === '1')
				{
					if (isset($_POST[$this->table.'Box']))
					{
						$object = new $this->className();
						if ($object->deleteSelection($_POST[$this->table.'Box']))
							Tools::redirectAdmin(self::$currentIndex.'&conf=2'.'&token='.$this->token);
						$this->errors[] = Tools::displayError('An error occurred while deleting selection.');
					}
					else
						$this->errors[] = Tools::displayError('You must select at least one element to delete.');
				}
				else
					$this->errors[] = Tools::displayError('You do not have permission to delete here.');
			}
			else if (Tools::isSubmit('submitAdd'.$this->table))
			{
				if ($this->tabAccess['add'] === '1')
				{
					$id_feature = (int)Tools::getValue('id_feature');
					// Adding last position to the feature if not exist
					if ($id_feature <= 0)
					{
						$sql = 'SELECT `position`+1
								FROM `'._DB_PREFIX_.'feature`
								ORDER BY position DESC';
					// set the position of the new feature in $_POST for postProcess() method
						$_POST['position'] = DB::getInstance()->getValue($sql);
					}
					// clean \n\r characters
					foreach ($_POST as $key => $value)
						if (preg_match('/^name_/Ui', $key))
							$_POST[$key] = str_replace ('\n', '', str_replace('\r', '', $value));
					parent::postProcess();
				}
			}
			else
				parent::postProcess();
		}
	}

	/**
	 * Override processAdd to change SaveAndStay button action
	 * @see classes/AdminControllerCore::processAdd()
	 */
||||||||	public function postProcess()
	{
		if (!Feature::isFeatureActive())
			return;

		if ($this->table == 'feature_value' && ($this->action == 'save' || $this->action == 'delete' || $this->action == 'bulkDelete'))
			Hook::exec('displayFeatureValuePostProcess',
				array('errors' => &$this->errors)); // send errors as reference to allow displayFeatureValuePostProcess to stop saving process
		else
			Hook::exec('displayFeaturePostProcess',
				array('errors' => &$this->errors)); // send errors as reference to allow displayFeaturePostProcess to stop saving process

		parent::postProcess();
	}

	/**
	 * Override processAdd to change SaveAndStay button action
	 * @see classes/AdminControllerCore::processAdd()
	 */
||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_STATIC_CALL))
            (
                (AST_RETURN
                    (NULL)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_STATIC_CALL
                    (
                        (SCALAR)))
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (
                (AST_STATIC_CALL
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (SCALAR)))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_STATIC_CALL
                            (
                                (SCALAR)))
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_BINARY_OP
                                        (AST_DIM
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (SCALAR))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_STATIC_CALL
                                                    (
                                                        (SCALAR)))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_VAR)
                                                        (AST_NEW
                                                            (
                                                                (AST_CAST
                                                                    (AST_STATIC_CALL
                                                                        (
                                                                            (SCALAR)))))))
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_METHOD_CALL
                                                                (AST_VAR))
                                                            (
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (AST_BINARY_OP
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_STATIC_PROP)
                                                                                    (SCALAR))
                                                                                (SCALAR))
                                                                            (AST_PROP
                                                                                (AST_VAR)))))))
                                                        (AST_IF_ELEM
                                                            (NULL)
                                                            (
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (NULL))
                                                                    (AST_STATIC_CALL
                                                                        (
                                                                            (SCALAR))))))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (NULL))
                                            (AST_STATIC_CALL
                                                (
                                                    (SCALAR)))))))))
                    (AST_IF_ELEM
                        (NULL)
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_BINARY_OP
                                        (AST_STATIC_CALL
                                            (
                                                (SCALAR)))
                                        (AST_STATIC_CALL
                                            (
                                                (SCALAR))))
                                    (
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (AST_ASSIGN
                                            (AST_VAR)
                                            (AST_CAST
                                                (AST_STATIC_CALL
                                                    (
                                                        (SCALAR)))))
                                        (AST_ASSIGN
                                            (AST_VAR)
                                            (AST_NEW
                                                (
                                                    (AST_VAR))))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_ARRAY))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_UNARY_OP
                                                    (AST_STATIC_CALL
                                                        (
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_PROP
                                                                    (AST_PROP
                                                                        (AST_PROP
                                                                            (AST_VAR))))))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (SCALAR)))))))
                                        (AST_ASSIGN
                                            (AST_VAR)
                                            (AST_STATIC_CALL
                                                (
                                                    (AST_CONST))))
                                        (AST_FOREACH
                                            (AST_VAR)
                                            (AST_VAR)
                                            (NULL)
                                            (
                                                (AST_ASSIGN
                                                    (AST_DIM
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (AST_DIM
                                                            (AST_VAR)
                                                            (SCALAR)))
                                                    (AST_STATIC_CALL
                                                        (
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (SCALAR))))))))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_STATIC_CALL
                                                (
                                                    (SCALAR))))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_CALL
                                                        (
                                                            (AST_PROP
                                                                (AST_VAR))))
                                                    (SCALAR))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (SCALAR))
                                                    (AST_STATIC_CALL)))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_BINARY_OP
                                                                (AST_ISSET
                                                                    (AST_VAR))
                                                                (AST_UNARY_OP
                                                                    (AST_EMPTY
                                                                        (AST_VAR))))
                                                            (
                                                                (AST_IF
                                                                    (AST_IF_ELEM
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_VAR)))
                                                                        (
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (NULL))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (SCALAR))))))
                                                                    (AST_IF_ELEM
                                                                        (NULL)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_BINARY_OP
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (SCALAR)
                                                                                                        (AST_PROP
                                                                                                            (AST_VAR)))
                                                                                                    (SCALAR))))
                                                                                        (AST_UNARY_OP
                                                                                            (AST_CALL
                                                                                                (
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR))))))
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_BINARY_OP
                                                                                                                (AST_BINARY_OP
                                                                                                                    (AST_BINARY_OP
                                                                                                                        (AST_BINARY_OP
                                                                                                                            (AST_BINARY_OP
                                                                                                                                (AST_STATIC_PROP)
                                                                                                                                (SCALAR))
                                                                                                                            (AST_PROP
                                                                                                                                (AST_VAR)))
                                                                                                                        (SCALAR))
                                                                                                                    (AST_CAST
                                                                                                                        (AST_STATIC_CALL
                                                                                                                            (
                                                                                                                                (SCALAR)))))
                                                                                                                (SCALAR))
                                                                                                            (AST_PROP
                                                                                                                (AST_VAR)))
                                                                                                        (SCALAR))
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR)))))))
                                                                                (AST_IF_ELEM
                                                                                    (NULL)
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_STATIC_PROP)
                                                                                                        (SCALAR))
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR)))))))))))))
                                                        (AST_IF_ELEM
                                                            (NULL)
                                                            (
                                                                (AST_IF
                                                                    (AST_IF_ELEM
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_VAR)))
                                                                        (
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (NULL))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (SCALAR))))))
                                                                    (AST_IF_ELEM
                                                                        (NULL)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_BINARY_OP
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (SCALAR)
                                                                                                        (AST_PROP
                                                                                                            (AST_VAR)))
                                                                                                    (SCALAR))))
                                                                                        (AST_UNARY_OP
                                                                                            (AST_CALL
                                                                                                (
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR))))))
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_BINARY_OP
                                                                                                                (AST_BINARY_OP
                                                                                                                    (AST_BINARY_OP
                                                                                                                        (AST_BINARY_OP
                                                                                                                            (AST_BINARY_OP
                                                                                                                                (AST_STATIC_PROP)
                                                                                                                                (SCALAR))
                                                                                                                            (AST_PROP
                                                                                                                                (AST_VAR)))
                                                                                                                        (SCALAR))
                                                                                                                    (AST_CAST
                                                                                                                        (AST_STATIC_CALL
                                                                                                                            (
                                                                                                                                (SCALAR)))))
                                                                                                                (SCALAR))
                                                                                                            (AST_PROP
                                                                                                                (AST_VAR)))
                                                                                                        (SCALAR))
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR)))))))
                                                                                (AST_IF_ELEM
                                                                                    (NULL)
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_STATIC_PROP)
                                                                                                        (SCALAR))
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR)))))))))))))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_STATIC_CALL)))))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_STATIC_CALL
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (SCALAR)))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_STATIC_CALL
                            (
                                (AST_BINARY_OP
                                    (SCALAR)
                                    (AST_PROP
                                        (AST_VAR)))))
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_BINARY_OP
                                        (AST_DIM
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (SCALAR))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_ISSET
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_BINARY_OP
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (SCALAR))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_VAR)
                                                        (AST_NEW
                                                            (AST_PROP
                                                                (AST_VAR))))
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_METHOD_CALL
                                                                (AST_VAR)
                                                                (
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (AST_BINARY_OP
                                                                            (AST_PROP
                                                                                (AST_VAR))
                                                                            (SCALAR)))))
                                                            (
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (AST_BINARY_OP
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_STATIC_PROP)
                                                                                    (SCALAR))
                                                                                (SCALAR))
                                                                            (AST_PROP
                                                                                (AST_VAR))))))))
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (SCALAR))))))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (SCALAR)))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (NULL))
                                            (AST_STATIC_CALL
                                                (
                                                    (SCALAR)))))))))
                    (AST_IF_ELEM
                        (NULL)
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_STATIC_CALL
                                        (
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_PROP
                                                    (AST_VAR)))))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_DIM
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (SCALAR))
                                                    (SCALAR))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_VAR)
                                                        (AST_CAST
                                                            (AST_STATIC_CALL
                                                                (
                                                                    (SCALAR)))))
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_BINARY_OP
                                                                (AST_VAR)
                                                                (SCALAR))
                                                            (
                                                                (AST_ASSIGN
                                                                    (AST_VAR)
                                                                    (AST_BINARY_OP
                                                                        (AST_BINARY_OP
                                                                            (SCALAR)
                                                                            (AST_CONST))
                                                                        (SCALAR)))
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR))
                                                                    (AST_METHOD_CALL
                                                                        (AST_STATIC_CALL)
                                                                        (
                                                                            (AST_VAR)))))))
                                                    (AST_FOREACH
                                                        (AST_VAR)
                                                        (AST_VAR)
                                                        (AST_VAR)
                                                        (
                                                            (AST_IF
                                                                (AST_IF_ELEM
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR)
                                                                            (AST_VAR)))
                                                                    (
                                                                        (AST_ASSIGN
                                                                            (AST_DIM
                                                                                (AST_VAR)
                                                                                (AST_VAR))
                                                                            (AST_CALL
                                                                                (
                                                                                    (SCALAR)
                                                                                    (SCALAR)
                                                                                    (AST_CALL
                                                                                        (
                                                                                            (SCALAR)
                                                                                            (SCALAR)
                                                                                            (AST_VAR)))))))))))
                                                    (AST_STATIC_CALL))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_STATIC_CALL)))))))))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_STATIC_CALL))
            (
                (AST_RETURN
                    (NULL)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR))
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (AST_PROP
                                (AST_VAR))
                            (SCALAR))
                        (AST_BINARY_OP
                            (AST_PROP
                                (AST_VAR))
                            (SCALAR)))
                    (AST_BINARY_OP
                        (AST_PROP
                            (AST_VAR))
                        (SCALAR))))
            (
                (AST_STATIC_CALL
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (SCALAR)))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_STATIC_CALL
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (SCALAR))))))))
    (AST_STATIC_CALL))