    function get_hiding_affected(&$grade_grades, &$grade_items) {
        global $CFG;

        if (count($grade_grades) !== count($grade_items)) {
            error("Incorrent size of arrays in params of grade_grade::get_hiding_affected()!");
        }

        $dependson = array();
        $todo = array();
        $unknown = array();  // can not find altered
        $altered = array();  // altered grades

        $hiddenfound = false;
        foreach($grade_grades as $itemid=>$unused) {
            $grade_grade =& $grade_grades[$itemid];
            if ($grade_grade->is_excluded()) {
                //nothing to do, aggregation is ok
            } else if ($grade_grade->is_hidden()) {
                $hiddenfound = true;
                // hidden null grade does not affect the aggregation
                if (!is_null($grade_grade->finalgrade)) {
                    $altered[$grade_grade->itemid] = null;
                }
            } else if ($grade_grade->is_locked() or $grade_grade->is_overridden()) {
                // no need to recalculate locked or overridden grades
            } else {
                $dependson[$grade_grade->itemid] = $grade_items[$grade_grade->itemid]->depends_on();
                if (!empty($dependson[$grade_grade->itemid])) {
                    $todo[] = $grade_grade->itemid;
                }
            }
        }
        if (!$hiddenfound) {
            return array('unknown'=>array(), 'altered'=>array());
        }

        $max = count($todo);
        for($i=0; $i<$max; $i++) {
            $found = false;
            foreach($todo as $key=>$do) {
                if (array_intersect($dependson[$do], $unknown)) {
                    // this item depends on hidden grade indirectly
                    $unknown[$do] = $do;
                    unset($todo[$key]);
                    $found = true;
                    continue;

                } else if (!array_intersect($dependson[$do], $todo)) {
                    if (!array_intersect($dependson[$do], array_keys($altered))) {
                        // hiding does not affect this grade
                        unset($todo[$key]);
                        $found = true;
                        continue;

                    } else {
                        // depends on altered grades - we should try to recalculate if possible
                        if ($grade_items[$do]->is_calculated() or (!$grade_items[$do]->is_category_item() and !$grade_items[$do]->is_course_item())) {
                            $unknown[$do] = $do;
                            unset($todo[$key]);
                            $found = true;
                            continue;

                        } else {
                            $grade_category = $grade_items[$do]->load_item_category();

                            $values = array();
                            foreach ($dependson[$do] as $itemid) {
                                if (array_key_exists($itemid, $altered)) {
                                    $values[$itemid] = $altered[$itemid];
                                } else {
                                    $values[$itemid] = $grade_grades[$itemid]->finalgrade;
                                }
                            }

                            foreach ($values as $itemid=>$value) {
                                if ($grade_grades[$itemid]->is_excluded()) {
                                    unset($values[$itemid]);
                                    continue;
                                }
                                $values[$itemid] = grade_grade::standardise_score($value, $grade_items[$itemid]->grademin, $grade_items[$itemid]->grademax, 0, 1);
                            }

                            if ($grade_category->aggregateonlygraded) {
                                foreach ($values as $itemid=>$value) {
                                    if (is_null($value)) {
                                        unset($values[$itemid]);
                                    }
                                }
                            } else {
                                foreach ($values as $itemid=>$value) {
                                    if (is_null($value)) {
                                        $values[$itemid] = 0;
                                    }
                                }
                            }

                            // limit and sort
                            $grade_category->apply_limit_rules($values);
                            asort($values, SORT_NUMERIC);

                            // let's see we have still enough grades to do any statistics
                            if (count($values) == 0) {
                                // not enough attempts yet
                                $altered[$do] = null;
                                unset($todo[$key]);
                                $found = true;
                                continue;
                            }

                            $agg_grade = $grade_category->aggregate_values($values, $grade_items);

                            // recalculate the rawgrade back to requested range
                            $finalgrade = grade_grade::standardise_score($agg_grade, 0, 1, $grade_items[$do]->grademin, $grade_items[$do]->grademax);

                            if (!is_null($finalgrade)) {
                                $finalgrade = bounded_number($grade_items[$do]->grademin, $finalgrade, $grade_items[$do]->grademax);
                            }

                            $altered[$do] = $finalgrade;
                            unset($todo[$key]);
                            $found = true;
                            continue;
                        }
                    }
                }
            }
            if (!$found) {
                break;
            }
        }

        return array('unknown'=>$unknown, 'altered'=>$altered);
    }
}
?>||||||||    function get_hiding_affected(&$grade_grades, &$grade_items) {
        global $CFG;

        if (count($grade_grades) !== count($grade_items)) {
            error("Incorrent size of arrays in params of grade_grade::get_hiding_affected()!");
        }

        $dependson = array();
        $todo = array();
        $unknown = array();  // can not find altered
        $altered = array();  // altered grades

        $hiddenfound = false;
        foreach($grade_grades as $itemid=>$unused) {
            $grade_grade =& $grade_grades[$itemid];
            if ($grade_grade->is_excluded()) {
                //nothing to do, aggregation is ok
            } else if ($grade_grade->is_hidden()) {
                $hiddenfound = true;
                $altered[$grade_grade->itemid] = null;
            } else if ($grade_grade->is_locked() or $grade_grade->is_overridden()) {
                // no need to recalculate locked or overridden grades
            } else {
                $dependson[$grade_grade->itemid] = $grade_items[$grade_grade->itemid]->depends_on();
                if (!empty($dependson[$grade_grade->itemid])) {
                    $todo[] = $grade_grade->itemid;
                }
            }
        }
        if (!$hiddenfound) {
            return array('unknown'=>array(), 'altered'=>array());
        }

        $max = count($todo);
        for($i=0; $i<$max; $i++) {
            $found = false;
            foreach($todo as $key=>$do) {
                if (array_intersect($dependson[$do], $unknown)) {
                    // this item depends on hidden grade indirectly
                    $unknown[$do] = $do;
                    unset($todo[$key]);
                    $found = true;
                    continue;

                } else if (!array_intersect($dependson[$do], $todo)) {
                    if (!array_intersect($dependson[$do], array_keys($altered))) {
                        // hiding does not affect this grade
                        unset($todo[$key]);
                        $found = true;
                        continue;

                    } else {
                        // depends on altered grades - we should try to recalculate if possible
                        if ($grade_items[$do]->is_calculated() or (!$grade_items[$do]->is_category_item() and !$grade_items[$do]->is_course_item())) {
                            $unknown[$do] = $do;
                            unset($todo[$key]);
                            $found = true;
                            continue;

                        } else {
                            $grade_category = $grade_items[$do]->load_item_category();

                            $values = array();
                            foreach ($dependson[$do] as $itemid) {
                                if (array_key_exists($itemid, $altered)) {
                                    $values[$itemid] = $altered[$itemid];
                                } else {
                                    $values[$itemid] = $grade_grades[$itemid]->finalgrade;
                                }
                            }

                            foreach ($values as $itemid=>$value) {
                                if ($grade_grades[$itemid]->is_excluded()) {
                                    unset($values[$itemid]);
                                    continue;
                                }
                                $values[$itemid] = grade_grade::standardise_score($value, $grade_items[$itemid]->grademin, $grade_items[$itemid]->grademax, 0, 1);
                            }

                            if ($grade_category->aggregateonlygraded) {
                                foreach ($values as $itemid=>$value) {
                                    if (is_null($value)) {
                                        unset($values[$itemid]);
                                    }
                                }
                            } else {
                                foreach ($values as $itemid=>$value) {
                                    if (is_null($value)) {
                                        $values[$itemid] = 0;
                                    }
                                }
                            }

                            // limit and sort
                            $grade_category->apply_limit_rules($values);
                            asort($values, SORT_NUMERIC);

                            // let's see we have still enough grades to do any statistics
                            if (count($values) == 0) {
                                // not enough attempts yet
                                $altered[$do] = null;
                                unset($todo[$key]);
                                $found = true;
                                continue;
                            }

                            $agg_grade = $grade_category->aggregate_values($values, $grade_items);

                            // recalculate the rawgrade back to requested range
                            $finalgrade = grade_grade::standardise_score($agg_grade, 0, 1, $grade_items[$do]->grademin, $grade_items[$do]->grademax);

                            if (!is_null($finalgrade)) {
                                $finalgrade = bounded_number($grade_items[$do]->grademin, $finalgrade, $grade_items[$do]->grademax);
                            }

                            $altered[$do] = $finalgrade;
                            unset($todo[$key]);
                            $found = true;
                            continue;
                        }
                    }
                }
            }
            if (!$found) {
                break;
            }
        }

        return array('unknown'=>$unknown, 'altered'=>$altered);
    }
}
?>||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_GLOBAL
        (AST_VAR))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_CALL
                    (
                        (AST_VAR)))
                (AST_CALL
                    (
                        (AST_VAR))))
            (
                (AST_CALL
                    (
                        (SCALAR))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_FOREACH
        (AST_VAR)
        (AST_VAR)
        (AST_VAR)
        (
            (AST_ASSIGN_REF
                (AST_VAR)
                (AST_DIM
                    (AST_VAR)
                    (AST_VAR)))
            (AST_IF
                (AST_IF_ELEM
                    (AST_METHOD_CALL
                        (AST_VAR)))
                (AST_IF_ELEM
                    (NULL)
                    (
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_METHOD_CALL
                                    (AST_VAR))
                                (
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_CONST))
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_UNARY_OP
                                                (AST_CALL
                                                    (
                                                        (AST_PROP
                                                            (AST_VAR)))))
                                            (
                                                (AST_ASSIGN
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (AST_CONST)))))))
                            (AST_IF_ELEM
                                (NULL)
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (AST_METHOD_CALL
                                                    (AST_VAR))
                                                (AST_METHOD_CALL
                                                    (AST_VAR))))
                                        (AST_IF_ELEM
                                            (NULL)
                                            (
                                                (AST_ASSIGN
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (AST_METHOD_CALL
                                                        (AST_DIM
                                                            (AST_VAR)
                                                            (AST_PROP
                                                                (AST_VAR)))))
                                                (AST_IF
                                                    (AST_IF_ELEM
                                                        (AST_UNARY_OP
                                                            (AST_EMPTY
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (AST_PROP
                                                                        (AST_VAR)))))
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (NULL))
                                                                (AST_PROP
                                                                    (AST_VAR)))))))))))))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_VAR))
            (
                (AST_RETURN
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (AST_ARRAY)
                            (SCALAR))
                        (AST_ARRAY_ELEM
                            (AST_ARRAY)
                            (SCALAR)))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CALL
            (
                (AST_VAR))))
    (AST_FOR
        (AST_EXPR_LIST
            (AST_ASSIGN
                (AST_VAR)
                (SCALAR)))
        (AST_EXPR_LIST
            (AST_BINARY_OP
                (AST_VAR)
                (AST_VAR)))
        (AST_EXPR_LIST
            (AST_POST_INC
                (AST_VAR)))
        (
            (AST_ASSIGN
                (AST_VAR)
                (AST_CONST))
            (AST_FOREACH
                (AST_VAR)
                (AST_VAR)
                (AST_VAR)
                (
                    (AST_IF
                        (AST_IF_ELEM
                            (AST_CALL
                                (
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_VAR)))
                            (
                                (AST_ASSIGN
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_VAR))
                                (AST_UNSET
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR)))
                                (AST_ASSIGN
                                    (AST_VAR)
                                    (AST_CONST))
                                (AST_CONTINUE
                                    (NULL))))
                        (AST_IF_ELEM
                            (NULL)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_UNARY_OP
                                            (AST_CALL
                                                (
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_VAR))
                                                    (AST_VAR))))
                                        (
                                            (AST_IF
                                                (AST_IF_ELEM
                                                    (AST_UNARY_OP
                                                        (AST_CALL
                                                            (
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (AST_VAR))
                                                                (AST_CALL
                                                                    (
                                                                        (AST_VAR))))))
                                                    (
                                                        (AST_UNSET
                                                            (AST_DIM
                                                                (AST_VAR)
                                                                (AST_VAR)))
                                                        (AST_ASSIGN
                                                            (AST_VAR)
                                                            (AST_CONST))
                                                        (AST_CONTINUE
                                                            (NULL))))
                                                (AST_IF_ELEM
                                                    (NULL)
                                                    (
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_BINARY_OP
                                                                    (AST_METHOD_CALL
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_BINARY_OP
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))))
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))))))
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR))
                                                                    (AST_UNSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))
                                                            (AST_IF_ELEM
                                                                (NULL)
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_METHOD_CALL
                                                                            (AST_DIM
                                                                                (AST_VAR)
                                                                                (AST_VAR))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_ARRAY))
                                                                    (AST_FOREACH
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR)
                                                                        (NULL)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_CALL
                                                                                        (
                                                                                            (AST_VAR)
                                                                                            (AST_VAR)))
                                                                                    (
                                                                                        (AST_ASSIGN
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR))
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))))
                                                                                (AST_IF_ELEM
                                                                                    (NULL)
                                                                                    (
                                                                                        (AST_ASSIGN
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR))
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))))))))
                                                                    (AST_FOREACH
                                                                        (AST_VAR)
                                                                        (AST_VAR)
                                                                        (AST_VAR)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_DIM
                                                                                            (AST_VAR)
                                                                                            (AST_VAR)))
                                                                                    (
                                                                                        (AST_UNSET
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (AST_CONTINUE
                                                                                            (NULL)))))
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (AST_VAR)
                                                                                        (AST_PROP
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (AST_PROP
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (SCALAR)
                                                                                        (SCALAR))))))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_PROP
                                                                                (AST_VAR))
                                                                            (
                                                                                (AST_FOREACH
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_IF
                                                                                            (AST_IF_ELEM
                                                                                                (AST_CALL
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_UNSET
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (AST_VAR))))))))))
                                                                        (AST_IF_ELEM
                                                                            (NULL)
                                                                            (
                                                                                (AST_FOREACH
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_IF
                                                                                            (AST_IF_ELEM
                                                                                                (AST_CALL
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_ASSIGN
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (AST_VAR))
                                                                                                        (SCALAR))))))))))
                                                                    (AST_METHOD_CALL
                                                                        (AST_VAR)
                                                                        (
                                                                            (AST_VAR)))
                                                                    (AST_CALL
                                                                        (
                                                                            (AST_VAR)
                                                                            (AST_CONST)))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_BINARY_OP
                                                                                (AST_CALL
                                                                                    (
                                                                                        (AST_VAR)))
                                                                                (SCALAR))
                                                                            (
                                                                                (AST_ASSIGN
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR))
                                                                                    (AST_CONST))
                                                                                (AST_UNSET
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR)))
                                                                                (AST_ASSIGN
                                                                                    (AST_VAR)
                                                                                    (AST_CONST))
                                                                                (AST_CONTINUE
                                                                                    (NULL)))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_METHOD_CALL
                                                                            (AST_VAR)
                                                                            (
                                                                                (AST_VAR)
                                                                                (AST_VAR))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (AST_VAR)
                                                                                (SCALAR)
                                                                                (SCALAR)
                                                                                (AST_PROP
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR)))
                                                                                (AST_PROP
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR))))))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_UNARY_OP
                                                                                (AST_CALL
                                                                                    (
                                                                                        (AST_VAR))))
                                                                            (
                                                                                (AST_ASSIGN
                                                                                    (AST_VAR)
                                                                                    (AST_CALL
                                                                                        (
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))
                                                                                            (AST_VAR)
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))))))))
                                                                    (AST_ASSIGN
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR))
                                                                    (AST_UNSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))))))))))))))
            (AST_IF
                (AST_IF_ELEM
                    (AST_UNARY_OP
                        (AST_VAR))
                    (
                        (AST_BREAK
                            (NULL)))))))
    (AST_RETURN
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_VAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_VAR)
                (SCALAR)))))||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_GLOBAL
        (AST_VAR))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_CALL
                    (
                        (AST_VAR)))
                (AST_CALL
                    (
                        (AST_VAR))))
            (
                (AST_CALL
                    (
                        (SCALAR))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_FOREACH
        (AST_VAR)
        (AST_VAR)
        (AST_VAR)
        (
            (AST_ASSIGN_REF
                (AST_VAR)
                (AST_DIM
                    (AST_VAR)
                    (AST_VAR)))
            (AST_IF
                (AST_IF_ELEM
                    (AST_METHOD_CALL
                        (AST_VAR)))
                (AST_IF_ELEM
                    (NULL)
                    (
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_METHOD_CALL
                                    (AST_VAR))
                                (
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_CONST))
                                    (AST_ASSIGN
                                        (AST_DIM
                                            (AST_VAR)
                                            (AST_PROP
                                                (AST_VAR)))
                                        (AST_CONST))))
                            (AST_IF_ELEM
                                (NULL)
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (AST_METHOD_CALL
                                                    (AST_VAR))
                                                (AST_METHOD_CALL
                                                    (AST_VAR))))
                                        (AST_IF_ELEM
                                            (NULL)
                                            (
                                                (AST_ASSIGN
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (AST_METHOD_CALL
                                                        (AST_DIM
                                                            (AST_VAR)
                                                            (AST_PROP
                                                                (AST_VAR)))))
                                                (AST_IF
                                                    (AST_IF_ELEM
                                                        (AST_UNARY_OP
                                                            (AST_EMPTY
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (AST_PROP
                                                                        (AST_VAR)))))
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (NULL))
                                                                (AST_PROP
                                                                    (AST_VAR)))))))))))))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_VAR))
            (
                (AST_RETURN
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (AST_ARRAY)
                            (SCALAR))
                        (AST_ARRAY_ELEM
                            (AST_ARRAY)
                            (SCALAR)))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CALL
            (
                (AST_VAR))))
    (AST_FOR
        (AST_EXPR_LIST
            (AST_ASSIGN
                (AST_VAR)
                (SCALAR)))
        (AST_EXPR_LIST
            (AST_BINARY_OP
                (AST_VAR)
                (AST_VAR)))
        (AST_EXPR_LIST
            (AST_POST_INC
                (AST_VAR)))
        (
            (AST_ASSIGN
                (AST_VAR)
                (AST_CONST))
            (AST_FOREACH
                (AST_VAR)
                (AST_VAR)
                (AST_VAR)
                (
                    (AST_IF
                        (AST_IF_ELEM
                            (AST_CALL
                                (
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_VAR)))
                            (
                                (AST_ASSIGN
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_VAR))
                                (AST_UNSET
                                    (AST_DIM
                                        (AST_VAR)
                                        (AST_VAR)))
                                (AST_ASSIGN
                                    (AST_VAR)
                                    (AST_CONST))
                                (AST_CONTINUE
                                    (NULL))))
                        (AST_IF_ELEM
                            (NULL)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_UNARY_OP
                                            (AST_CALL
                                                (
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (AST_VAR))
                                                    (AST_VAR))))
                                        (
                                            (AST_IF
                                                (AST_IF_ELEM
                                                    (AST_UNARY_OP
                                                        (AST_CALL
                                                            (
                                                                (AST_DIM
                                                                    (AST_VAR)
                                                                    (AST_VAR))
                                                                (AST_CALL
                                                                    (
                                                                        (AST_VAR))))))
                                                    (
                                                        (AST_UNSET
                                                            (AST_DIM
                                                                (AST_VAR)
                                                                (AST_VAR)))
                                                        (AST_ASSIGN
                                                            (AST_VAR)
                                                            (AST_CONST))
                                                        (AST_CONTINUE
                                                            (NULL))))
                                                (AST_IF_ELEM
                                                    (NULL)
                                                    (
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_BINARY_OP
                                                                    (AST_METHOD_CALL
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_BINARY_OP
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))))
                                                                        (AST_UNARY_OP
                                                                            (AST_METHOD_CALL
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))))))
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR))
                                                                    (AST_UNSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))
                                                            (AST_IF_ELEM
                                                                (NULL)
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_METHOD_CALL
                                                                            (AST_DIM
                                                                                (AST_VAR)
                                                                                (AST_VAR))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_ARRAY))
                                                                    (AST_FOREACH
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR)
                                                                        (NULL)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_CALL
                                                                                        (
                                                                                            (AST_VAR)
                                                                                            (AST_VAR)))
                                                                                    (
                                                                                        (AST_ASSIGN
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR))
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))))
                                                                                (AST_IF_ELEM
                                                                                    (NULL)
                                                                                    (
                                                                                        (AST_ASSIGN
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR))
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))))))))
                                                                    (AST_FOREACH
                                                                        (AST_VAR)
                                                                        (AST_VAR)
                                                                        (AST_VAR)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_DIM
                                                                                            (AST_VAR)
                                                                                            (AST_VAR)))
                                                                                    (
                                                                                        (AST_UNSET
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (AST_CONTINUE
                                                                                            (NULL)))))
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_VAR)
                                                                                    (AST_VAR))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (AST_VAR)
                                                                                        (AST_PROP
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (AST_PROP
                                                                                            (AST_DIM
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)))
                                                                                        (SCALAR)
                                                                                        (SCALAR))))))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_PROP
                                                                                (AST_VAR))
                                                                            (
                                                                                (AST_FOREACH
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_IF
                                                                                            (AST_IF_ELEM
                                                                                                (AST_CALL
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_UNSET
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (AST_VAR))))))))))
                                                                        (AST_IF_ELEM
                                                                            (NULL)
                                                                            (
                                                                                (AST_FOREACH
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_IF
                                                                                            (AST_IF_ELEM
                                                                                                (AST_CALL
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_ASSIGN
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (AST_VAR))
                                                                                                        (SCALAR))))))))))
                                                                    (AST_METHOD_CALL
                                                                        (AST_VAR)
                                                                        (
                                                                            (AST_VAR)))
                                                                    (AST_CALL
                                                                        (
                                                                            (AST_VAR)
                                                                            (AST_CONST)))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_BINARY_OP
                                                                                (AST_CALL
                                                                                    (
                                                                                        (AST_VAR)))
                                                                                (SCALAR))
                                                                            (
                                                                                (AST_ASSIGN
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR))
                                                                                    (AST_CONST))
                                                                                (AST_UNSET
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR)))
                                                                                (AST_ASSIGN
                                                                                    (AST_VAR)
                                                                                    (AST_CONST))
                                                                                (AST_CONTINUE
                                                                                    (NULL)))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_METHOD_CALL
                                                                            (AST_VAR)
                                                                            (
                                                                                (AST_VAR)
                                                                                (AST_VAR))))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (AST_VAR)
                                                                                (SCALAR)
                                                                                (SCALAR)
                                                                                (AST_PROP
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR)))
                                                                                (AST_PROP
                                                                                    (AST_DIM
                                                                                        (AST_VAR)
                                                                                        (AST_VAR))))))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_UNARY_OP
                                                                                (AST_CALL
                                                                                    (
                                                                                        (AST_VAR))))
                                                                            (
                                                                                (AST_ASSIGN
                                                                                    (AST_VAR)
                                                                                    (AST_CALL
                                                                                        (
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))
                                                                                            (AST_VAR)
                                                                                            (AST_PROP
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (AST_VAR)))))))))
                                                                    (AST_ASSIGN
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))
                                                                        (AST_VAR))
                                                                    (AST_UNSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR)))
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))))))))))))))
            (AST_IF
                (AST_IF_ELEM
                    (AST_UNARY_OP
                        (AST_VAR))
                    (
                        (AST_BREAK
                            (NULL)))))))
    (AST_RETURN
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_VAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_VAR)
                (SCALAR)))))