    private function addFormatListenerSection(ArrayNodeDefinition $rootNode)
    {
        $rootNode
            ->children()
                ->arrayNode('format_listener')
                    ->fixXmlConfig('default_priority', 'default_priorities')
                    ->addDefaultsIfNotSet()
                    ->canBeUnset()
                    ->children()
                        ->arrayNode('default_priorities')
                            ->defaultValue(array('html'))
                            ->prototype('scalar')->end()
                        ->end()
                        ->booleanNode('prefer_extension')->defaultTrue()->end()
                        ->scalarNode('fallback_format')->defaultValue('html')->end()
                    ->end()
                ->end()
            ->end();
    }

||||||||    private function addFormatListenerSection(ArrayNodeDefinition $rootNode)
    {
        $rootNode
            ->children()
                ->arrayNode('format_listener')
                    ->fixXmlConfig('rule', 'rules')
                    ->addDefaultsIfNotSet()
                    ->canBeUnset()
                    ->children()
                        ->arrayNode('rules')
                            ->cannotBeOverwritten()
                            ->prototype('array')
                                ->children()
                                    ->scalarNode('path')->defaultNull()->info('URL path info')->end()
                                    ->scalarNode('host')->defaultNull()->info('URL host name')->end()
                                    ->booleanNode('prefer_extension')->defaultTrue()->end()
                                    ->scalarNode('fallback_format')->defaultValue('html')->end()
                                    ->arrayNode('priorities')
                                        ->beforeNormalization()->ifString()->then(function($v) { return preg_split('/\s*,\s*/', $v); })->end()
                                        ->useAttributeAsKey('name')
                                        ->prototype('scalar')->end()
                                    ->end()
                                ->end()
                            ->end()
                        ->end()
                    ->end()
                ->end()
            ->end();
    }

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_VAR))
                                                                                (
                                                                                    (SCALAR)))
                                                                            (
                                                                                (SCALAR)
                                                                                (SCALAR))))))
                                                            (
                                                                (SCALAR)))
                                                        (
                                                            (AST_ARRAY
                                                                (AST_ARRAY_ELEM
                                                                    (SCALAR)
                                                                    (NULL)))))
                                                    (
                                                        (SCALAR)))))
                                        (
                                            (SCALAR)))))
                            (
                                (SCALAR)))
                        (
                            (SCALAR))))))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_METHOD_CALL
                                                                                                (AST_METHOD_CALL
                                                                                                    (AST_METHOD_CALL
                                                                                                        (AST_METHOD_CALL
                                                                                                            (AST_METHOD_CALL
                                                                                                                (AST_METHOD_CALL
                                                                                                                    (AST_METHOD_CALL
                                                                                                                        (AST_METHOD_CALL
                                                                                                                            (AST_METHOD_CALL
                                                                                                                                (AST_METHOD_CALL
                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                (AST_VAR))
                                                                                                                                                            (
                                                                                                                                                                (SCALAR)))
                                                                                                                                                        (
                                                                                                                                                            (SCALAR)
                                                                                                                                                            (SCALAR))))))
                                                                                                                                        (
                                                                                                                                            (SCALAR))))
                                                                                                                                (
                                                                                                                                    (SCALAR))))
                                                                                                                        (
                                                                                                                            (SCALAR))))
                                                                                                                (
                                                                                                                    (SCALAR))))
                                                                                                        (
                                                                                                            (SCALAR))))
                                                                                                (
                                                                                                    (SCALAR))))
                                                                                        (
                                                                                            (SCALAR)))))
                                                                            (
                                                                                (SCALAR)))
                                                                        (
                                                                            (SCALAR))))
                                                                (
                                                                    (SCALAR)))))
                                                    (
                                                        (AST_CLOSURE
                                                            (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                            (NULL)
                                                            (
                                                                (AST_RETURN
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR)
                                                                            (AST_VAR)))))))))
                                            (
                                                (SCALAR)))
                                        (
                                            (SCALAR))))))))))))