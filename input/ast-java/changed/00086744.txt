@SafeVarargs
public final <R extends AbstractBaseRecord> Iterable<R> scan(final RecordStore<R> store, final Predicate<? super R>... filters) {
    return new Iterable<R>() {

        @Override
        public Iterator<R> iterator() {
            return new PrefetchingIterator<R>() {

                final long highId = store.getHighId();

                int id = 0;

                @Override
                protected R fetchNextOrNull() {
                    scan: while (id <= highId && id >= 0) {
                        if (!continueScanning) {
                            return null;
                        }
                        R record = getRecord(store, id++);
                        for (Predicate<? super R> filter : filters) {
                            if (!filter.accept(record))
                                continue scan;
                        }
                        return record;
                    }
                    return null;
                }
            };
        }
    };
}||||||||@SafeVarargs
public final <R extends AbstractBaseRecord> Iterable<R> scan(final RecordStore<R> store, final Predicate<? super R>... filters) {
    return new Iterable<R>() {

        @Override
        public Iterator<R> iterator() {
            return new PrefetchingIterator<R>() {

                final PrimitiveLongIterator ids = new StoreIdIterator(store);

                @Override
                protected R fetchNextOrNull() {
                    scan: while (ids.hasNext() && continueScanning) {
                        R record = getRecord(store, ids.next());
                        for (Predicate<? super R> filter : filters) {
                            if (!filter.accept(record))
                                continue scan;
                        }
                        return record;
                    }
                    return null;
                }
            };
        }
    };
}||||||||(MethodDeclaration
	(BlockStmt
		(ReturnStmt
			(ObjectCreationExpr
				(MethodDeclaration
					(BlockStmt
						(ReturnStmt
							(ObjectCreationExpr
								(FieldDeclaration
									(VariableDeclarator
										(MethodCallExpr
											SimpleName
											NameExpr
												SimpleName
										)
										SimpleName
										(PrimitiveType
										)
									)
								)
								(FieldDeclaration
									(VariableDeclarator
										(IntegerLiteralExpr
										)
										SimpleName
										(PrimitiveType
										)
									)
								)
								(MethodDeclaration
									(BlockStmt
										(LabeledStmt
											SimpleName
											(WhileStmt
												(BlockStmt
													(IfStmt
														(UnaryExpr
															NameExpr
																SimpleName
														)
														(BlockStmt
															(ReturnStmt
																NullLiteralExpr
															)
														)
													)
													(ExpressionStmt
														(VariableDeclarationExpr
															(VariableDeclarator
																(MethodCallExpr
																	NameExpr
																		SimpleName
																	(UnaryExpr
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																)
																SimpleName
																(ClassOrInterfaceType
																	SimpleName
																)
															)
														)
													)
													(ForeachStmt
														(BlockStmt
															(IfStmt
																(UnaryExpr
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																(ContinueStmt
																	SimpleName
																)
															)
														)
														NameExpr
															SimpleName
														(VariableDeclarationExpr
															(VariableDeclarator
																SimpleName
																(ClassOrInterfaceType
																	SimpleName
																	(WildcardType
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
														)
													)
													(ReturnStmt
														NameExpr
															SimpleName
													)
												)
												(BinaryExpr
													(BinaryExpr
														NameExpr
															SimpleName
														NameExpr
															SimpleName
													)
													(BinaryExpr
														NameExpr
															SimpleName
														(IntegerLiteralExpr
														)
													)
												)
											)
										)
										(ReturnStmt
											NullLiteralExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
									SimpleName
									(MarkerAnnotationExpr
										Name
									)
								)
								(ClassOrInterfaceType
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
					)
					(ClassOrInterfaceType
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					SimpleName
					(MarkerAnnotationExpr
						Name
					)
				)
				(ClassOrInterfaceType
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(WildcardType
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(TypeParameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(MarkerAnnotationExpr
		Name
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ReturnStmt
			(ObjectCreationExpr
				(MethodDeclaration
					(BlockStmt
						(ReturnStmt
							(ObjectCreationExpr
								(FieldDeclaration
									(VariableDeclarator
										(ObjectCreationExpr
											NameExpr
												SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
										SimpleName
										(ClassOrInterfaceType
											SimpleName
										)
									)
								)
								(MethodDeclaration
									(BlockStmt
										(LabeledStmt
											SimpleName
											(WhileStmt
												(BlockStmt
													(ExpressionStmt
														(VariableDeclarationExpr
															(VariableDeclarator
																(MethodCallExpr
																	NameExpr
																		SimpleName
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	SimpleName
																)
																SimpleName
																(ClassOrInterfaceType
																	SimpleName
																)
															)
														)
													)
													(ForeachStmt
														(BlockStmt
															(IfStmt
																(UnaryExpr
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																(ContinueStmt
																	SimpleName
																)
															)
														)
														NameExpr
															SimpleName
														(VariableDeclarationExpr
															(VariableDeclarator
																SimpleName
																(ClassOrInterfaceType
																	SimpleName
																	(WildcardType
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																)
															)
														)
													)
													(ReturnStmt
														NameExpr
															SimpleName
													)
												)
												(BinaryExpr
													(MethodCallExpr
														SimpleName
														NameExpr
															SimpleName
													)
													NameExpr
														SimpleName
												)
											)
										)
										(ReturnStmt
											NullLiteralExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
									SimpleName
									(MarkerAnnotationExpr
										Name
									)
								)
								(ClassOrInterfaceType
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
					)
					(ClassOrInterfaceType
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
					SimpleName
					(MarkerAnnotationExpr
						Name
					)
				)
				(ClassOrInterfaceType
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(WildcardType
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(TypeParameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(MarkerAnnotationExpr
		Name
	)
)

