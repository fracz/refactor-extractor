private void changeMode(ResultSetMode resultSetMode) {
    int oldRowNum = this.curRowNum, oldColNum = this.curColNum;
    if (!curRows.isEmpty()) {
        // Fix row number if needed
        if (oldRowNum < 0) {
            oldRowNum = this.curRowNum = 0;
        } else if (oldRowNum >= curRows.size()) {
            oldRowNum = this.curRowNum = curRows.size() - 1;
        }
    }
    this.mode = resultSetMode;
    if (this.mode == ResultSetMode.GRID) {
        this.spreadsheet.setRowHeaderWidth(DEFAULT_ROW_HEADER_WIDTH);
        this.initResultSet();
    } else {
        this.resetRecordHeaderWidth();
        this.updateRecordMode();
    }
    this.curRowNum = oldRowNum;
    this.curColNum = oldColNum;
    if (mode == ResultSetMode.GRID) {
        if (this.curRowNum >= 0 && this.curRowNum < spreadsheet.getItemCount()) {
            spreadsheet.setCursor(new GridPos(this.curColNum, this.curRowNum), false);
        }
    } else {
        if (this.curColNum >= 0) {
            spreadsheet.setCursor(new GridPos(0, this.curColNum), false);
        }
    }
    spreadsheet.layout(true, true);
    previewValue();
}||||||||private void changeMode(ResultSetMode resultSetMode) {
    int oldRowNum = this.curRowNum, oldColNum = this.curColNum;
    int rowCount = model.getRowCount();
    if (rowCount > 0) {
        // Fix row number if needed
        if (oldRowNum < 0) {
            oldRowNum = this.curRowNum = 0;
        } else if (oldRowNum >= rowCount) {
            oldRowNum = this.curRowNum = rowCount - 1;
        }
    }
    this.mode = resultSetMode;
    if (this.mode == ResultSetMode.GRID) {
        this.spreadsheet.setRowHeaderWidth(DEFAULT_ROW_HEADER_WIDTH);
        this.initResultSet();
    } else {
        this.resetRecordHeaderWidth();
        this.updateRecordMode();
    }
    this.curRowNum = oldRowNum;
    this.curColNum = oldColNum;
    if (mode == ResultSetMode.GRID) {
        if (this.curRowNum >= 0 && this.curRowNum < spreadsheet.getItemCount()) {
            spreadsheet.setCursor(new GridPos(this.curColNum, this.curRowNum), false);
        }
    } else {
        if (this.curColNum >= 0) {
            spreadsheet.setCursor(new GridPos(0, this.curColNum), false);
        }
    }
    spreadsheet.layout(true, true);
    previewValue();
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(FieldAccessExpr
						SimpleName
						(ThisExpr
						)
					)
					SimpleName
					(PrimitiveType
					)
				)
				(VariableDeclarator
					(FieldAccessExpr
						SimpleName
						(ThisExpr
						)
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(IfStmt
			(UnaryExpr
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						NameExpr
							SimpleName
						(IntegerLiteralExpr
						)
					)
					(IfStmt
						(BinaryExpr
							NameExpr
								SimpleName
							(MethodCallExpr
								SimpleName
								NameExpr
									SimpleName
							)
						)
						(BlockStmt
							(ExpressionStmt
								(AssignExpr
									NameExpr
										SimpleName
									(AssignExpr
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										(BinaryExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											(IntegerLiteralExpr
											)
										)
									)
								)
							)
						)
					)
					(BlockStmt
						(ExpressionStmt
							(AssignExpr
								NameExpr
									SimpleName
								(AssignExpr
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
						)
					)
					LineComment
				)
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(IfStmt
			(BinaryExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						SimpleName
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(IfStmt
			(BinaryExpr
				NameExpr
					SimpleName
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						(IntegerLiteralExpr
						)
					)
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(ObjectCreationExpr
									(IntegerLiteralExpr
									)
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
								(BooleanLiteralExpr
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						(BinaryExpr
							(FieldAccessExpr
								SimpleName
								(ThisExpr
								)
							)
							(IntegerLiteralExpr
							)
						)
						(BinaryExpr
							(FieldAccessExpr
								SimpleName
								(ThisExpr
								)
							)
							(MethodCallExpr
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(ObjectCreationExpr
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
								(BooleanLiteralExpr
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BooleanLiteralExpr
				)
				(BooleanLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(FieldAccessExpr
						SimpleName
						(ThisExpr
						)
					)
					SimpleName
					(PrimitiveType
					)
				)
				(VariableDeclarator
					(FieldAccessExpr
						SimpleName
						(ThisExpr
						)
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(IfStmt
			(BinaryExpr
				NameExpr
					SimpleName
				(IntegerLiteralExpr
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						NameExpr
							SimpleName
						(IntegerLiteralExpr
						)
					)
					(IfStmt
						(BinaryExpr
							NameExpr
								SimpleName
							NameExpr
								SimpleName
						)
						(BlockStmt
							(ExpressionStmt
								(AssignExpr
									NameExpr
										SimpleName
									(AssignExpr
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										(BinaryExpr
											NameExpr
												SimpleName
											(IntegerLiteralExpr
											)
										)
									)
								)
							)
						)
					)
					(BlockStmt
						(ExpressionStmt
							(AssignExpr
								NameExpr
									SimpleName
								(AssignExpr
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
						)
					)
					LineComment
				)
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(IfStmt
			(BinaryExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						NameExpr
							SimpleName
						SimpleName
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(ThisExpr
						)
					)
				)
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(AssignExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NameExpr
					SimpleName
			)
		)
		(IfStmt
			(BinaryExpr
				NameExpr
					SimpleName
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						(IntegerLiteralExpr
						)
					)
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(ObjectCreationExpr
									(IntegerLiteralExpr
									)
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
								(BooleanLiteralExpr
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
				)
			)
			(BlockStmt
				(IfStmt
					(BinaryExpr
						(BinaryExpr
							(FieldAccessExpr
								SimpleName
								(ThisExpr
								)
							)
							(IntegerLiteralExpr
							)
						)
						(BinaryExpr
							(FieldAccessExpr
								SimpleName
								(ThisExpr
								)
							)
							(MethodCallExpr
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
					(BlockStmt
						(ExpressionStmt
							(MethodCallExpr
								(ObjectCreationExpr
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(FieldAccessExpr
										SimpleName
										(ThisExpr
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
								(BooleanLiteralExpr
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BooleanLiteralExpr
				)
				(BooleanLiteralExpr
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)

