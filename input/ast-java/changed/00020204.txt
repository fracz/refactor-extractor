private void registerNonUndoableAction(final DocumentReference r, final boolean isComplex) {
    myUndoManager.undoableActionPerformed(new NonUndoableAction() {

        public DocumentReference[] getAffectedDocuments() {
            return new DocumentReference[] { r };
        }

        public boolean isComplex() {
            return isComplex;
        }
    });
}||||||||private void registerNonUndoableAction(final DocumentReference r) {
    if (myUndoManager.undoableActionsForDocumentAreEmpty(r))
        return;
    myUndoManager.undoableActionPerformed(new NonUndoableAction() {

        public DocumentReference[] getAffectedDocuments() {
            return new DocumentReference[] { r };
        }

        public boolean isComplex() {
            return true;
        }
    });
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(MethodDeclaration
						(BlockStmt
							(ReturnStmt
								(ArrayCreationExpr
									(ClassOrInterfaceType
										SimpleName
									)
									(ArrayInitializerExpr
										NameExpr
											SimpleName
									)
									(ArrayCreationLevel
									)
								)
							)
						)
						(ArrayType
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
					)
					(MethodDeclaration
						(BlockStmt
							(ReturnStmt
								NameExpr
									SimpleName
							)
						)
						(PrimitiveType
						)
						SimpleName
					)
					(ClassOrInterfaceType
						SimpleName
					)
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(IfStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
			(ReturnStmt
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(MethodDeclaration
						(BlockStmt
							(ReturnStmt
								(ArrayCreationExpr
									(ClassOrInterfaceType
										SimpleName
									)
									(ArrayInitializerExpr
										NameExpr
											SimpleName
									)
									(ArrayCreationLevel
									)
								)
							)
						)
						(ArrayType
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
					)
					(MethodDeclaration
						(BlockStmt
							(ReturnStmt
								(BooleanLiteralExpr
								)
							)
						)
						(PrimitiveType
						)
						SimpleName
					)
					(ClassOrInterfaceType
						SimpleName
					)
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)

