/**
 * Start monitoring the source folder for changes.
 */
public synchronized void start() {
    saveInitialSnapshots();
    if (this.watchThread == null) {
        this.watchThread = new Thread() {

            @Override
            public void run() {
                int remainingScans = FileSystemWatcher.this.remainingScans.get();
                while (remainingScans > 0 || remainingScans == -1) {
                    try {
                        if (remainingScans > 0) {
                            FileSystemWatcher.this.remainingScans.decrementAndGet();
                        }
                        scan();
                    } catch (InterruptedException ex) {
                    // Ignore
                    }
                    remainingScans = FileSystemWatcher.this.remainingScans.get();
                }
            }
        };
        this.watchThread.setName("File Watcher");
        this.watchThread.setDaemon(this.daemon);
        this.remainingScans = new AtomicInteger(-1);
        this.watchThread.start();
    }
}||||||||/**
 * Start monitoring the source folder for changes.
 */
public void start() {
    synchronized (this.monitor) {
        saveInitialSnapshots();
        if (this.watchThread == null) {
            Map<File, FolderSnapshot> localFolders = new HashMap<File, FolderSnapshot>();
            localFolders.putAll(this.folders);
            this.watchThread = new Thread(new Watcher(this.remainingScans, new ArrayList<FileChangeListener>(this.listeners), this.triggerFilter, this.pollInterval, this.quietPeriod, localFolders));
            this.watchThread.setName("File Watcher");
            this.watchThread.setDaemon(this.daemon);
            this.watchThread.start();
        }
    }
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				SimpleName
			)
		)
		(IfStmt
			(BinaryExpr
				(FieldAccessExpr
					SimpleName
					(ThisExpr
					)
				)
				NullLiteralExpr
			)
			(BlockStmt
				(ExpressionStmt
					(AssignExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						(ObjectCreationExpr
							(MethodDeclaration
								(BlockStmt
									(ExpressionStmt
										(VariableDeclarationExpr
											(VariableDeclarator
												(MethodCallExpr
													SimpleName
													(FieldAccessExpr
														SimpleName
														(ThisExpr
															NameExpr
																SimpleName
														)
													)
												)
												SimpleName
												(PrimitiveType
												)
											)
										)
									)
									(WhileStmt
										(BlockStmt
											(TryStmt
												(CatchClause
													(BlockStmt
													)
													(Parameter
														SimpleName
														(ClassOrInterfaceType
															SimpleName
														)
													)
												)
												(BlockStmt
													(IfStmt
														(BinaryExpr
															NameExpr
																SimpleName
															(IntegerLiteralExpr
															)
														)
														(BlockStmt
															(ExpressionStmt
																(MethodCallExpr
																	SimpleName
																	(FieldAccessExpr
																		SimpleName
																		(ThisExpr
																			NameExpr
																				SimpleName
																		)
																	)
																)
															)
														)
													)
													(ExpressionStmt
														(MethodCallExpr
															SimpleName
														)
													)
												)
											)
											(ExpressionStmt
												(AssignExpr
													NameExpr
														SimpleName
													(MethodCallExpr
														SimpleName
														(FieldAccessExpr
															SimpleName
															(ThisExpr
																NameExpr
																	SimpleName
															)
														)
													)
												)
											)
										)
										(BinaryExpr
											(BinaryExpr
												NameExpr
													SimpleName
												(IntegerLiteralExpr
												)
											)
											(BinaryExpr
												NameExpr
													SimpleName
												(UnaryExpr
													(IntegerLiteralExpr
													)
												)
											)
										)
									)
								)
								(VoidType
								)
								SimpleName
								(MarkerAnnotationExpr
									Name
								)
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						StringLiteralExpr
						SimpleName
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						SimpleName
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
					)
				)
				(ExpressionStmt
					(AssignExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						(ObjectCreationExpr
							(UnaryExpr
								(IntegerLiteralExpr
								)
							)
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
					)
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(SynchronizedStmt
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
					)
				)
				(IfStmt
					(BinaryExpr
						(FieldAccessExpr
							SimpleName
							(ThisExpr
							)
						)
						NullLiteralExpr
					)
					(BlockStmt
						(ExpressionStmt
							(VariableDeclarationExpr
								(VariableDeclarator
									(ObjectCreationExpr
										(ClassOrInterfaceType
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
									SimpleName
									(ClassOrInterfaceType
										SimpleName
										(ClassOrInterfaceType
											SimpleName
										)
										(ClassOrInterfaceType
											SimpleName
										)
									)
								)
							)
						)
						(ExpressionStmt
							(MethodCallExpr
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
						(ExpressionStmt
							(AssignExpr
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
								(ObjectCreationExpr
									(ObjectCreationExpr
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										(ObjectCreationExpr
											(FieldAccessExpr
												SimpleName
												(ThisExpr
												)
											)
											(ClassOrInterfaceType
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										(FieldAccessExpr
											SimpleName
											(ThisExpr
											)
										)
										NameExpr
											SimpleName
										(ClassOrInterfaceType
											SimpleName
										)
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(ExpressionStmt
							(MethodCallExpr
								StringLiteralExpr
								SimpleName
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
							)
						)
						(ExpressionStmt
							(MethodCallExpr
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
								SimpleName
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
							)
						)
						(ExpressionStmt
							(MethodCallExpr
								SimpleName
								(FieldAccessExpr
									SimpleName
									(ThisExpr
									)
								)
							)
						)
					)
				)
			)
			(FieldAccessExpr
				SimpleName
				(ThisExpr
				)
			)
		)
	)
	(VoidType
	)
	SimpleName
	(JavadocComment
	)
)

