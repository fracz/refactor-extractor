/**
 * Extracts the ImageInfo stored in an ImageStreamTag. The returned object is the JSON
 * that would be returned by executing {@code docker inspect <image>}, except, due to a quirk
 * in OpenShift's handling of this data, fields except for {@code Config} and {@code ContainerConfig}
 * are null.
 * @param imageStreamTag
 * @return
 */
private ImageInfo getImageInfoFromTag(ImageStreamTag imageStreamTag) {
    // The DockerImageConfig string here is the JSON that would be returned by a docker inspect image,
    // except that the capitalization is inconsistent, breaking deserialization. Top level elements
    // are lowercased with underscores, while nested elements conform to FieldNamingPolicy.UPPER_CAMEL_CASE.
    // We're only converting the config fields for brevity; this means that other fields are null.
    String dockerImageConfig = imageStreamTag.getImage().getDockerImageConfig();
    ImageInfo info = GSON.fromJson(dockerImageConfig.replaceFirst("config", "Config").replaceFirst("container_config", "ContainerConfig"), ImageInfo.class);
    return info;
}||||||||/**
 * Extracts the ImageInfo stored in an ImageStreamTag. The returned object is the JSON
 * that would be returned by executing {@code docker inspect <image>}, except, due to a quirk
 * in OpenShift's handling of this data, fields except for {@code Config} and {@code ContainerConfig}
 * are null.
 * @param imageStreamTag
 * @return
 */
private ImageInfo getImageInfoFromTag(ImageStreamTag imageStreamTag) {
    // The DockerImageConfig string here is the JSON that would be returned by a docker inspect image,
    // except that the capitalization is inconsistent, breaking deserialization. Top level elements
    // are lowercased with underscores, while nested elements conform to FieldNamingPolicy.UPPER_CAMEL_CASE.
    // We're only converting the config fields for brevity; this means that other fields are null.
    Image tagImage = imageStreamTag.getImage();
    String dockerImageConfig = tagImage.getDockerImageConfig();
    if (!isNullOrEmpty(dockerImageConfig)) {
        LOG.info("imageStreamTag dockerImageConfig is not empty. Using it to get image info");
        ImageInfo info = GSON.fromJson(dockerImageConfig.replaceFirst("config", "Config").replaceFirst("container_config", "ContainerConfig"), ImageInfo.class);
        return info;
    } else {
        LOG.info("imageStreamTag dockerImageConfig empty. Using dockerImageMetadata to get image info");
        String dockerImageMetadata = GSON.toJson(tagImage.getAdditionalProperties().get("dockerImageMetadata"));
        ImageInfo info = GSON.fromJson(dockerImageMetadata, ImageInfo.class);
        return info;
    }
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						SimpleName
						(MethodCallExpr
							SimpleName
							NameExpr
								SimpleName
						)
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
			LineComment
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						(MethodCallExpr
							StringLiteralExpr
							StringLiteralExpr
							SimpleName
							(MethodCallExpr
								StringLiteralExpr
								StringLiteralExpr
								SimpleName
								NameExpr
									SimpleName
							)
						)
						(ClassExpr
							(ClassOrInterfaceType
								SimpleName
							)
						)
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ReturnStmt
			NameExpr
				SimpleName
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
			LineComment
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(IfStmt
			(UnaryExpr
				(MethodCallExpr
					NameExpr
						SimpleName
					SimpleName
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						StringLiteralExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(MethodCallExpr
								NameExpr
									SimpleName
								(ClassExpr
									(ClassOrInterfaceType
										SimpleName
									)
								)
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ReturnStmt
					NameExpr
						SimpleName
				)
			)
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						StringLiteralExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(MethodCallExpr
								(MethodCallExpr
									StringLiteralExpr
									StringLiteralExpr
									SimpleName
									(MethodCallExpr
										StringLiteralExpr
										StringLiteralExpr
										SimpleName
										NameExpr
											SimpleName
									)
								)
								(ClassExpr
									(ClassOrInterfaceType
										SimpleName
									)
								)
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ReturnStmt
					NameExpr
						SimpleName
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(JavadocComment
	)
)

