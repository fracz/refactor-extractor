private void applyDefaultHeader(final UnsafeBuffer buffer, final int frameOffset, final int frameLength, final MutableDirectBuffer defaultHeaderBuffer) {
    long firstLongWord;
    long secondLongWord;
    if (ByteOrder.nativeOrder() == LITTLE_ENDIAN) {
        firstLongWord = ((headerSecondWord & 0xFFFF_FFFFL) << 32) | ((-frameLength) & 0xFFFF_FFFFL);
        secondLongWord = ((sessionId & 0xFFFF_FFFFL) << 32) | (frameOffset & 0xFFFF_FFFFL);
    } else {
        firstLongWord = (((reverseBytes(-frameLength)) & 0xFFFF_FFFFL) << 32) | (headerSecondWord & 0xFFFF_FFFFL);
        secondLongWord = (((reverseBytes(frameOffset)) & 0xFFFF_FFFFL) << 32) | (sessionId & 0xFFFF_FFFFL);
    }
    buffer.putLongOrdered(frameOffset, firstLongWord);
    buffer.putLong(frameOffset + SIZE_OF_LONG, secondLongWord);
    buffer.putLong(frameOffset + (SIZE_OF_LONG * 2), defaultHeaderBuffer.getLong((SIZE_OF_LONG * 2)));
}||||||||private void applyDefaultHeader(final UnsafeBuffer buffer, final int frameOffset, final int frameLength, final MutableDirectBuffer defaultHeaderBuffer) {
    long lengthVersionFlagsType;
    long termOffsetAndSessionId;
    if (ByteOrder.nativeOrder() == LITTLE_ENDIAN) {
        lengthVersionFlagsType = ((defaultHeaderVersionFlagsType & 0xFFFF_FFFFL) << 32) | ((-frameLength) & 0xFFFF_FFFFL);
        termOffsetAndSessionId = ((defaultHeaderSessionId & 0xFFFF_FFFFL) << 32) | (frameOffset & 0xFFFF_FFFFL);
    } else {
        lengthVersionFlagsType = (((reverseBytes(-frameLength)) & 0xFFFF_FFFFL) << 32) | (defaultHeaderVersionFlagsType & 0xFFFF_FFFFL);
        termOffsetAndSessionId = (((reverseBytes(frameOffset)) & 0xFFFF_FFFFL) << 32) | (defaultHeaderSessionId & 0xFFFF_FFFFL);
    }
    buffer.putLongOrdered(frameOffset + HeaderFlyweight.FRAME_LENGTH_FIELD_OFFSET, lengthVersionFlagsType);
    buffer.putLong(frameOffset + DataHeaderFlyweight.TERM_OFFSET_FIELD_OFFSET, termOffsetAndSessionId);
    // read the stream(int) and term(int), this is the mutable part of the default header
    final long streamAndTermIds = defaultHeaderBuffer.getLong(DataHeaderFlyweight.STREAM_ID_FIELD_OFFSET);
    buffer.putLong(frameOffset + DataHeaderFlyweight.STREAM_ID_FIELD_OFFSET, streamAndTermIds);
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(IfStmt
			(BinaryExpr
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
			)
			(BlockStmt
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											(EnclosedExpr
												(MethodCallExpr
													(UnaryExpr
														NameExpr
															SimpleName
													)
													SimpleName
												)
											)
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											(EnclosedExpr
												(MethodCallExpr
													NameExpr
														SimpleName
													SimpleName
												)
											)
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											NameExpr
												SimpleName
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(UnaryExpr
											NameExpr
												SimpleName
										)
									)
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											NameExpr
												SimpleName
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BinaryExpr
					NameExpr
						SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BinaryExpr
					NameExpr
						SimpleName
					(EnclosedExpr
						(BinaryExpr
							NameExpr
								SimpleName
							(IntegerLiteralExpr
							)
						)
					)
				)
				(MethodCallExpr
					(EnclosedExpr
						(BinaryExpr
							NameExpr
								SimpleName
							(IntegerLiteralExpr
							)
						)
					)
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					SimpleName
					(PrimitiveType
					)
				)
			)
		)
		(IfStmt
			(BinaryExpr
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
			)
			(BlockStmt
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											(EnclosedExpr
												(MethodCallExpr
													(UnaryExpr
														NameExpr
															SimpleName
													)
													SimpleName
												)
											)
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											(EnclosedExpr
												(MethodCallExpr
													NameExpr
														SimpleName
													SimpleName
												)
											)
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											NameExpr
												SimpleName
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(UnaryExpr
											NameExpr
												SimpleName
										)
									)
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
				(ExpressionStmt
					(AssignExpr
						NameExpr
							SimpleName
						(BinaryExpr
							(EnclosedExpr
								(BinaryExpr
									(EnclosedExpr
										(BinaryExpr
											NameExpr
												SimpleName
											(LongLiteralExpr
											)
										)
									)
									(IntegerLiteralExpr
									)
								)
							)
							(EnclosedExpr
								(BinaryExpr
									NameExpr
										SimpleName
									(LongLiteralExpr
									)
								)
							)
						)
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BinaryExpr
					NameExpr
						SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				(BinaryExpr
					NameExpr
						SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						(FieldAccessExpr
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(PrimitiveType
					)
				)
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(BinaryExpr
					NameExpr
						SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
		)
	)
	(VoidType
	)
	SimpleName
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(PrimitiveType
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
)

