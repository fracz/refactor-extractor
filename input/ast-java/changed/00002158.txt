@Override
protected void startUp() throws Exception {
    // do NOT let Kafka's LogManager create its management threads, we will run them ourselves.
    // The problem is that we can't reliably decorate or subclass them, so we will peel the methods out and call
    // them ourselves. it sucks, but i haven't found a better way yet.
    // /* don't call */ logManager.startup();
    // flush dirty logs regularly
    scheduler.scheduleAtFixedRate(new DirtyLogFlusher(), TimeUnit.SECONDS.toMillis(30), logManager.flushCheckMs(), TimeUnit.MILLISECONDS);
    // write recovery checkpoint files
    scheduler.scheduleAtFixedRate(new RecoveryCheckpointFlusher(), TimeUnit.SECONDS.toMillis(30), logManager.flushCheckpointMs(), TimeUnit.MILLISECONDS);
    // custom log retention cleaner
    scheduler.scheduleAtFixedRate(new LogRetentionCleaner(), TimeUnit.SECONDS.toMillis(30), logManager.retentionCheckMs(), TimeUnit.MILLISECONDS);
    // regularly write the currently committed read offset to disk
    // TODO make configurable
    scheduler.scheduleAtFixedRate(offsetFlusher, 1, 1, TimeUnit.SECONDS);
}||||||||@Override
protected void startUp() throws Exception {
    // do NOT let Kafka's LogManager create its management threads, we will run them ourselves.
    // The problem is that we can't reliably decorate or subclass them, so we will peel the methods out and call
    // them ourselves. it sucks, but i haven't found a better way yet.
    // /* don't call */ logManager.startup();
    // flush dirty logs regularly
    scheduler.scheduleAtFixedRate(new DirtyLogFlusher(), TimeUnit.SECONDS.toMillis(30), logManager.flushCheckMs(), MILLISECONDS);
    // write recovery checkpoint files
    scheduler.scheduleAtFixedRate(new RecoveryCheckpointFlusher(), TimeUnit.SECONDS.toMillis(30), logManager.flushCheckpointMs(), MILLISECONDS);
    // custom log retention cleaner
    scheduler.scheduleAtFixedRate(new LogRetentionCleaner(), TimeUnit.SECONDS.toMillis(30), logManager.retentionCheckMs(), MILLISECONDS);
    // regularly write the currently committed read offset to disk
    // TODO make configurable
    scheduler.scheduleAtFixedRate(offsetFlusher, 1, 1, TimeUnit.SECONDS);
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				(IntegerLiteralExpr
				)
				(IntegerLiteralExpr
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
	)
	(VoidType
	)
	SimpleName
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				(ObjectCreationExpr
					(ClassOrInterfaceType
						SimpleName
					)
				)
				(MethodCallExpr
					(IntegerLiteralExpr
					)
					SimpleName
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
				(MethodCallExpr
					SimpleName
					NameExpr
						SimpleName
				)
				NameExpr
					SimpleName
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
		(ExpressionStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				(IntegerLiteralExpr
				)
				(IntegerLiteralExpr
				)
				(FieldAccessExpr
					SimpleName
					NameExpr
						SimpleName
				)
				SimpleName
				NameExpr
					SimpleName
			)
			LineComment
		)
	)
	(VoidType
	)
	SimpleName
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
)

