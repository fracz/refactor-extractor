/**
 * {@inheritDoc}
 */
@NotNull
public UpdateSession updateDirectories(@NotNull FilePath[] filePaths, UpdatedFiles updatedFiles, ProgressIndicator progressIndicator, @NotNull Ref<SequentialUpdatesContext> sequentialUpdatesContextRef) throws ProcessCanceledException {
    List<VcsException> exceptions = new ArrayList<VcsException>();
    ProjectManagerEx projectManager = ProjectManagerEx.getInstanceEx();
    projectManager.blockReloadingProjectOnExternalChanges();
    try {
        HashSet<VirtualFile> rootsToStash = new HashSet<VirtualFile>();
        List<LocalChangeList> listsCopy = null;
        ChangeListManagerEx changeManager = (ChangeListManagerEx) ChangeListManagerEx.getInstance(myProject);
        if (mySettings.UPDATE_STASH) {
            listsCopy = changeManager.getChangeListsCopy();
            for (LocalChangeList l : listsCopy) {
                final Collection<Change> changeCollection = l.getChanges();
                LOG.debug("Stashing " + changeCollection.size() + " changes from '" + l.getName() + "'");
                for (Change c : changeCollection) {
                    if (c.getAfterRevision() != null) {
                        VirtualFile r = GitUtil.getGitRootOrNull(c.getAfterRevision().getFile());
                        if (r != null) {
                            rootsToStash.add(r);
                        }
                    } else if (c.getBeforeRevision() != null) {
                        VirtualFile r = GitUtil.getGitRootOrNull(c.getBeforeRevision().getFile());
                        if (r != null) {
                            rootsToStash.add(r);
                        }
                    }
                }
            }
        }
        Set<VirtualFile> roots = GitUtil.gitRoots(Arrays.asList(filePaths));
        Set<VirtualFile> rebasingRoots = new TreeSet<VirtualFile>(GitUtil.VIRTUAL_FILE_COMPARATOR);
        for (final VirtualFile root : roots) {
            if (GitRebaseUtils.isRebaseInTheProgress(root)) {
                rebasingRoots.add(root);
            }
        }
        if (!rebasingRoots.isEmpty()) {
            final StringBuilder files = new StringBuilder();
            for (VirtualFile r : rebasingRoots) {
                files.append(GitBundle.message("update.root.rebasing.item", r.getPresentableUrl()));
                // noinspection ThrowableInstanceNeverThrown
                exceptions.add(new VcsException(GitBundle.message("update.root.rebasing", r.getPresentableUrl())));
            }
            UIUtil.invokeAndWaitIfNeeded(new Runnable() {

                public void run() {
                    Messages.showErrorDialog(myProject, GitBundle.message("update.root.rebasing.message", files.toString()), GitBundle.message("update.root.rebasing.title"));
                }
            });
            return new GitUpdateSession(exceptions);
        }
        String stashMessage = "Uncommitted changes before update operation at " + DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT, Locale.US).format(new Date());
        for (final VirtualFile root : roots) {
            try {
                // check if there is a remote for the branch
                final GitBranch branch = GitBranch.current(myProject, root);
                if (branch == null) {
                    continue;
                }
                final String value = branch.getTrackedRemoteName(myProject, root);
                if (value == null || value.length() == 0) {
                    continue;
                }
                final Ref<Boolean> cancelled = new Ref<Boolean>(false);
                final Ref<Throwable> ex = new Ref<Throwable>();
                try {
                    boolean stashCreated = rootsToStash.contains(root) && GitStashUtils.saveStash(myProject, root, stashMessage);
                    try {
                        // remember the current position
                        GitRevisionNumber before = GitRevisionNumber.resolve(myProject, root, "HEAD");
                        // do pull
                        GitLineHandler h = new GitLineHandler(myProject, root, GitHandler.PULL);
                        // ignore merge failure for the pull
                        h.ignoreErrorCode(1);
                        switch(mySettings.UPDATE_TYPE) {
                            case REBASE:
                                h.addParameters("--rebase");
                                break;
                            case MERGE:
                                h.addParameters("--no-rebase");
                                break;
                            case BRANCH_DEFAULT:
                                // use default for the branch
                                break;
                            default:
                                assert false : "Unknown update type: " + mySettings.UPDATE_TYPE;
                        }
                        h.addParameters("--no-stat");
                        h.addParameters("-v");
                        try {
                            RebaseConflictDetector rebaseConflictDetector = new RebaseConflictDetector();
                            h.addLineListener(rebaseConflictDetector);
                            try {
                                GitHandlerUtil.doSynchronouslyWithExceptions(h, progressIndicator);
                            } finally {
                                if (!rebaseConflictDetector.isRebaseConflict()) {
                                    exceptions.addAll(h.errors());
                                }
                            }
                            while (rebaseConflictDetector.isRebaseConflict() && !cancelled.get()) {
                                mergeFiles(root, cancelled, ex);
                                // noinspection ThrowableResultOfMethodCallIgnored
                                if (ex.get() != null) {
                                    // noinspection ThrowableResultOfMethodCallIgnored
                                    throw GitUtil.rethrowVcsException(ex.get());
                                }
                                checkLocallyModified(root, cancelled, ex);
                                // noinspection ThrowableResultOfMethodCallIgnored
                                if (ex.get() != null) {
                                    // noinspection ThrowableResultOfMethodCallIgnored
                                    throw GitUtil.rethrowVcsException(ex.get());
                                }
                                if (cancelled.get()) {
                                    break;
                                }
                                doRebase(progressIndicator, root, rebaseConflictDetector, "--continue");
                                final Ref<Integer> result = new Ref<Integer>();
                                noChangeLoop: while (rebaseConflictDetector.isNoChange()) {
                                    UIUtil.invokeAndWaitIfNeeded(new Runnable() {

                                        public void run() {
                                            int rc = Messages.showDialog(myProject, GitBundle.message("update.rebase.no.change", root.getPresentableUrl()), GitBundle.getString("update.rebase.no.change.title"), new String[] { GitBundle.getString("update.rebase.no.change.skip"), GitBundle.getString("update.rebase.no.change.retry"), GitBundle.getString("update.rebase.no.change.cancel") }, 0, Messages.getErrorIcon());
                                            result.set(rc);
                                        }
                                    });
                                    switch(result.get()) {
                                        case 0:
                                            doRebase(progressIndicator, root, rebaseConflictDetector, "--skip");
                                            continue noChangeLoop;
                                        case 1:
                                            continue noChangeLoop;
                                        case 2:
                                            cancelled.set(true);
                                            break noChangeLoop;
                                    }
                                }
                            }
                            if (cancelled.get()) {
                                // noinspection ThrowableInstanceNeverThrown
                                exceptions.add(new VcsException("The update process was cancelled for " + root.getPresentableUrl()));
                                doRebase(progressIndicator, root, rebaseConflictDetector, "--abort");
                            }
                        } finally {
                            if (!cancelled.get()) {
                                // find out what have changed
                                MergeChangeCollector collector = new MergeChangeCollector(myProject, root, before, updatedFiles);
                                collector.collect(exceptions);
                            }
                        }
                    } finally {
                        if (stashCreated) {
                            try {
                                GitStashUtils.popLastStash(myProject, root);
                                for (LocalChangeList changeList : listsCopy) {
                                    final Collection<Change> changes = changeList.getChanges();
                                    if (!changes.isEmpty()) {
                                        LOG.debug("After unstash: moving " + changes.size() + " changes to '" + changeList.getName() + "'");
                                        changeManager.moveChangesTo(changeList, changes.toArray(new Change[changes.size()]));
                                    }
                                }
                            } catch (final VcsException ue) {
                                exceptions.add(ue);
                                UIUtil.invokeAndWaitIfNeeded(new Runnable() {

                                    public void run() {
                                        GitUIUtil.showOperationError(myProject, ue, "Auto-unstash");
                                    }
                                });
                            }
                        }
                    }
                } finally {
                    mergeFiles(root, cancelled, ex);
                    // noinspection ThrowableResultOfMethodCallIgnored
                    if (ex.get() != null) {
                        // noinspection ThrowableResultOfMethodCallIgnored
                        exceptions.add(GitUtil.rethrowVcsException(ex.get()));
                    }
                }
            } catch (VcsException ex) {
                exceptions.add(ex);
            }
        }
    } finally {
        projectManager.unblockReloadingProjectOnExternalChanges();
    }
    return new GitUpdateSession(exceptions);
}||||||||/**
 * {@inheritDoc}
 */
@NotNull
public UpdateSession updateDirectories(@NotNull FilePath[] filePaths, UpdatedFiles updatedFiles, ProgressIndicator progressIndicator, @NotNull Ref<SequentialUpdatesContext> sequentialUpdatesContextRef) throws ProcessCanceledException {
    Set<VirtualFile> roots = GitUtil.gitRoots(Arrays.asList(filePaths));
    List<VcsException> exceptions = new ArrayList<VcsException>();
    new GitUpdateProcess(myProject, mySettings, myVcs, updatedFiles, exceptions).doUpdate(progressIndicator, roots);
    return new GitUpdateSession(exceptions);
}||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(ObjectCreationExpr
						(ClassOrInterfaceType
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				SimpleName
				NameExpr
					SimpleName
			)
		)
		(TryStmt
			(BlockStmt
				(ExpressionStmt
					(MethodCallExpr
						SimpleName
						NameExpr
							SimpleName
					)
				)
			)
			(BlockStmt
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(ObjectCreationExpr
								(ClassOrInterfaceType
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							NullLiteralExpr
							SimpleName
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(CastExpr
								(MethodCallExpr
									NameExpr
										SimpleName
									SimpleName
									NameExpr
										SimpleName
								)
								(ClassOrInterfaceType
									SimpleName
								)
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(IfStmt
					(FieldAccessExpr
						SimpleName
						NameExpr
							SimpleName
					)
					(BlockStmt
						(ExpressionStmt
							(AssignExpr
								NameExpr
									SimpleName
								(MethodCallExpr
									SimpleName
									NameExpr
										SimpleName
								)
							)
						)
						(ForeachStmt
							(BlockStmt
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
									)
								)
								(ExpressionStmt
									(MethodCallExpr
										(BinaryExpr
											(BinaryExpr
												(BinaryExpr
													(BinaryExpr
														StringLiteralExpr
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
													)
													StringLiteralExpr
												)
												(MethodCallExpr
													SimpleName
													NameExpr
														SimpleName
												)
											)
											StringLiteralExpr
										)
										SimpleName
										NameExpr
											SimpleName
									)
								)
								(ForeachStmt
									(BlockStmt
										(IfStmt
											(BinaryExpr
												(MethodCallExpr
													SimpleName
													NameExpr
														SimpleName
												)
												NullLiteralExpr
											)
											(IfStmt
												(BinaryExpr
													(MethodCallExpr
														SimpleName
														NameExpr
															SimpleName
													)
													NullLiteralExpr
												)
												(BlockStmt
													(ExpressionStmt
														(VariableDeclarationExpr
															(VariableDeclarator
																(MethodCallExpr
																	(MethodCallExpr
																		SimpleName
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	SimpleName
																	NameExpr
																		SimpleName
																)
																SimpleName
																(ClassOrInterfaceType
																	SimpleName
																)
															)
														)
													)
													(IfStmt
														(BinaryExpr
															NameExpr
																SimpleName
															NullLiteralExpr
														)
														(BlockStmt
															(ExpressionStmt
																(MethodCallExpr
																	NameExpr
																		SimpleName
																	SimpleName
																	NameExpr
																		SimpleName
																)
															)
														)
													)
												)
											)
											(BlockStmt
												(ExpressionStmt
													(VariableDeclarationExpr
														(VariableDeclarator
															(MethodCallExpr
																(MethodCallExpr
																	SimpleName
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																SimpleName
																NameExpr
																	SimpleName
															)
															SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
													)
												)
												(IfStmt
													(BinaryExpr
														NameExpr
															SimpleName
														NullLiteralExpr
													)
													(BlockStmt
														(ExpressionStmt
															(MethodCallExpr
																NameExpr
																	SimpleName
																SimpleName
																NameExpr
																	SimpleName
															)
														)
													)
												)
											)
										)
									)
									NameExpr
										SimpleName
									(VariableDeclarationExpr
										(VariableDeclarator
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
							)
							NameExpr
								SimpleName
							(VariableDeclarationExpr
								(VariableDeclarator
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(MethodCallExpr
								(MethodCallExpr
									NameExpr
										SimpleName
									SimpleName
									NameExpr
										SimpleName
								)
								SimpleName
								NameExpr
									SimpleName
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(ObjectCreationExpr
								(FieldAccessExpr
									SimpleName
									NameExpr
										SimpleName
								)
								(ClassOrInterfaceType
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
				)
				(ForeachStmt
					(BlockStmt
						(IfStmt
							(MethodCallExpr
								NameExpr
									SimpleName
								SimpleName
								NameExpr
									SimpleName
							)
							(BlockStmt
								(ExpressionStmt
									(MethodCallExpr
										NameExpr
											SimpleName
										SimpleName
										NameExpr
											SimpleName
									)
								)
							)
						)
					)
					NameExpr
						SimpleName
					(VariableDeclarationExpr
						(VariableDeclarator
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(IfStmt
					(UnaryExpr
						(MethodCallExpr
							SimpleName
							NameExpr
								SimpleName
						)
					)
					(BlockStmt
						(ExpressionStmt
							(VariableDeclarationExpr
								(VariableDeclarator
									(ObjectCreationExpr
										(ClassOrInterfaceType
											SimpleName
										)
									)
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(ForeachStmt
							(BlockStmt
								(ExpressionStmt
									(MethodCallExpr
										(MethodCallExpr
											StringLiteralExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											NameExpr
												SimpleName
										)
										SimpleName
										NameExpr
											SimpleName
									)
								)
								(ExpressionStmt
									(MethodCallExpr
										(ObjectCreationExpr
											(MethodCallExpr
												StringLiteralExpr
												(MethodCallExpr
													SimpleName
													NameExpr
														SimpleName
												)
												SimpleName
												NameExpr
													SimpleName
											)
											(ClassOrInterfaceType
												SimpleName
											)
										)
										SimpleName
										NameExpr
											SimpleName
									)
									LineComment
								)
							)
							NameExpr
								SimpleName
							(VariableDeclarationExpr
								(VariableDeclarator
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
						)
						(ExpressionStmt
							(MethodCallExpr
								(ObjectCreationExpr
									(MethodDeclaration
										(BlockStmt
											(ExpressionStmt
												(MethodCallExpr
													NameExpr
														SimpleName
													(MethodCallExpr
														StringLiteralExpr
														(MethodCallExpr
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													(MethodCallExpr
														StringLiteralExpr
														SimpleName
														NameExpr
															SimpleName
													)
													SimpleName
													NameExpr
														SimpleName
												)
											)
										)
										(VoidType
										)
										SimpleName
									)
									(ClassOrInterfaceType
										SimpleName
									)
								)
								SimpleName
								NameExpr
									SimpleName
							)
						)
						(ReturnStmt
							(ObjectCreationExpr
								NameExpr
									SimpleName
								(ClassOrInterfaceType
									SimpleName
								)
							)
						)
					)
				)
				(ExpressionStmt
					(VariableDeclarationExpr
						(VariableDeclarator
							(BinaryExpr
								StringLiteralExpr
								(MethodCallExpr
									(ObjectCreationExpr
										(ClassOrInterfaceType
											SimpleName
										)
									)
									SimpleName
									(MethodCallExpr
										(FieldAccessExpr
											SimpleName
											NameExpr
												SimpleName
										)
										(FieldAccessExpr
											SimpleName
											NameExpr
												SimpleName
										)
										(FieldAccessExpr
											SimpleName
											NameExpr
												SimpleName
										)
										SimpleName
										NameExpr
											SimpleName
									)
								)
							)
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
				(ForeachStmt
					(BlockStmt
						(TryStmt
							(CatchClause
								(BlockStmt
									(ExpressionStmt
										(MethodCallExpr
											NameExpr
												SimpleName
											SimpleName
											NameExpr
												SimpleName
										)
									)
								)
								(Parameter
									SimpleName
									(ClassOrInterfaceType
										SimpleName
									)
								)
							)
							(BlockStmt
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(MethodCallExpr
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
									LineComment
								)
								(IfStmt
									(BinaryExpr
										NameExpr
											SimpleName
										NullLiteralExpr
									)
									(BlockStmt
										(ContinueStmt
										)
									)
								)
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(MethodCallExpr
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												SimpleName
												NameExpr
													SimpleName
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
											)
										)
									)
								)
								(IfStmt
									(BinaryExpr
										(BinaryExpr
											NameExpr
												SimpleName
											NullLiteralExpr
										)
										(BinaryExpr
											(MethodCallExpr
												SimpleName
												NameExpr
													SimpleName
											)
											(IntegerLiteralExpr
											)
										)
									)
									(BlockStmt
										(ContinueStmt
										)
									)
								)
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(ObjectCreationExpr
												(BooleanLiteralExpr
												)
												(ClassOrInterfaceType
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
									)
								)
								(ExpressionStmt
									(VariableDeclarationExpr
										(VariableDeclarator
											(ObjectCreationExpr
												(ClassOrInterfaceType
													SimpleName
													(ClassOrInterfaceType
														SimpleName
													)
												)
											)
											SimpleName
											(ClassOrInterfaceType
												SimpleName
												(ClassOrInterfaceType
													SimpleName
												)
											)
										)
									)
								)
								(TryStmt
									(BlockStmt
										(ExpressionStmt
											(MethodCallExpr
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												NameExpr
													SimpleName
												SimpleName
											)
										)
										(IfStmt
											(BinaryExpr
												(MethodCallExpr
													SimpleName
													NameExpr
														SimpleName
												)
												NullLiteralExpr
											)
											(BlockStmt
												(ExpressionStmt
													(MethodCallExpr
														(MethodCallExpr
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															SimpleName
															NameExpr
																SimpleName
														)
														SimpleName
														NameExpr
															SimpleName
													)
													LineComment
												)
											)
											LineComment
										)
									)
									(BlockStmt
										(ExpressionStmt
											(VariableDeclarationExpr
												(VariableDeclarator
													(BinaryExpr
														(MethodCallExpr
															NameExpr
																SimpleName
															SimpleName
															NameExpr
																SimpleName
														)
														(MethodCallExpr
															NameExpr
																SimpleName
															NameExpr
																SimpleName
															NameExpr
																SimpleName
															SimpleName
															NameExpr
																SimpleName
														)
													)
													SimpleName
													(PrimitiveType
													)
												)
											)
										)
										(TryStmt
											(BlockStmt
												(IfStmt
													NameExpr
														SimpleName
													(BlockStmt
														(TryStmt
															(CatchClause
																(BlockStmt
																	(ExpressionStmt
																		(MethodCallExpr
																			NameExpr
																				SimpleName
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(ExpressionStmt
																		(MethodCallExpr
																			(ObjectCreationExpr
																				(MethodDeclaration
																					(BlockStmt
																						(ExpressionStmt
																							(MethodCallExpr
																								NameExpr
																									SimpleName
																								NameExpr
																									SimpleName
																								StringLiteralExpr
																								SimpleName
																								NameExpr
																									SimpleName
																							)
																						)
																					)
																					(VoidType
																					)
																					SimpleName
																				)
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																)
																(Parameter
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
															)
															(BlockStmt
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
																(ForeachStmt
																	(BlockStmt
																		(ExpressionStmt
																			(VariableDeclarationExpr
																				(VariableDeclarator
																					(MethodCallExpr
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																					SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																						(ClassOrInterfaceType
																							SimpleName
																						)
																					)
																				)
																			)
																		)
																		(IfStmt
																			(UnaryExpr
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(BlockStmt
																				(ExpressionStmt
																					(MethodCallExpr
																						(BinaryExpr
																							(BinaryExpr
																								(BinaryExpr
																									(BinaryExpr
																										StringLiteralExpr
																										(MethodCallExpr
																											SimpleName
																											NameExpr
																												SimpleName
																										)
																									)
																									StringLiteralExpr
																								)
																								(MethodCallExpr
																									SimpleName
																									NameExpr
																										SimpleName
																								)
																							)
																							StringLiteralExpr
																						)
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																				(ExpressionStmt
																					(MethodCallExpr
																						NameExpr
																							SimpleName
																						(MethodCallExpr
																							(ArrayCreationExpr
																								(ClassOrInterfaceType
																									SimpleName
																								)
																								(ArrayCreationLevel
																									(MethodCallExpr
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																							)
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																						SimpleName
																						NameExpr
																							SimpleName
																					)
																				)
																			)
																		)
																	)
																	NameExpr
																		SimpleName
																	(VariableDeclarationExpr
																		(VariableDeclarator
																			SimpleName
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																	)
																)
															)
														)
													)
												)
											)
											(BlockStmt
												(ExpressionStmt
													(VariableDeclarationExpr
														(VariableDeclarator
															(MethodCallExpr
																NameExpr
																	SimpleName
																NameExpr
																	SimpleName
																StringLiteralExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
													)
													LineComment
												)
												(ExpressionStmt
													(VariableDeclarationExpr
														(VariableDeclarator
															(ObjectCreationExpr
																NameExpr
																	SimpleName
																NameExpr
																	SimpleName
																(FieldAccessExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
																(ClassOrInterfaceType
																	SimpleName
																)
															)
															SimpleName
															(ClassOrInterfaceType
																SimpleName
															)
														)
													)
													LineComment
												)
												(ExpressionStmt
													(MethodCallExpr
														(IntegerLiteralExpr
														)
														SimpleName
														NameExpr
															SimpleName
													)
													LineComment
												)
												(SwitchStmt
													(SwitchEntryStmt
														NameExpr
															SimpleName
														(ExpressionStmt
															(MethodCallExpr
																StringLiteralExpr
																SimpleName
																NameExpr
																	SimpleName
															)
														)
														(BreakStmt
														)
													)
													(SwitchEntryStmt
														NameExpr
															SimpleName
														(ExpressionStmt
															(MethodCallExpr
																StringLiteralExpr
																SimpleName
																NameExpr
																	SimpleName
															)
														)
														(BreakStmt
														)
													)
													(SwitchEntryStmt
														NameExpr
															SimpleName
														(BreakStmt
															LineComment
														)
													)
													(SwitchEntryStmt
														(AssertStmt
															(BooleanLiteralExpr
															)
															(BinaryExpr
																StringLiteralExpr
																(FieldAccessExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
															)
														)
													)
													(FieldAccessExpr
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ExpressionStmt
													(MethodCallExpr
														StringLiteralExpr
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(ExpressionStmt
													(MethodCallExpr
														StringLiteralExpr
														SimpleName
														NameExpr
															SimpleName
													)
												)
												(TryStmt
													(BlockStmt
														(IfStmt
															(UnaryExpr
																(MethodCallExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
															)
															(BlockStmt
																(ExpressionStmt
																	(VariableDeclarationExpr
																		(VariableDeclarator
																			(ObjectCreationExpr
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				NameExpr
																					SimpleName
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																			SimpleName
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																	)
																	LineComment
																)
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
															)
														)
													)
													(BlockStmt
														(ExpressionStmt
															(VariableDeclarationExpr
																(VariableDeclarator
																	(ObjectCreationExpr
																		(ClassOrInterfaceType
																			SimpleName
																		)
																	)
																	SimpleName
																	(ClassOrInterfaceType
																		SimpleName
																	)
																)
															)
														)
														(ExpressionStmt
															(MethodCallExpr
																NameExpr
																	SimpleName
																SimpleName
																NameExpr
																	SimpleName
															)
														)
														(TryStmt
															(BlockStmt
																(IfStmt
																	(UnaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																	(BlockStmt
																		(ExpressionStmt
																			(MethodCallExpr
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																		)
																	)
																)
															)
															(BlockStmt
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
															)
														)
														(WhileStmt
															(BlockStmt
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		SimpleName
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		NullLiteralExpr
																	)
																	(BlockStmt
																		(ThrowStmt
																			(MethodCallExpr
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			LineComment
																		)
																	)
																	LineComment
																)
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		SimpleName
																	)
																)
																(IfStmt
																	(BinaryExpr
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																		NullLiteralExpr
																	)
																	(BlockStmt
																		(ThrowStmt
																			(MethodCallExpr
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																				SimpleName
																				NameExpr
																					SimpleName
																			)
																			LineComment
																		)
																	)
																	LineComment
																)
																(IfStmt
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	(BlockStmt
																		(BreakStmt
																		)
																	)
																)
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		StringLiteralExpr
																		SimpleName
																	)
																)
																(ExpressionStmt
																	(VariableDeclarationExpr
																		(VariableDeclarator
																			(ObjectCreationExpr
																				(ClassOrInterfaceType
																					SimpleName
																					(ClassOrInterfaceType
																						SimpleName
																					)
																				)
																			)
																			SimpleName
																			(ClassOrInterfaceType
																				SimpleName
																				(ClassOrInterfaceType
																					SimpleName
																				)
																			)
																		)
																	)
																)
																(LabeledStmt
																	SimpleName
																	(WhileStmt
																		(BlockStmt
																			(ExpressionStmt
																				(MethodCallExpr
																					(ObjectCreationExpr
																						(MethodDeclaration
																							(BlockStmt
																								(ExpressionStmt
																									(VariableDeclarationExpr
																										(VariableDeclarator
																											(MethodCallExpr
																												NameExpr
																													SimpleName
																												(MethodCallExpr
																													StringLiteralExpr
																													(MethodCallExpr
																														SimpleName
																														NameExpr
																															SimpleName
																													)
																													SimpleName
																													NameExpr
																														SimpleName
																												)
																												(MethodCallExpr
																													StringLiteralExpr
																													SimpleName
																													NameExpr
																														SimpleName
																												)
																												(ArrayCreationExpr
																													(ClassOrInterfaceType
																														SimpleName
																													)
																													(ArrayInitializerExpr
																														(MethodCallExpr
																															StringLiteralExpr
																															SimpleName
																															NameExpr
																																SimpleName
																														)
																														(MethodCallExpr
																															StringLiteralExpr
																															SimpleName
																															NameExpr
																																SimpleName
																														)
																														(MethodCallExpr
																															StringLiteralExpr
																															SimpleName
																															NameExpr
																																SimpleName
																														)
																													)
																													(ArrayCreationLevel
																													)
																												)
																												(IntegerLiteralExpr
																												)
																												(MethodCallExpr
																													SimpleName
																													NameExpr
																														SimpleName
																												)
																												SimpleName
																												NameExpr
																													SimpleName
																											)
																											SimpleName
																											(PrimitiveType
																											)
																										)
																									)
																								)
																								(ExpressionStmt
																									(MethodCallExpr
																										NameExpr
																											SimpleName
																										SimpleName
																										NameExpr
																											SimpleName
																									)
																								)
																							)
																							(VoidType
																							)
																							SimpleName
																						)
																						(ClassOrInterfaceType
																							SimpleName
																						)
																					)
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(SwitchStmt
																				(SwitchEntryStmt
																					(IntegerLiteralExpr
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							NameExpr
																								SimpleName
																							NameExpr
																								SimpleName
																							NameExpr
																								SimpleName
																							StringLiteralExpr
																							SimpleName
																						)
																					)
																					(ContinueStmt
																						SimpleName
																					)
																				)
																				(SwitchEntryStmt
																					(IntegerLiteralExpr
																					)
																					(ContinueStmt
																						SimpleName
																					)
																				)
																				(SwitchEntryStmt
																					(IntegerLiteralExpr
																					)
																					(ExpressionStmt
																						(MethodCallExpr
																							(BooleanLiteralExpr
																							)
																							SimpleName
																							NameExpr
																								SimpleName
																						)
																					)
																					(BreakStmt
																						SimpleName
																					)
																				)
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																		)
																		(MethodCallExpr
																			SimpleName
																			NameExpr
																				SimpleName
																		)
																	)
																)
															)
															(BinaryExpr
																(MethodCallExpr
																	SimpleName
																	NameExpr
																		SimpleName
																)
																(UnaryExpr
																	(MethodCallExpr
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																)
															)
														)
														(IfStmt
															(MethodCallExpr
																SimpleName
																NameExpr
																	SimpleName
															)
															(BlockStmt
																(ExpressionStmt
																	(MethodCallExpr
																		(ObjectCreationExpr
																			(BinaryExpr
																				StringLiteralExpr
																				(MethodCallExpr
																					SimpleName
																					NameExpr
																						SimpleName
																				)
																			)
																			(ClassOrInterfaceType
																				SimpleName
																			)
																		)
																		SimpleName
																		NameExpr
																			SimpleName
																	)
																	LineComment
																)
																(ExpressionStmt
																	(MethodCallExpr
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		NameExpr
																			SimpleName
																		StringLiteralExpr
																		SimpleName
																	)
																)
															)
														)
													)
												)
											)
										)
									)
								)
							)
						)
					)
					NameExpr
						SimpleName
					(VariableDeclarationExpr
						(VariableDeclarator
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
				)
			)
		)
		(ReturnStmt
			(ObjectCreationExpr
				NameExpr
					SimpleName
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ArrayType
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)
||||||||(MethodDeclaration
	(BlockStmt
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(MethodCallExpr
						(MethodCallExpr
							NameExpr
								SimpleName
							SimpleName
							NameExpr
								SimpleName
						)
						SimpleName
						NameExpr
							SimpleName
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
			)
		)
		(ExpressionStmt
			(VariableDeclarationExpr
				(VariableDeclarator
					(ObjectCreationExpr
						(ClassOrInterfaceType
							SimpleName
							(ClassOrInterfaceType
								SimpleName
							)
						)
					)
					SimpleName
					(ClassOrInterfaceType
						SimpleName
						(ClassOrInterfaceType
							SimpleName
						)
					)
				)
			)
		)
		(ExpressionStmt
			(MethodCallExpr
				NameExpr
					SimpleName
				NameExpr
					SimpleName
				SimpleName
				(ObjectCreationExpr
					NameExpr
						SimpleName
					NameExpr
						SimpleName
					NameExpr
						SimpleName
					NameExpr
						SimpleName
					NameExpr
						SimpleName
					(ClassOrInterfaceType
						SimpleName
					)
				)
			)
		)
		(ReturnStmt
			(ObjectCreationExpr
				NameExpr
					SimpleName
				(ClassOrInterfaceType
					SimpleName
				)
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	SimpleName
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ArrayType
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		SimpleName
		(ClassOrInterfaceType
			SimpleName
		)
	)
	(Parameter
		(MarkerAnnotationExpr
			Name
		)
		SimpleName
		(ClassOrInterfaceType
			SimpleName
			(ClassOrInterfaceType
				SimpleName
			)
		)
	)
	(ClassOrInterfaceType
		SimpleName
	)
	(MarkerAnnotationExpr
		Name
	)
	(JavadocComment
	)
)

