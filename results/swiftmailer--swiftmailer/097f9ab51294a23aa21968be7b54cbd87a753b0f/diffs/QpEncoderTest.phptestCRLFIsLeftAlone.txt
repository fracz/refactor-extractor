  public function testCRLFIsLeftAlone()
  {
    /*
    (4)   (Line Breaks) A line break in a text body, represented
          as a CRLF sequence in the text canonical form, must be
          represented by a (RFC 822) line break, which is also a
          CRLF sequence, in the Quoted-Printable encoding.  Since
          the canonical representation of media types other than
          text do not generally include the representation of
          line breaks as CRLF sequences, no hard line breaks
          (i.e. line breaks that are intended to be meaningful
          and to be displayed to the user) can occur in the
          quoted-printable encoding of such types.  Sequences
          like "=0D", "=0A", "=0A=0D" and "=0D=0A" will routinely
          appear in non-text data represented in quoted-
          printable, of course.

          Note that many implementations may elect to encode the
          local representation of various content types directly
          rather than converting to canonical form first,
          encoding, and then converting back to local
          representation.  In particular, this may apply to plain
          text material on systems that use newline conventions
          other than a CRLF terminator sequence.  Such an
          implementation optimization is permissible, but only
          when the combined canonicalization-encoding step is
          equivalent to performing the three steps separately.
          */

    $string = 'a' . "\r\n" . 'b' . "\r\n" . 'c' . "\r\n";

    $seq = $this->_mockery()->sequence('byte-sequence');
    $charStream = $this->_createCharStream();
    $this->_mockery()->checking(Expectations::create()
      -> one($charStream)->flushContents()
      -> one($charStream)->importString($string)
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('a')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('b')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('c')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(false)
      );

    $encoder = new Swift_Encoder_QpEncoder($charStream);
    $this->assertEqual($string, $encoder->encodeString($string));
  }

||||||||  public function testCRLFIsLeftAlone()
  {
    /*
    (4)   (Line Breaks) A line break in a text body, represented
          as a CRLF sequence in the text canonical form, must be
          represented by a (RFC 822) line break, which is also a
          CRLF sequence, in the Quoted-Printable encoding.  Since
          the canonical representation of media types other than
          text do not generally include the representation of
          line breaks as CRLF sequences, no hard line breaks
          (i.e. line breaks that are intended to be meaningful
          and to be displayed to the user) can occur in the
          quoted-printable encoding of such types.  Sequences
          like "=0D", "=0A", "=0A=0D" and "=0D=0A" will routinely
          appear in non-text data represented in quoted-
          printable, of course.

          Note that many implementations may elect to encode the
          local representation of various content types directly
          rather than converting to canonical form first,
          encoding, and then converting back to local
          representation.  In particular, this may apply to plain
          text material on systems that use newline conventions
          other than a CRLF terminator sequence.  Such an
          implementation optimization is permissible, but only
          when the combined canonicalization-encoding step is
          equivalent to performing the three steps separately.
          */

    $string = 'a' . "\r\n" . 'b' . "\r\n" . 'c' . "\r\n";

    $seq = $this->_mockery()->sequence('byte-sequence');
    $charStream = $this->_createCharStream();
    $this->_checking(Expectations::create()
      -> one($charStream)->flushContents()
      -> one($charStream)->importString($string)
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('a')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('b')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(ord('c')))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0D))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(array(0x0A))
      -> one($charStream)->readBytes(optional()) -> inSequence($seq) -> returns(false)
      );

    $encoder = new Swift_Encoder_QpEncoder($charStream);
    $this->assertEqual($string, $encoder->encodeString($string));
  }

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_BINARY_OP
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (SCALAR))
                        (SCALAR))
                    (SCALAR))
                (SCALAR))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_VAR))
            (
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_VAR))
        (
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_METHOD_CALL
                                                                                                (AST_METHOD_CALL
                                                                                                    (AST_METHOD_CALL
                                                                                                        (AST_METHOD_CALL
                                                                                                            (AST_METHOD_CALL
                                                                                                                (AST_METHOD_CALL
                                                                                                                    (AST_METHOD_CALL
                                                                                                                        (AST_METHOD_CALL
                                                                                                                            (AST_METHOD_CALL
                                                                                                                                (AST_METHOD_CALL
                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                            (AST_STATIC_CALL)
                                                                                                                                                                                            (
                                                                                                                                                                                                (AST_VAR))))
                                                                                                                                                                                    (
                                                                                                                                                                                        (AST_VAR)))
                                                                                                                                                                                (
                                                                                                                                                                                    (AST_VAR)))
                                                                                                                                                                            (
                                                                                                                                                                                (AST_VAR)))
                                                                                                                                                                        (
                                                                                                                                                                            (AST_CALL)))
                                                                                                                                                                    (
                                                                                                                                                                        (AST_VAR)))
                                                                                                                                                                (
                                                                                                                                                                    (AST_ARRAY
                                                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                                                            (AST_CALL
                                                                                                                                                                                (
                                                                                                                                                                                    (SCALAR)))
                                                                                                                                                                            (NULL)))))
                                                                                                                                                            (
                                                                                                                                                                (AST_VAR)))
                                                                                                                                                        (
                                                                                                                                                            (AST_CALL)))
                                                                                                                                                    (
                                                                                                                                                        (AST_VAR)))
                                                                                                                                                (
                                                                                                                                                    (AST_ARRAY
                                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                                            (SCALAR)
                                                                                                                                                            (NULL)))))
                                                                                                                                            (
                                                                                                                                                (AST_VAR)))
                                                                                                                                        (
                                                                                                                                            (AST_CALL)))
                                                                                                                                    (
                                                                                                                                        (AST_VAR)))
                                                                                                                                (
                                                                                                                                    (AST_ARRAY
                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                            (SCALAR)
                                                                                                                                            (NULL)))))
                                                                                                                            (
                                                                                                                                (AST_VAR)))
                                                                                                                        (
                                                                                                                            (AST_CALL)))
                                                                                                                    (
                                                                                                                        (AST_VAR)))
                                                                                                                (
                                                                                                                    (AST_ARRAY
                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                            (AST_CALL
                                                                                                                                (
                                                                                                                                    (SCALAR)))
                                                                                                                            (NULL)))))
                                                                                                            (
                                                                                                                (AST_VAR)))
                                                                                                        (
                                                                                                            (AST_CALL)))
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_ARRAY
                                                                                                        (AST_ARRAY_ELEM
                                                                                                            (SCALAR)
                                                                                                            (NULL)))))
                                                                                            (
                                                                                                (AST_VAR)))
                                                                                        (
                                                                                            (AST_CALL)))
                                                                                    (
                                                                                        (AST_VAR)))
                                                                                (
                                                                                    (AST_ARRAY
                                                                                        (AST_ARRAY_ELEM
                                                                                            (SCALAR)
                                                                                            (NULL)))))
                                                                            (
                                                                                (AST_VAR)))
                                                                        (
                                                                            (AST_CALL)))
                                                                    (
                                                                        (AST_VAR)))
                                                                (
                                                                    (AST_ARRAY
                                                                        (AST_ARRAY_ELEM
                                                                            (AST_CALL
                                                                                (
                                                                                    (SCALAR)))
                                                                            (NULL)))))
                                                            (
                                                                (AST_VAR)))
                                                        (
                                                            (AST_CALL)))
                                                    (
                                                        (AST_VAR)))
                                                (
                                                    (AST_ARRAY
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL)))))
                                            (
                                                (AST_VAR)))
                                        (
                                            (AST_CALL)))
                                    (
                                        (AST_VAR)))
                                (
                                    (AST_ARRAY
                                        (AST_ARRAY_ELEM
                                            (SCALAR)
                                            (NULL)))))
                            (
                                (AST_VAR)))
                        (
                            (AST_CALL)))
                    (
                        (AST_VAR)))
                (
                    (AST_CONST)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR))))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_BINARY_OP
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (SCALAR))
                        (SCALAR))
                    (SCALAR))
                (SCALAR))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_VAR))
            (
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_METHOD_CALL
                                                                                                (AST_METHOD_CALL
                                                                                                    (AST_METHOD_CALL
                                                                                                        (AST_METHOD_CALL
                                                                                                            (AST_METHOD_CALL
                                                                                                                (AST_METHOD_CALL
                                                                                                                    (AST_METHOD_CALL
                                                                                                                        (AST_METHOD_CALL
                                                                                                                            (AST_METHOD_CALL
                                                                                                                                (AST_METHOD_CALL
                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                            (AST_STATIC_CALL)
                                                                                                                                                                                            (
                                                                                                                                                                                                (AST_VAR))))
                                                                                                                                                                                    (
                                                                                                                                                                                        (AST_VAR)))
                                                                                                                                                                                (
                                                                                                                                                                                    (AST_VAR)))
                                                                                                                                                                            (
                                                                                                                                                                                (AST_VAR)))
                                                                                                                                                                        (
                                                                                                                                                                            (AST_CALL)))
                                                                                                                                                                    (
                                                                                                                                                                        (AST_VAR)))
                                                                                                                                                                (
                                                                                                                                                                    (AST_ARRAY
                                                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                                                            (AST_CALL
                                                                                                                                                                                (
                                                                                                                                                                                    (SCALAR)))
                                                                                                                                                                            (NULL)))))
                                                                                                                                                            (
                                                                                                                                                                (AST_VAR)))
                                                                                                                                                        (
                                                                                                                                                            (AST_CALL)))
                                                                                                                                                    (
                                                                                                                                                        (AST_VAR)))
                                                                                                                                                (
                                                                                                                                                    (AST_ARRAY
                                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                                            (SCALAR)
                                                                                                                                                            (NULL)))))
                                                                                                                                            (
                                                                                                                                                (AST_VAR)))
                                                                                                                                        (
                                                                                                                                            (AST_CALL)))
                                                                                                                                    (
                                                                                                                                        (AST_VAR)))
                                                                                                                                (
                                                                                                                                    (AST_ARRAY
                                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                                            (SCALAR)
                                                                                                                                            (NULL)))))
                                                                                                                            (
                                                                                                                                (AST_VAR)))
                                                                                                                        (
                                                                                                                            (AST_CALL)))
                                                                                                                    (
                                                                                                                        (AST_VAR)))
                                                                                                                (
                                                                                                                    (AST_ARRAY
                                                                                                                        (AST_ARRAY_ELEM
                                                                                                                            (AST_CALL
                                                                                                                                (
                                                                                                                                    (SCALAR)))
                                                                                                                            (NULL)))))
                                                                                                            (
                                                                                                                (AST_VAR)))
                                                                                                        (
                                                                                                            (AST_CALL)))
                                                                                                    (
                                                                                                        (AST_VAR)))
                                                                                                (
                                                                                                    (AST_ARRAY
                                                                                                        (AST_ARRAY_ELEM
                                                                                                            (SCALAR)
                                                                                                            (NULL)))))
                                                                                            (
                                                                                                (AST_VAR)))
                                                                                        (
                                                                                            (AST_CALL)))
                                                                                    (
                                                                                        (AST_VAR)))
                                                                                (
                                                                                    (AST_ARRAY
                                                                                        (AST_ARRAY_ELEM
                                                                                            (SCALAR)
                                                                                            (NULL)))))
                                                                            (
                                                                                (AST_VAR)))
                                                                        (
                                                                            (AST_CALL)))
                                                                    (
                                                                        (AST_VAR)))
                                                                (
                                                                    (AST_ARRAY
                                                                        (AST_ARRAY_ELEM
                                                                            (AST_CALL
                                                                                (
                                                                                    (SCALAR)))
                                                                            (NULL)))))
                                                            (
                                                                (AST_VAR)))
                                                        (
                                                            (AST_CALL)))
                                                    (
                                                        (AST_VAR)))
                                                (
                                                    (AST_ARRAY
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL)))))
                                            (
                                                (AST_VAR)))
                                        (
                                            (AST_CALL)))
                                    (
                                        (AST_VAR)))
                                (
                                    (AST_ARRAY
                                        (AST_ARRAY_ELEM
                                            (SCALAR)
                                            (NULL)))))
                            (
                                (AST_VAR)))
                        (
                            (AST_CALL)))
                    (
                        (AST_VAR)))
                (
                    (AST_CONST)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR))))))