commit 86f99ec8f75b1a284da874a84729d5197d69d28a
Author: Sam Brannen <sam@sambrannen.com>
Date:   Wed Dec 10 14:47:05 2014 +0100

    Improve error handling in CollectionFactory

    This commit improves error handling in CollectionFactory by asserting
    preconditions.

    In addition, this commit introduces ConnectionFactoryTests.