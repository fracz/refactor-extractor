	public function postProcess()
	{
		$this->tabAccess = Profile::getProfileAccess($this->context->employee->id_profile, $this->id);

		if (Tools::isSubmit('submitAdd'.$this->table))
		{
			$id_category = (int)Tools::getValue('id_category');
			$id_parent = (int)Tools::getValue('id_parent');
			// if true, we are in a root category creation
			if (!$id_parent && !Tools::isSubmit('is_root_category'))
			{
				$_POST['id_parent'] = $id_parent = 0;
				$_POST['is_root_category'] = 1;
			}
			if ($id_category)
			{
				if ($id_category != $id_parent)
				{
					if (!Category::checkBeforeMove($id_category, $id_parent))
						$this->_errors[] = Tools::displayError($this->l('Category cannot be moved here'));
				}
				else
					$this->_errors[] = Tools::displayError($this->l('Category cannot be parent of herself.'));
			}
		}
		/* Delete object */
		else if (isset($_GET['delete'.$this->table]))
		{
			if ($this->tabAccess['delete'] === '1')
			{
				if (Validate::isLoadedObject($object = $this->loadObject()) && isset($this->fieldImageSettings))
				{
					// check if request at least one object with noZeroObject
					if (isset($object->noZeroObject) &&
						count($taxes = call_user_func(array($this->className, $object->noZeroObject))) <= 1)
						$this->_errors[] = Tools::displayError('You need at least one object.').' <b>'.
							$this->table.'</b><br />'.Tools::displayError('You cannot delete all of the items.');
					else
					{
						if ($this->deleted)
						{
							$object->deleteImage();
							$object->deleted = 1;
							if ($object->update())
								Tools::redirectAdmin(self::$currentIndex.'&conf=1&token='.Tools::getValue('token').'&id_category='.(int)$object->id_parent);
						}
						else if ($object->delete())
							Tools::redirectAdmin(self::$currentIndex.'&conf=1&token='.Tools::getValue('token').'&id_category='.(int)$object->id_parent);
						$this->_errors[] = Tools::displayError('An error occurred during deletion.');
					}
				}
				else
					$this->_errors[] = Tools::displayError('An error occurred while deleting object.').' <b>'.
						$this->table.'</b> '.Tools::displayError('(cannot load object)');
			}
			else
				$this->_errors[] = Tools::displayError('You do not have permission to delete here.');
		}
		else if (isset($_GET['position']))
		{
			if ($this->tabAccess['edit'] !== '1')
				$this->_errors[] = Tools::displayError('You do not have permission to edit here.');
			else if (!Validate::isLoadedObject($object = new Category((int)Tools::getValue($this->identifier, Tools::getValue('id_category_to_move', 1)))))
				$this->_errors[] = Tools::displayError('An error occurred while updating status for object.').' <b>'.
					$this->table.'</b> '.Tools::displayError('(cannot load object)');
			if (!$object->updatePosition((int)Tools::getValue('way'), (int)Tools::getValue('position')))
				$this->_errors[] = Tools::displayError('Failed to update the position.');
			else
			{
				$object->regenerateEntireNtree();
				Tools::redirectAdmin(self::$currentIndex.'&'.$this->table.'Orderby=position&'.$this->table.'Orderway=asc&conf=5'.(($id_category = (int)Tools::getValue($this->identifier, Tools::getValue('id_category_parent', 1))) ? ('&'.$this->identifier.'='.$id_category) : '').'&token='.Tools::getAdminTokenLite('AdminCategories'));
			}
		}
		/* Delete multiple objects */
		else if (Tools::getValue('submitDel'.$this->table))
		{
			if ($this->tabAccess['delete'] === '1')
			{
				if (isset($_POST[$this->table.'Box']))
				{
					$category = new Category();
					$result = true;
					$result = $category->deleteSelection(Tools::getValue($this->table.'Box'));
					if ($result)
					{
						$category->cleanPositions((int)Tools::getValue('id_category'));
						Tools::redirectAdmin(self::$currentIndex.'&conf=2&token='.Tools::getAdminTokenLite('AdminCategories').'&id_category='.(int)Tools::getValue('id_category'));
					}
					$this->_errors[] = Tools::displayError('An error occurred while deleting selection.');

				}
				else
					$this->_errors[] = Tools::displayError('You must select at least one element to delete.');
			}
			else
				$this->_errors[] = Tools::displayError('You do not have permission to delete here.');
			return;
		}
		parent::postProcess();
	}

||||||||||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_STATIC_CALL
            (
                (AST_PROP
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR))))
                (AST_PROP
                    (AST_VAR)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_STATIC_CALL
                (
                    (AST_BINARY_OP
                        (SCALAR)
                        (AST_PROP
                            (AST_VAR)))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CAST
                        (AST_STATIC_CALL
                            (
                                (SCALAR)))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CAST
                        (AST_STATIC_CALL
                            (
                                (SCALAR)))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_BINARY_OP
                            (AST_UNARY_OP
                                (AST_VAR))
                            (AST_UNARY_OP
                                (AST_STATIC_CALL
                                    (
                                        (SCALAR)))))
                        (
                            (AST_ASSIGN
                                (AST_DIM
                                    (AST_VAR)
                                    (SCALAR))
                                (AST_ASSIGN
                                    (AST_VAR)
                                    (SCALAR)))
                            (AST_ASSIGN
                                (AST_DIM
                                    (AST_VAR)
                                    (SCALAR))
                                (SCALAR)))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_VAR)
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_BINARY_OP
                                        (AST_VAR)
                                        (AST_VAR))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_UNARY_OP
                                                    (AST_STATIC_CALL
                                                        (
                                                            (AST_VAR)
                                                            (AST_VAR))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (AST_METHOD_CALL
                                                                    (AST_VAR)
                                                                    (
                                                                        (SCALAR)))))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (NULL))
                                            (AST_STATIC_CALL
                                                (
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)
                                                        (
                                                            (SCALAR))))))))))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_IF
                    (AST_IF_ELEM
                        (AST_ISSET
                            (AST_DIM
                                (AST_VAR)
                                (AST_BINARY_OP
                                    (SCALAR)
                                    (AST_PROP
                                        (AST_VAR)))))
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_BINARY_OP
                                        (AST_DIM
                                            (AST_PROP
                                                (AST_VAR))
                                            (SCALAR))
                                        (SCALAR))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_STATIC_CALL
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_VAR)
                                                                (AST_METHOD_CALL
                                                                    (AST_VAR)))))
                                                    (AST_ISSET
                                                        (AST_PROP
                                                            (AST_VAR))))
                                                (
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_BINARY_OP
                                                                (AST_ISSET
                                                                    (AST_PROP
                                                                        (AST_VAR)))
                                                                (AST_BINARY_OP
                                                                    (AST_CALL
                                                                        (
                                                                            (AST_ASSIGN
                                                                                (AST_VAR)
                                                                                (AST_CALL
                                                                                    (
                                                                                        (AST_ARRAY
                                                                                            (AST_ARRAY_ELEM
                                                                                                (AST_PROP
                                                                                                    (AST_VAR))
                                                                                                (NULL))
                                                                                            (AST_ARRAY_ELEM
                                                                                                (AST_PROP
                                                                                                    (AST_VAR))
                                                                                                (NULL))))))))
                                                                    (SCALAR)))
                                                            (
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (NULL))
                                                                    (AST_BINARY_OP
                                                                        (AST_BINARY_OP
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_STATIC_CALL
                                                                                        (
                                                                                            (SCALAR)))
                                                                                    (SCALAR))
                                                                                (AST_PROP
                                                                                    (AST_VAR)))
                                                                            (SCALAR))
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (SCALAR)))))))
                                                        (AST_IF_ELEM
                                                            (NULL)
                                                            (
                                                                (AST_IF
                                                                    (AST_IF_ELEM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (
                                                                            (AST_METHOD_CALL
                                                                                (AST_VAR))
                                                                            (AST_ASSIGN
                                                                                (AST_PROP
                                                                                    (AST_VAR))
                                                                                (SCALAR))
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_VAR))
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_BINARY_OP
                                                                                                                (AST_STATIC_PROP)
                                                                                                                (SCALAR))
                                                                                                            (AST_STATIC_CALL
                                                                                                                (
                                                                                                                    (SCALAR))))
                                                                                                        (SCALAR))
                                                                                                    (AST_CAST
                                                                                                        (AST_PROP
                                                                                                            (AST_VAR)))))))))))
                                                                    (AST_IF_ELEM
                                                                        (NULL)
                                                                        (
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_VAR))
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_BINARY_OP
                                                                                                                (AST_STATIC_PROP)
                                                                                                                (SCALAR))
                                                                                                            (AST_STATIC_CALL
                                                                                                                (
                                                                                                                    (SCALAR))))
                                                                                                        (SCALAR))
                                                                                                    (AST_CAST
                                                                                                        (AST_PROP
                                                                                                            (AST_VAR))))))))))))
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (NULL))
                                                                    (AST_STATIC_CALL
                                                                        (
                                                                            (SCALAR)))))))))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_BINARY_OP
                                                                    (AST_BINARY_OP
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (SCALAR)))
                                                                        (SCALAR))
                                                                    (AST_PROP
                                                                        (AST_VAR)))
                                                                (SCALAR))
                                                            (AST_STATIC_CALL
                                                                (
                                                                    (SCALAR))))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (NULL))
                                            (AST_STATIC_CALL
                                                (
                                                    (SCALAR)))))))))
                    (AST_IF_ELEM
                        (NULL)
                        (
                            (AST_IF
                                (AST_IF_ELEM
                                    (AST_ISSET
                                        (AST_DIM
                                            (AST_VAR)
                                            (SCALAR)))
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_DIM
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (SCALAR))
                                                    (SCALAR))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (SCALAR))))))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_UNARY_OP
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (AST_ASSIGN
                                                                            (AST_VAR)
                                                                            (AST_NEW
                                                                                (
                                                                                    (AST_CAST
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_PROP
                                                                                                    (AST_VAR))
                                                                                                (AST_STATIC_CALL
                                                                                                    (
                                                                                                        (SCALAR)
                                                                                                        (SCALAR))))))))))))
                                                            (
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (NULL))
                                                                    (AST_BINARY_OP
                                                                        (AST_BINARY_OP
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_STATIC_CALL
                                                                                        (
                                                                                            (SCALAR)))
                                                                                    (SCALAR))
                                                                                (AST_PROP
                                                                                    (AST_VAR)))
                                                                            (SCALAR))
                                                                        (AST_STATIC_CALL
                                                                            (
                                                                                (SCALAR)))))))))))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_UNARY_OP
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)
                                                        (
                                                            (AST_CAST
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (SCALAR))))
                                                            (AST_CAST
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (SCALAR)))))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (NULL))
                                                        (AST_STATIC_CALL
                                                            (
                                                                (SCALAR))))))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_METHOD_CALL
                                                        (AST_VAR))
                                                    (AST_STATIC_CALL
                                                        (
                                                            (AST_BINARY_OP
                                                                (AST_BINARY_OP
                                                                    (AST_BINARY_OP
                                                                        (AST_BINARY_OP
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_BINARY_OP
                                                                                        (AST_BINARY_OP
                                                                                            (AST_STATIC_PROP)
                                                                                            (SCALAR))
                                                                                        (AST_PROP
                                                                                            (AST_VAR)))
                                                                                    (SCALAR))
                                                                                (AST_PROP
                                                                                    (AST_VAR)))
                                                                            (SCALAR))
                                                                        (AST_CONDITIONAL
                                                                            (AST_ASSIGN
                                                                                (AST_VAR)
                                                                                (AST_CAST
                                                                                    (AST_STATIC_CALL
                                                                                        (
                                                                                            (AST_PROP
                                                                                                (AST_VAR))
                                                                                            (AST_STATIC_CALL
                                                                                                (
                                                                                                    (SCALAR)
                                                                                                    (SCALAR)))))))
                                                                            (AST_BINARY_OP
                                                                                (AST_BINARY_OP
                                                                                    (AST_BINARY_OP
                                                                                        (SCALAR)
                                                                                        (AST_PROP
                                                                                            (AST_VAR)))
                                                                                    (SCALAR))
                                                                                (AST_VAR))
                                                                            (SCALAR)))
                                                                    (SCALAR))
                                                                (AST_STATIC_CALL
                                                                    (
                                                                        (SCALAR)))))))))))
                                (AST_IF_ELEM
                                    (NULL)
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_STATIC_CALL
                                                    (
                                                        (AST_BINARY_OP
                                                            (SCALAR)
                                                            (AST_PROP
                                                                (AST_VAR)))))
                                                (
                                                    (AST_IF
                                                        (AST_IF_ELEM
                                                            (AST_BINARY_OP
                                                                (AST_DIM
                                                                    (AST_PROP
                                                                        (AST_VAR))
                                                                    (SCALAR))
                                                                (SCALAR))
                                                            (
                                                                (AST_IF
                                                                    (AST_IF_ELEM
                                                                        (AST_ISSET
                                                                            (AST_DIM
                                                                                (AST_VAR)
                                                                                (AST_BINARY_OP
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (SCALAR))))
                                                                        (
                                                                            (AST_ASSIGN
                                                                                (AST_VAR)
                                                                                (AST_NEW))
                                                                            (AST_ASSIGN
                                                                                (AST_VAR)
                                                                                (AST_CONST))
                                                                            (AST_ASSIGN
                                                                                (AST_VAR)
                                                                                (AST_METHOD_CALL
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_PROP
                                                                                                        (AST_VAR))
                                                                                                    (SCALAR)))))))
                                                                            (AST_IF
                                                                                (AST_IF_ELEM
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_VAR)
                                                                                            (
                                                                                                (AST_CAST
                                                                                                    (AST_STATIC_CALL
                                                                                                        (
                                                                                                            (SCALAR))))))
                                                                                        (AST_STATIC_CALL
                                                                                            (
                                                                                                (AST_BINARY_OP
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_BINARY_OP
                                                                                                                (AST_STATIC_PROP)
                                                                                                                (SCALAR))
                                                                                                            (AST_STATIC_CALL
                                                                                                                (
                                                                                                                    (SCALAR))))
                                                                                                        (SCALAR))
                                                                                                    (AST_CAST
                                                                                                        (AST_STATIC_CALL
                                                                                                            (
                                                                                                                (SCALAR))))))))))
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (NULL))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (SCALAR))))))
                                                                    (AST_IF_ELEM
                                                                        (NULL)
                                                                        (
                                                                            (AST_ASSIGN
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (NULL))
                                                                                (AST_STATIC_CALL
                                                                                    (
                                                                                        (SCALAR)))))))))
                                                        (AST_IF_ELEM
                                                            (NULL)
                                                            (
                                                                (AST_ASSIGN
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (NULL))
                                                                    (AST_STATIC_CALL
                                                                        (
                                                                            (SCALAR)))))))
                                                    (AST_RETURN
                                                        (NULL))))))))))))))
    (AST_STATIC_CALL))||||||||