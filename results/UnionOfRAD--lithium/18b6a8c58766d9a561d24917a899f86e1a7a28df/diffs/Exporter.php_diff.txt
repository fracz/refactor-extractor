||||||||	protected static function _diff($left, $right) {
		$result = array();

		foreach ($left as $key => $value) {
			if (!isset($right[$key]) || $left[$key] !== $right[$key]) {
				$result[$key] = $value;
			}
		}
		return $result;
	}

	/**
	 * Handles appending nested objects to document changesets.
	 *
	 * @param array $changes The full set of changes to be made to the database.
	 * @param string $key The key of the field to append, which may be a dot-separated path if the
	 *               value is or is contained within a nested object.
	 * @param mixed $value The value to append to the changeset. Can be a scalar value, array, a
	 *              nested object, or part of a nested object.
	 * @return array Returns the value of `$changes`, with any new changed values appended.
	 */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_FOREACH
        (AST_VAR)
        (AST_VAR)
        (AST_VAR)
        (
            (AST_IF
                (AST_IF_ELEM
                    (AST_BINARY_OP
                        (AST_UNARY_OP
                            (AST_ISSET
                                (AST_DIM
                                    (AST_VAR)
                                    (AST_VAR))))
                        (AST_BINARY_OP
                            (AST_DIM
                                (AST_VAR)
                                (AST_VAR))
                            (AST_DIM
                                (AST_VAR)
                                (AST_VAR))))
                    (
                        (AST_ASSIGN
                            (AST_DIM
                                (AST_VAR)
                                (AST_VAR))
                            (AST_VAR)))))))
    (AST_RETURN
        (AST_VAR)))