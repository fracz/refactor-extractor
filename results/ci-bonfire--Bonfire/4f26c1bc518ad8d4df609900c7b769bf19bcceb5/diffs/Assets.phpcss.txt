    public static function css($style = null, $media = 'screen', $bypassInheritance = false, $bypassModule = false)
    {
        // Debugging issues with media being set to 1
        if ($media == '1') {
            $media = 'screen';
        }

        $styles = array();

        // If no style(s) has been passed in, use all that have been added.
        if (empty($style)) {
            $styles = self::$styles['css'];

            // Make sure to include a file based on media type if $globals
            if (self::$globals) {
                $styles[] = array(
                    'file'  => $media,
                    'media' => $media,
                );
            }
        } elseif (is_array($style)) {
            // If an array has been passed, merge it with any added styles.
            $styles = array_merge($style, self::$styles['css']);
        } else {
            // If a single style has been passed in, render it only.
            $styles = array(
                'file'  => $style,
                'media' => $media,
            );
        }

        if ($bypassModule == false) {
            // Add a style named for the controller so it will be looked for.
            $styles[] = array(
                'file'  => self::$ci->router->fetch_class(),
                'media' => $media,
            );

            $moduleStyles = self::find_files(self::$styles['module'], 'css', $bypassInheritance);
        }

        $styles = self::find_files($styles, 'css', $bypassInheritance);

        $return = '';
        if (self::$ci->config->item('assets.css_combine')) {
            // Add the combined css
            $return = self::combine_css($styles, $media);
        } else {
            // Loop through the styles, spitting out links for each one.
            foreach ($styles as $styleToAdd) {
                $attr = array(
                    'rel'   => 'stylesheet',
                    'type'  => 'text/css',
                    'href'  => '',
                    'media' => $media,
                );

                if (is_array($styleToAdd)) {
                    $attr['href'] = $styleToAdd['file'];
                    if (! empty($styleToAdd['media'])) {
                        $attr['media'] = $styleToAdd['media'];
                    }
                } elseif (is_string($styleToAdd)) {
                    $attr['href'] = $styleToAdd;
                } else {
                    // If it's not an array or a string, skip it
                    continue;
                }

                if (substr($attr['href'], -4) != '.css') {
                    $attr['href'] .= '.css';
                }


                $return .= '<link' . self::attributes($attr) . " />\n";
            }
        }

        if ($bypassModule == false) {
            // Make sure we include module styles
            $return .= self::combine_css($moduleStyles, $media, 'module');
        }

        return $return;
    }

    /**
     * Does the actual work of generating the combined css code.
     *
     * Called by the css() method.
     *
     * @param array  $files An array of file arrays
     * @param string $media The media to assign to the style(s) being passed in.
     * @param string $type  Either a string ('module') or empty - defines which
     * scripts are being combined
     *
     * @return string
     */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPEPARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_VAR)
                (SCALAR))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (SCALAR)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY))
    (AST_IF
        (AST_IF_ELEM
            (AST_EMPTY
                (AST_VAR))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_DIM
                        (AST_STATIC_PROP)
                        (SCALAR)))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_STATIC_PROP)
                        (
                            (AST_ASSIGN
                                (AST_DIM
                                    (AST_VAR)
                                    (NULL))
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (AST_VAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (AST_VAR)
                                        (SCALAR)))))))))
        (AST_IF_ELEM
            (AST_CALL
                (
                    (AST_VAR)))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CALL
                        (
                            (AST_VAR)
                            (AST_DIM
                                (AST_STATIC_PROP)
                                (SCALAR)))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (AST_VAR)
                            (SCALAR))
                        (AST_ARRAY_ELEM
                            (AST_VAR)
                            (SCALAR)))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_VAR)
                (AST_CONST))
            (
                (AST_ASSIGN
                    (AST_DIM
                        (AST_VAR)
                        (NULL))
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (AST_METHOD_CALL
                                (AST_PROP
                                    (AST_STATIC_PROP)))
                            (SCALAR))
                        (AST_ARRAY_ELEM
                            (AST_VAR)
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_STATIC_CALL
                        (
                            (AST_DIM
                                (AST_STATIC_PROP)
                                (SCALAR))
                            (SCALAR)
                            (AST_VAR)))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL
            (
                (AST_VAR)
                (SCALAR)
                (AST_VAR))))
    (AST_ASSIGN
        (AST_VAR)
        (SCALAR))
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_PROP
                    (AST_STATIC_PROP))
                (
                    (SCALAR)))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_STATIC_CALL
                        (
                            (AST_VAR)
                            (AST_VAR))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_FOREACH
                    (AST_VAR)
                    (AST_VAR)
                    (NULL)
                    (
                        (AST_ASSIGN
                            (AST_VAR)
                            (AST_ARRAY
                                (AST_ARRAY_ELEM
                                    (SCALAR)
                                    (SCALAR))
                                (AST_ARRAY_ELEM
                                    (SCALAR)
                                    (SCALAR))
                                (AST_ARRAY_ELEM
                                    (SCALAR)
                                    (SCALAR))
                                (AST_ARRAY_ELEM
                                    (AST_VAR)
                                    (SCALAR))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_CALL
                                    (
                                        (AST_VAR)))
                                (
                                    (AST_ASSIGN
                                        (AST_DIM
                                            (AST_VAR)
                                            (SCALAR))
                                        (AST_DIM
                                            (AST_VAR)
                                            (SCALAR)))
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_UNARY_OP
                                                (AST_EMPTY
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR))))
                                            (
                                                (AST_ASSIGN
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR))
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR))))))))
                            (AST_IF_ELEM
                                (AST_CALL
                                    (
                                        (AST_VAR)))
                                (
                                    (AST_ASSIGN
                                        (AST_DIM
                                            (AST_VAR)
                                            (SCALAR))
                                        (AST_VAR))))
                            (AST_IF_ELEM
                                (NULL)
                                (
                                    (AST_CONTINUE
                                        (NULL)))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_BINARY_OP
                                    (AST_CALL
                                        (
                                            (AST_DIM
                                                (AST_VAR)
                                                (SCALAR))
                                            (AST_UNARY_OP
                                                (SCALAR))))
                                    (SCALAR))
                                (
                                    (AST_ASSIGN_OP
                                        (AST_DIM
                                            (AST_VAR)
                                            (SCALAR))
                                        (SCALAR)))))
                        (AST_ASSIGN_OP
                            (AST_VAR)
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (SCALAR)
                                    (AST_STATIC_CALL
                                        (
                                            (AST_VAR))))
                                (SCALAR))))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_VAR)
                (AST_CONST))
            (
                (AST_ASSIGN_OP
                    (AST_VAR)
                    (AST_STATIC_CALL
                        (
                            (AST_VAR)
                            (AST_VAR)
                            (SCALAR)))))))
    (AST_RETURN
        (AST_VAR)))||||||||