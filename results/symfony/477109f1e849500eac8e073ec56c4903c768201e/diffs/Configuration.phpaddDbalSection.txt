    private function addDbalSection(NodeBuilder $node)
    {
        $node
            ->arrayNode('dbal')
                ->beforeNormalization()
                    ->ifTrue(function($v){ return is_array($v) && !array_key_exists('connections', $v) && !array_key_exists('connection', $v); })
                    ->then(function($v) {
                        $connection = array ();
                        $keys = array ('dbname', 'host', 'port', 'user', 'password', 'driver', 'driver_class', 'options', 'path', 'memory', 'unix_socket', 'wrapper_class', 'platform_service', 'charset', 'logging');
                        foreach ($keys as $key) {
                            if (array_key_exists($key, $v)) {
                                $connection[$key] = $v[$key];
                                unset($v[$key]);
                            }
                        }
                        $defaultConnection = isset($v['default_connection']) ? (string) $v['default_connection'] : 'default';
                        $v['connections'] = array ($defaultConnection => $connection);
                        $v['default_connection'] = $defaultConnection;
                        return $v;
                    })
                ->end()
                ->scalarNode('default_connection')->isRequired()->cannotBeEmpty()->end()
                ->fixXmlConfig('type')
                ->arrayNode('types')
                    ->useAttributeAsKey('name')
                    ->prototype('scalar')
                        ->beforeNormalization()
                            ->ifTrue(function($v) { return is_array($v) && isset($v['class']); })
                            ->then(function($v) { return $v['class']; })
                        ->end()
                    ->end()
                ->end()
                ->fixXmlConfig('connection')
                ->builder($this->getDbalConnectionsNode())
            ->end()
        ;
    }

||||||||    private function addDbalSection(NodeBuilder $node)
    {
        $node
            ->arrayNode('dbal')
                ->beforeNormalization()
                    ->ifTrue(function($v){ return is_array($v) && !array_key_exists('connections', $v) && !array_key_exists('connection', $v); })
                    ->then(function($v) {
                        $connection = array ();
                        $keys = array ('dbname', 'host', 'port', 'user', 'password', 'driver', 'driver_class', 'options', 'path', 'memory', 'unix_socket', 'wrapper_class', 'platform_service', 'charset', 'logging');
                        foreach ($keys as $key) {
                            if (array_key_exists($key, $v)) {
                                $connection[$key] = $v[$key];
                                unset($v[$key]);
                            }
                        }
                        $defaultConnection = isset($v['default_connection']) ? (string) $v['default_connection'] : 'default';
                        $v['connections'] = array ($defaultConnection => $connection);
                        $v['default_connection'] = $defaultConnection;
                        return $v;
                    })
                ->end()
                ->scalarNode('default_connection')->cannotBeEmpty()->defaultValue('default')->end()
                ->fixXmlConfig('type')
                ->arrayNode('types')
                    ->useAttributeAsKey('name')
                    ->prototype('scalar')
                        ->beforeNormalization()
                            ->ifTrue(function($v) { return is_array($v) && isset($v['class']); })
                            ->then(function($v) { return $v['class']; })
                        ->end()
                    ->end()
                ->end()
                ->fixXmlConfig('connection')
                ->builder($this->getDbalConnectionsNode())
            ->end()
        ;
    }

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_VAR)
                                                                                            (
                                                                                                (SCALAR))))
                                                                                    (
                                                                                        (AST_CLOSURE
                                                                                            (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                            (NULL)
                                                                                            (
                                                                                                (AST_RETURN
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (AST_VAR)))
                                                                                                            (AST_UNARY_OP
                                                                                                                (AST_CALL
                                                                                                                    (
                                                                                                                        (SCALAR)
                                                                                                                        (AST_VAR)))))
                                                                                                        (AST_UNARY_OP
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (SCALAR)
                                                                                                                    (AST_VAR))))))))))
                                                                                (
                                                                                    (AST_CLOSURE
                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                        (NULL)
                                                                                        (
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_ARRAY))
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_ARRAY
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))))
                                                                                            (AST_FOREACH
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)
                                                                                                (NULL)
                                                                                                (
                                                                                                    (AST_IF
                                                                                                        (AST_IF_ELEM
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (AST_VAR)
                                                                                                                    (AST_VAR)))
                                                                                                            (
                                                                                                                (AST_ASSIGN
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR))
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR)))
                                                                                                                (AST_UNSET
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR))))))))
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_CONDITIONAL
                                                                                                    (AST_ISSET
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (SCALAR)))
                                                                                                    (AST_CAST
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (SCALAR)))
                                                                                                    (SCALAR)))
                                                                                            (AST_ASSIGN
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (SCALAR))
                                                                                                (AST_ARRAY
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (AST_VAR)
                                                                                                        (AST_VAR))))
                                                                                            (AST_ASSIGN
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (SCALAR))
                                                                                                (AST_VAR))
                                                                                            (AST_RETURN
                                                                                                (AST_VAR)))))))
                                                                        (
                                                                            (SCALAR))))))
                                                        (
                                                            (SCALAR)))
                                                    (
                                                        (SCALAR)))
                                                (
                                                    (SCALAR)))
                                            (
                                                (SCALAR))))
                                    (
                                        (AST_CLOSURE
                                            (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                            (NULL)
                                            (
                                                (AST_RETURN
                                                    (AST_BINARY_OP
                                                        (AST_CALL
                                                            (
                                                                (AST_VAR)))
                                                        (AST_ISSET
                                                            (AST_DIM
                                                                (AST_VAR)
                                                                (SCALAR)))))))))
                                (
                                    (AST_CLOSURE
                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                        (NULL)
                                        (
                                            (AST_RETURN
                                                (AST_DIM
                                                    (AST_VAR)
                                                    (SCALAR))))))))))
                (
                    (SCALAR)))
            (
                (AST_METHOD_CALL
                    (AST_VAR))))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_VAR)
                                                                                            (
                                                                                                (SCALAR))))
                                                                                    (
                                                                                        (AST_CLOSURE
                                                                                            (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                            (NULL)
                                                                                            (
                                                                                                (AST_RETURN
                                                                                                    (AST_BINARY_OP
                                                                                                        (AST_BINARY_OP
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (AST_VAR)))
                                                                                                            (AST_UNARY_OP
                                                                                                                (AST_CALL
                                                                                                                    (
                                                                                                                        (SCALAR)
                                                                                                                        (AST_VAR)))))
                                                                                                        (AST_UNARY_OP
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (SCALAR)
                                                                                                                    (AST_VAR))))))))))
                                                                                (
                                                                                    (AST_CLOSURE
                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                        (NULL)
                                                                                        (
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_ARRAY))
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_ARRAY
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (SCALAR)
                                                                                                        (NULL))))
                                                                                            (AST_FOREACH
                                                                                                (AST_VAR)
                                                                                                (AST_VAR)
                                                                                                (NULL)
                                                                                                (
                                                                                                    (AST_IF
                                                                                                        (AST_IF_ELEM
                                                                                                            (AST_CALL
                                                                                                                (
                                                                                                                    (AST_VAR)
                                                                                                                    (AST_VAR)))
                                                                                                            (
                                                                                                                (AST_ASSIGN
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR))
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR)))
                                                                                                                (AST_UNSET
                                                                                                                    (AST_DIM
                                                                                                                        (AST_VAR)
                                                                                                                        (AST_VAR))))))))
                                                                                            (AST_ASSIGN
                                                                                                (AST_VAR)
                                                                                                (AST_CONDITIONAL
                                                                                                    (AST_ISSET
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (SCALAR)))
                                                                                                    (AST_CAST
                                                                                                        (AST_DIM
                                                                                                            (AST_VAR)
                                                                                                            (SCALAR)))
                                                                                                    (SCALAR)))
                                                                                            (AST_ASSIGN
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (SCALAR))
                                                                                                (AST_ARRAY
                                                                                                    (AST_ARRAY_ELEM
                                                                                                        (AST_VAR)
                                                                                                        (AST_VAR))))
                                                                                            (AST_ASSIGN
                                                                                                (AST_DIM
                                                                                                    (AST_VAR)
                                                                                                    (SCALAR))
                                                                                                (AST_VAR))
                                                                                            (AST_RETURN
                                                                                                (AST_VAR)))))))
                                                                        (
                                                                            (SCALAR))))
                                                                (
                                                                    (SCALAR))))
                                                        (
                                                            (SCALAR)))
                                                    (
                                                        (SCALAR)))
                                                (
                                                    (SCALAR)))
                                            (
                                                (SCALAR))))
                                    (
                                        (AST_CLOSURE
                                            (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                            (NULL)
                                            (
                                                (AST_RETURN
                                                    (AST_BINARY_OP
                                                        (AST_CALL
                                                            (
                                                                (AST_VAR)))
                                                        (AST_ISSET
                                                            (AST_DIM
                                                                (AST_VAR)
                                                                (SCALAR)))))))))
                                (
                                    (AST_CLOSURE
                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                        (NULL)
                                        (
                                            (AST_RETURN
                                                (AST_DIM
                                                    (AST_VAR)
                                                    (SCALAR))))))))))
                (
                    (SCALAR)))
            (
                (AST_METHOD_CALL
                    (AST_VAR))))))