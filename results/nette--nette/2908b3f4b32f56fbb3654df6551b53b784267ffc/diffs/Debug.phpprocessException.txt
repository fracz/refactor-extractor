	public static function processException(\Exception $exception, $outputAllowed = FALSE)
	{
		if (!self::$enabled) {
			return;

		} elseif (self::$logFile) {
			try {
				$hash = md5($exception /*5.2*. (method_exists($exception, 'getPrevious') ? $exception->getPrevious() : (isset($exception->previous) ? $exception->previous : ''))*/);
				self::log("PHP Fatal error: Uncaught " . str_replace("Stack trace:\n" . $exception->getTraceAsString(), '', $exception));
				foreach (new \DirectoryIterator(dirname(self::$logFile)) as $entry) {
					if (strpos($entry, $hash)) {
						$skip = TRUE;
						break;
					}
				}
				$file = dirname(self::$logFile) . "/exception " . @date('Y-m-d H-i-s') . " $hash.html";
				if (empty($skip) && self::$logHandle = @fopen($file, 'w')) {
					ob_start(); // double buffer prevents sending HTTP headers in some PHP
					ob_start(array(__CLASS__, '_writeFile'), 1);
					self::_paintBlueScreen($exception);
					ob_end_flush();
					ob_end_clean();
					fclose(self::$logHandle);
				}
				if (self::$sendEmails) {
					self::sendEmail((string) $exception);
				}
			} catch (\Exception $e) {
				if (!headers_sent()) {
					header('HTTP/1.1 500 Internal Server Error');
				}
				echo 'Nette\Debug fatal error: ', get_class($e), ': ', ($e->getCode() ? '#' . $e->getCode() . ' ' : '') . $e->getMessage(), "\n";
				exit;
			}

		} elseif (self::$productionMode) {
			// be quiet

		} elseif (self::$consoleMode) { // dump to console
			if ($outputAllowed) {
				echo "$exception\n";
			}

		} elseif (self::$firebugDetected && self::$ajaxDetected && !headers_sent()) { // AJAX mode
			self::fireLog($exception, self::EXCEPTION);

		} elseif ($outputAllowed) { // dump to browser
			if (!headers_sent()) {
				@ob_end_clean(); while (ob_get_level() && @ob_end_clean());
				/**/header_remove('Content-Encoding');/**/
				/*5.2* if (in_array('Content-Encoding: gzip', headers_list())) header('Content-Encoding: identity', TRUE); // override gzhandler*/
			}
			self::_paintBlueScreen($exception);

		} elseif (self::$firebugDetected && !headers_sent()) {
			self::fireLog($exception, self::EXCEPTION);
		}

		foreach (self::$onFatalError as $handler) {
			call_user_func($handler, $exception);
		}
	}



	/**
	 * Handles exception throwed in __toString().
	 * @param  \Exception
	 * @return void
	 */
||||||||	public static function processException(\Exception $exception, $outputAllowed = FALSE)
	{
		if (!self::$enabled) {
			return;

		} elseif (self::$logFile) {
			try {
				$hash = md5($exception /*5.2*. (method_exists($exception, 'getPrevious') ? $exception->getPrevious() : (isset($exception->previous) ? $exception->previous : ''))*/);
				self::log("PHP Fatal error: Uncaught exception " . get_class($exception) . " with message '" . $exception->getMessage() . "' in " . $exception->getFile() . ":" . $exception->getLine() . (self::$uri ? '  @  ' . self::$uri : ''));
				foreach (new \DirectoryIterator(dirname(self::$logFile)) as $entry) {
					if (strpos($entry, $hash)) {
						$skip = TRUE;
						break;
					}
				}
				if (empty($skip) && self::$logHandle = @fopen(dirname(self::$logFile) . "/exception " . @date('Y-m-d H-i-s') . " $hash.html", 'w')) {
					ob_start(); // double buffer prevents sending HTTP headers in some PHP
					ob_start(array(__CLASS__, '_writeFile'), 1);
					self::_paintBlueScreen($exception);
					ob_end_flush();
					ob_end_clean();
					fclose(self::$logHandle);
				}
				self::sendEmail("$exception\n\n" . self::$uri);

			} catch (\Exception $e) {
				if (!headers_sent()) {
					header('HTTP/1.1 500 Internal Server Error');
				}
				echo 'Nette\Debug fatal error: ', get_class($e), ': ', ($e->getCode() ? '#' . $e->getCode() . ' ' : '') . $e->getMessage(), "\n";
				exit;
			}

		} elseif (self::$productionMode) {
			// be quiet

		} elseif (self::$consoleMode) { // dump to console
			if ($outputAllowed) {
				echo "$exception\n";
			}

		} elseif (self::$firebugDetected && self::$ajaxDetected && !headers_sent()) { // AJAX mode
			self::fireLog($exception, self::EXCEPTION);

		} elseif ($outputAllowed) { // dump to browser
			if (!headers_sent()) {
				@ob_end_clean(); while (ob_get_level() && @ob_end_clean());
				/**/header_remove('Content-Encoding');/**/
				/*5.2* if (in_array('Content-Encoding: gzip', headers_list())) header('Content-Encoding: identity', TRUE); // override gzhandler*/
			}
			self::_paintBlueScreen($exception);

		} elseif (self::$firebugDetected && !headers_sent()) {
			self::fireLog($exception, self::EXCEPTION);
		}

		foreach (self::$onFatalError as $handler) {
			call_user_func($handler, $exception);
		}
	}



	/**
	 * Handles exception throwed in __toString().
	 * @param  \Exception
	 * @return void
	 */
||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_STATIC_PROP))
            (
                (AST_RETURN
                    (NULL))))
        (AST_IF_ELEM
            (AST_STATIC_PROP)
            (
                (AST_TRY
                    (
                        (AST_ASSIGN
                            (AST_VAR)
                            (AST_CALL
                                (
                                    (AST_VAR))))
                        (AST_STATIC_CALL
                            (
                                (AST_BINARY_OP
                                    (SCALAR)
                                    (AST_CALL
                                        (
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_METHOD_CALL
                                                    (AST_VAR)))
                                            (SCALAR)
                                            (AST_VAR))))))
                        (AST_FOREACH
                            (AST_NEW
                                (
                                    (AST_CALL
                                        (
                                            (AST_STATIC_PROP)))))
                            (AST_VAR)
                            (NULL)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_CALL
                                            (
                                                (AST_VAR)
                                                (AST_VAR)))
                                        (
                                            (AST_ASSIGN
                                                (AST_VAR)
                                                (AST_CONST))
                                            (AST_BREAK
                                                (NULL)))))))
                        (AST_ASSIGN
                            (AST_VAR)
                            (AST_BINARY_OP
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_CALL
                                            (
                                                (AST_STATIC_PROP)))
                                        (SCALAR))
                                    (AST_UNARY_OP
                                        (AST_CALL
                                            (
                                                (SCALAR)))))
                                (AST_ENCAPS_LIST
                                    (SCALAR)
                                    (AST_VAR)
                                    (SCALAR))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_BINARY_OP
                                    (AST_EMPTY
                                        (AST_VAR))
                                    (AST_ASSIGN
                                        (AST_STATIC_PROP)
                                        (AST_UNARY_OP
                                            (AST_CALL
                                                (
                                                    (AST_VAR)
                                                    (SCALAR))))))
                                (
                                    (AST_CALL)
                                    (AST_CALL
                                        (
                                            (AST_ARRAY
                                                (AST_ARRAY_ELEM
                                                    (AST_MAGIC_CONST)
                                                    (NULL))
                                                (AST_ARRAY_ELEM
                                                    (SCALAR)
                                                    (NULL)))
                                            (SCALAR)))
                                    (AST_STATIC_CALL
                                        (
                                            (AST_VAR)))
                                    (AST_CALL)
                                    (AST_CALL)
                                    (AST_CALL
                                        (
                                            (AST_STATIC_PROP))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_STATIC_PROP)
                                (
                                    (AST_STATIC_CALL
                                        (
                                            (AST_CAST
                                                (AST_VAR))))))))
                    (AST_CATCH_LIST
                        (AST_CATCH
                            (AST_NAME_LIST)
                            (AST_VAR)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_UNARY_OP
                                            (AST_CALL))
                                        (
                                            (AST_CALL
                                                (
                                                    (SCALAR))))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_ECHO
                                    (AST_CALL
                                        (
                                            (AST_VAR))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_ECHO
                                    (AST_BINARY_OP
                                        (AST_CONDITIONAL
                                            (AST_METHOD_CALL
                                                (AST_VAR))
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (SCALAR)
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)))
                                                (SCALAR))
                                            (SCALAR))
                                        (AST_METHOD_CALL
                                            (AST_VAR))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_EXIT
                                    (NULL)))))
                    (NULL))))
        (AST_IF_ELEM
            (AST_STATIC_PROP))
        (AST_IF_ELEM
            (AST_STATIC_PROP)
            (
                (AST_IF
                    (AST_IF_ELEM
                        (AST_VAR)
                        (
                            (AST_ECHO
                                (AST_ENCAPS_LIST
                                    (AST_VAR)
                                    (SCALAR))))))))
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_STATIC_PROP)
                    (AST_STATIC_PROP))
                (AST_UNARY_OP
                    (AST_CALL)))
            (
                (AST_STATIC_CALL
                    (
                        (AST_VAR)
                        (AST_CLASS_CONST
                            (SCALAR))))))
        (AST_IF_ELEM
            (AST_VAR)
            (
                (AST_IF
                    (AST_IF_ELEM
                        (AST_UNARY_OP
                            (AST_CALL))
                        (
                            (AST_UNARY_OP
                                (AST_CALL))
                            (AST_WHILE
                                (AST_BINARY_OP
                                    (AST_CALL)
                                    (AST_UNARY_OP
                                        (AST_CALL))))
                            (AST_CALL
                                (
                                    (SCALAR))))))
                (AST_STATIC_CALL
                    (
                        (AST_VAR)))))
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_STATIC_PROP)
                (AST_UNARY_OP
                    (AST_CALL)))
            (
                (AST_STATIC_CALL
                    (
                        (AST_VAR)
                        (AST_CLASS_CONST
                            (SCALAR)))))))
    (AST_FOREACH
        (AST_STATIC_PROP)
        (AST_VAR)
        (NULL)
        (
            (AST_CALL
                (
                    (AST_VAR)
                    (AST_VAR))))))||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_STATIC_PROP))
            (
                (AST_RETURN
                    (NULL))))
        (AST_IF_ELEM
            (AST_STATIC_PROP)
            (
                (AST_TRY
                    (
                        (AST_ASSIGN
                            (AST_VAR)
                            (AST_CALL
                                (
                                    (AST_VAR))))
                        (AST_STATIC_CALL
                            (
                                (AST_BINARY_OP
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (SCALAR)
                                                                (AST_CALL
                                                                    (
                                                                        (AST_VAR))))
                                                            (SCALAR))
                                                        (AST_METHOD_CALL
                                                            (AST_VAR)))
                                                    (SCALAR))
                                                (AST_METHOD_CALL
                                                    (AST_VAR)))
                                            (SCALAR))
                                        (AST_METHOD_CALL
                                            (AST_VAR)))
                                    (AST_CONDITIONAL
                                        (AST_STATIC_PROP)
                                        (AST_BINARY_OP
                                            (SCALAR)
                                            (AST_STATIC_PROP))
                                        (SCALAR)))))
                        (AST_FOREACH
                            (AST_NEW
                                (
                                    (AST_CALL
                                        (
                                            (AST_STATIC_PROP)))))
                            (AST_VAR)
                            (NULL)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_CALL
                                            (
                                                (AST_VAR)
                                                (AST_VAR)))
                                        (
                                            (AST_ASSIGN
                                                (AST_VAR)
                                                (AST_CONST))
                                            (AST_BREAK
                                                (NULL)))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_BINARY_OP
                                    (AST_EMPTY
                                        (AST_VAR))
                                    (AST_ASSIGN
                                        (AST_STATIC_PROP)
                                        (AST_UNARY_OP
                                            (AST_CALL
                                                (
                                                    (AST_BINARY_OP
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_CALL
                                                                    (
                                                                        (AST_STATIC_PROP)))
                                                                (SCALAR))
                                                            (AST_UNARY_OP
                                                                (AST_CALL
                                                                    (
                                                                        (SCALAR)))))
                                                        (AST_ENCAPS_LIST
                                                            (SCALAR)
                                                            (AST_VAR)
                                                            (SCALAR)))
                                                    (SCALAR))))))
                                (
                                    (AST_CALL)
                                    (AST_CALL
                                        (
                                            (AST_ARRAY
                                                (AST_ARRAY_ELEM
                                                    (AST_MAGIC_CONST)
                                                    (NULL))
                                                (AST_ARRAY_ELEM
                                                    (SCALAR)
                                                    (NULL)))
                                            (SCALAR)))
                                    (AST_STATIC_CALL
                                        (
                                            (AST_VAR)))
                                    (AST_CALL)
                                    (AST_CALL)
                                    (AST_CALL
                                        (
                                            (AST_STATIC_PROP))))))
                        (AST_STATIC_CALL
                            (
                                (AST_BINARY_OP
                                    (AST_ENCAPS_LIST
                                        (AST_VAR)
                                        (SCALAR))
                                    (AST_STATIC_PROP)))))
                    (AST_CATCH_LIST
                        (AST_CATCH
                            (AST_NAME_LIST)
                            (AST_VAR)
                            (
                                (AST_IF
                                    (AST_IF_ELEM
                                        (AST_UNARY_OP
                                            (AST_CALL))
                                        (
                                            (AST_CALL
                                                (
                                                    (SCALAR))))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_ECHO
                                    (AST_CALL
                                        (
                                            (AST_VAR))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_ECHO
                                    (AST_BINARY_OP
                                        (AST_CONDITIONAL
                                            (AST_METHOD_CALL
                                                (AST_VAR))
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (SCALAR)
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)))
                                                (SCALAR))
                                            (SCALAR))
                                        (AST_METHOD_CALL
                                            (AST_VAR))))
                                (AST_ECHO
                                    (SCALAR))
                                (AST_EXIT
                                    (NULL)))))
                    (NULL))))
        (AST_IF_ELEM
            (AST_STATIC_PROP))
        (AST_IF_ELEM
            (AST_STATIC_PROP)
            (
                (AST_IF
                    (AST_IF_ELEM
                        (AST_VAR)
                        (
                            (AST_ECHO
                                (AST_ENCAPS_LIST
                                    (AST_VAR)
                                    (SCALAR))))))))
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_STATIC_PROP)
                    (AST_STATIC_PROP))
                (AST_UNARY_OP
                    (AST_CALL)))
            (
                (AST_STATIC_CALL
                    (
                        (AST_VAR)
                        (AST_CLASS_CONST
                            (SCALAR))))))
        (AST_IF_ELEM
            (AST_VAR)
            (
                (AST_IF
                    (AST_IF_ELEM
                        (AST_UNARY_OP
                            (AST_CALL))
                        (
                            (AST_UNARY_OP
                                (AST_CALL))
                            (AST_WHILE
                                (AST_BINARY_OP
                                    (AST_CALL)
                                    (AST_UNARY_OP
                                        (AST_CALL))))
                            (AST_CALL
                                (
                                    (SCALAR))))))
                (AST_STATIC_CALL
                    (
                        (AST_VAR)))))
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_STATIC_PROP)
                (AST_UNARY_OP
                    (AST_CALL)))
            (
                (AST_STATIC_CALL
                    (
                        (AST_VAR)
                        (AST_CLASS_CONST
                            (SCALAR)))))))
    (AST_FOREACH
        (AST_STATIC_PROP)
        (AST_VAR)
        (NULL)
        (
            (AST_CALL
                (
                    (AST_VAR)
                    (AST_VAR))))))