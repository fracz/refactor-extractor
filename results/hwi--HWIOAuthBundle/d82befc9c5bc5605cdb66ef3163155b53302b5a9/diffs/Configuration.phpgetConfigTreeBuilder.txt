    public function getConfigTreeBuilder()
    {
        $builder = new TreeBuilder();

        $rootNode = $builder->root('knp_oauth');
        $rootNode->children()
            ->arrayNode('resource_owners')
                ->isRequired()
                ->useAttributeAsKey('name')
                ->prototype('array')
                    ->children()
                        ->scalarNode('access_token_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('authorization_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('client_id')
                            ->cannotBeEmpty()
                            ->isRequired()
                        ->end()
                        ->scalarNode('client_secret')
                            ->cannotBeEmpty()
                            ->isRequired()
                        ->end()
                        ->scalarNode('infos_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('scope')
                            ->isRequired()
                        ->end()
                        ->scalarNode('type')
                            ->defaultValue('generic')
                            ->validate()
                                ->ifNotInArray(array('facebook', 'generic', 'github', 'google'))
                                ->thenInvalid('Unknow resource owner type %s.')
                            ->end()
                        ->end()
                        ->scalarNode('username_path')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                    ->end()
                    ->validate()
                        ->ifTrue(function($c){
                            if('generic' === $c['type']) {
                                $children = array('authorization_url', 'access_token_url', 'infos_url', 'username_path');
                                foreach($children as $child) {
                                    if(!isset($c[$child])) {
                                        return true;
                                    }
                                }
                            }

                            return false;
                        })
                        ->thenInvalid("All parameters are mandatory for type 'generic'. Check if you're missing one of: access_token_url, authorization_url, infos_url, username_path.")
                    ->end()
                ->end()
            ->end();

        return $builder;
    }
}||||||||    public function getConfigTreeBuilder()
    {
        $builder = new TreeBuilder();

        $rootNode = $builder->root('knp_oauth');
        $rootNode
            ->fixXmlConfig('resource_owner')
            ->children()
            ->arrayNode('resource_owners')
                ->isRequired()
                ->useAttributeAsKey('name')
                ->prototype('array')
                    ->children()
                        ->scalarNode('access_token_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('authorization_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('client_id')
                            ->cannotBeEmpty()
                            ->isRequired()
                        ->end()
                        ->scalarNode('client_secret')
                            ->cannotBeEmpty()
                            ->isRequired()
                        ->end()
                        ->scalarNode('infos_url')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                        ->scalarNode('scope')
                            ->isRequired()
                        ->end()
                        ->scalarNode('type')
                            ->defaultValue('generic')
                            ->validate()
                                ->ifNotInArray(array('facebook', 'generic', 'github', 'google'))
                                ->thenInvalid('Unknow resource owner type %s.')
                            ->end()
                        ->end()
                        ->scalarNode('username_path')
                            ->validate()->ifTrue(function($v){return empty($v);})->thenUnset()->end()
                        ->end()
                    ->end()
                    ->validate()
                        ->ifTrue(function($c){
                            if ('generic' === $c['type']) {
                                $children = array('authorization_url', 'access_token_url', 'infos_url', 'username_path');
                                foreach ($children as $child) {
                                    if (!isset($c[$child])) {
                                        return true;
                                    }
                                }
                            }

                            return false;
                        })
                        ->thenInvalid("All parameters are mandatory for type 'generic'. Check if you're missing one of: access_token_url, authorization_url, infos_url, username_path.")
                    ->end()
                ->end()
            ->end();

        return $builder;
    }
}||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_METHOD_CALL
                                                                                                (AST_METHOD_CALL
                                                                                                    (AST_METHOD_CALL
                                                                                                        (AST_METHOD_CALL
                                                                                                            (AST_METHOD_CALL
                                                                                                                (AST_METHOD_CALL
                                                                                                                    (AST_METHOD_CALL
                                                                                                                        (AST_METHOD_CALL
                                                                                                                            (AST_METHOD_CALL
                                                                                                                                (AST_METHOD_CALL
                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                                                (AST_VAR))
                                                                                                                                                                                                                            (
                                                                                                                                                                                                                                (SCALAR))))
                                                                                                                                                                                                                    (
                                                                                                                                                                                                                        (SCALAR)))
                                                                                                                                                                                                                (
                                                                                                                                                                                                                    (SCALAR))))
                                                                                                                                                                                                        (
                                                                                                                                                                                                            (SCALAR))))
                                                                                                                                                                                                (
                                                                                                                                                                                                    (AST_CLOSURE
                                                                                                                                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                                                                                                        (NULL)
                                                                                                                                                                                                        (
                                                                                                                                                                                                            (AST_RETURN
                                                                                                                                                                                                                (AST_EMPTY
                                                                                                                                                                                                                    (AST_VAR))))))))))
                                                                                                                                                                                (
                                                                                                                                                                                    (SCALAR))))
                                                                                                                                                                        (
                                                                                                                                                                            (AST_CLOSURE
                                                                                                                                                                                (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                                                                                (NULL)
                                                                                                                                                                                (
                                                                                                                                                                                    (AST_RETURN
                                                                                                                                                                                        (AST_EMPTY
                                                                                                                                                                                            (AST_VAR))))))))))
                                                                                                                                                        (
                                                                                                                                                            (SCALAR))))))
                                                                                                                                        (
                                                                                                                                            (SCALAR))))))
                                                                                                                        (
                                                                                                                            (SCALAR))))
                                                                                                                (
                                                                                                                    (AST_CLOSURE
                                                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                        (NULL)
                                                                                                                        (
                                                                                                                            (AST_RETURN
                                                                                                                                (AST_EMPTY
                                                                                                                                    (AST_VAR))))))))))
                                                                                                (
                                                                                                    (SCALAR)))))
                                                                                    (
                                                                                        (SCALAR)))
                                                                                (
                                                                                    (SCALAR))))
                                                                        (
                                                                            (AST_ARRAY
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL)))))
                                                                    (
                                                                        (SCALAR)))))
                                                        (
                                                            (SCALAR))))
                                                (
                                                    (AST_CLOSURE
                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                        (NULL)
                                                        (
                                                            (AST_RETURN
                                                                (AST_EMPTY
                                                                    (AST_VAR))))))))))))
                        (
                            (AST_CLOSURE
                                (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                (NULL)
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_DIM
                                                    (AST_VAR)
                                                    (SCALAR)))
                                            (
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_ARRAY
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))))
                                                (AST_FOREACH
                                                    (AST_VAR)
                                                    (AST_VAR)
                                                    (NULL)
                                                    (
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_UNARY_OP
                                                                    (AST_ISSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))))
                                                                (
                                                                    (AST_RETURN
                                                                        (AST_CONST))))))))))
                                    (AST_RETURN
                                        (AST_CONST))))))
                    (
                        (SCALAR))))))
    (AST_RETURN
        (AST_VAR)))||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_METHOD_CALL
                                                                                (AST_METHOD_CALL
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_METHOD_CALL
                                                                                            (AST_METHOD_CALL
                                                                                                (AST_METHOD_CALL
                                                                                                    (AST_METHOD_CALL
                                                                                                        (AST_METHOD_CALL
                                                                                                            (AST_METHOD_CALL
                                                                                                                (AST_METHOD_CALL
                                                                                                                    (AST_METHOD_CALL
                                                                                                                        (AST_METHOD_CALL
                                                                                                                            (AST_METHOD_CALL
                                                                                                                                (AST_METHOD_CALL
                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                                                    (AST_METHOD_CALL
                                                                                                                                                                                                                        (AST_METHOD_CALL
                                                                                                                                                                                                                            (AST_METHOD_CALL
                                                                                                                                                                                                                                (AST_METHOD_CALL
                                                                                                                                                                                                                                    (AST_VAR)
                                                                                                                                                                                                                                    (
                                                                                                                                                                                                                                        (SCALAR))))
                                                                                                                                                                                                                            (
                                                                                                                                                                                                                                (SCALAR))))
                                                                                                                                                                                                                    (
                                                                                                                                                                                                                        (SCALAR)))
                                                                                                                                                                                                                (
                                                                                                                                                                                                                    (SCALAR))))
                                                                                                                                                                                                        (
                                                                                                                                                                                                            (SCALAR))))
                                                                                                                                                                                                (
                                                                                                                                                                                                    (AST_CLOSURE
                                                                                                                                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                                                                                                        (NULL)
                                                                                                                                                                                                        (
                                                                                                                                                                                                            (AST_RETURN
                                                                                                                                                                                                                (AST_EMPTY
                                                                                                                                                                                                                    (AST_VAR))))))))))
                                                                                                                                                                                (
                                                                                                                                                                                    (SCALAR))))
                                                                                                                                                                        (
                                                                                                                                                                            (AST_CLOSURE
                                                                                                                                                                                (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                                                                                (NULL)
                                                                                                                                                                                (
                                                                                                                                                                                    (AST_RETURN
                                                                                                                                                                                        (AST_EMPTY
                                                                                                                                                                                            (AST_VAR))))))))))
                                                                                                                                                        (
                                                                                                                                                            (SCALAR))))))
                                                                                                                                        (
                                                                                                                                            (SCALAR))))))
                                                                                                                        (
                                                                                                                            (SCALAR))))
                                                                                                                (
                                                                                                                    (AST_CLOSURE
                                                                                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                                                                                        (NULL)
                                                                                                                        (
                                                                                                                            (AST_RETURN
                                                                                                                                (AST_EMPTY
                                                                                                                                    (AST_VAR))))))))))
                                                                                                (
                                                                                                    (SCALAR)))))
                                                                                    (
                                                                                        (SCALAR)))
                                                                                (
                                                                                    (SCALAR))))
                                                                        (
                                                                            (AST_ARRAY
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL))
                                                                                (AST_ARRAY_ELEM
                                                                                    (SCALAR)
                                                                                    (NULL)))))
                                                                    (
                                                                        (SCALAR)))))
                                                        (
                                                            (SCALAR))))
                                                (
                                                    (AST_CLOSURE
                                                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                                        (NULL)
                                                        (
                                                            (AST_RETURN
                                                                (AST_EMPTY
                                                                    (AST_VAR))))))))))))
                        (
                            (AST_CLOSURE
                                (NO_PARAM_TYPENO_PARAM_DEFAULT)
                                (NULL)
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (SCALAR)
                                                (AST_DIM
                                                    (AST_VAR)
                                                    (SCALAR)))
                                            (
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_ARRAY
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))
                                                        (AST_ARRAY_ELEM
                                                            (SCALAR)
                                                            (NULL))))
                                                (AST_FOREACH
                                                    (AST_VAR)
                                                    (AST_VAR)
                                                    (NULL)
                                                    (
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_UNARY_OP
                                                                    (AST_ISSET
                                                                        (AST_DIM
                                                                            (AST_VAR)
                                                                            (AST_VAR))))
                                                                (
                                                                    (AST_RETURN
                                                                        (AST_CONST))))))))))
                                    (AST_RETURN
                                        (AST_CONST))))))
                    (
                        (SCALAR))))))
    (AST_RETURN
        (AST_VAR)))