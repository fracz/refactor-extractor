	public function run()
	{
		// Check if data is sent
		if ($this->iohandler->get_input('submit_update_file', false))
		{
			$supported_methods = array('compression', 'ftp', 'direct_file');
			$method = $this->iohandler->get_input('method', 'compression');
			$update_method = (in_array($method, $supported_methods, true)) ? $method : 'compression';
			$this->installer_config->set('file_update_method', $update_method);

			$compression = $this->iohandler->get_input('compression_method', '.zip');
			$supported_methods = array_keys($this->available_methods);
			$supported_methods[] = '.tar';
			$compression = (in_array($compression, $supported_methods, true)) ? $compression : '.zip';
			$this->installer_config->set('file_update_compression', $compression);
		}
		else
		{
			$this->iohandler->add_user_form_group('UPDATE_FILE_METHOD_TITLE', array(
				'method' => array(
					'label'		=> 'UPDATE_FILE_METHOD',
					'type'		=> 'select',
					'options'	=> array(
						array(
							'value'		=> 'compression',
							'label'		=> 'UPDATE_FILE_METHOD_DOWNLOAD',
							'selected'	=> true,
						),
						array(
							'value'		=> 'ftp',
							'label'		=> 'UPDATE_FILE_METHOD_FTP',
							'selected'	=> false,
						),
						array(
							'value'		=> 'direct_file',
							'label'		=> 'UPDATE_FILE_METHOD_FILESYSTEM',
							'selected'	=> false,
						),
					),
				),
				'compression_method' => array(
					'label'		=> 'SELECT_DOWNLOAD_FORMAT',
					'type'		=> 'select',
					'options'	=> $this->get_available_compression_methods(),
				),
				'submit_update_file' => array(
					'label'	=> 'SUBMIT',
					'type'	=> 'submit',
				),
			));

			$this->iohandler->send_response();
			throw new user_interaction_required_exception();
		}
	}

	/**
	 * Returns form elements in an array of available compression methods
	 *
	 * @return array
	 */
||||||||	public function run()
	{
		// Check if data is sent
		if ($this->iohandler->get_input('submit_update_file', false))
		{
			$supported_methods = array('compression', 'ftp', 'direct_file');
			$method = $this->iohandler->get_input('method', 'compression');
			$update_method = (in_array($method, $supported_methods, true)) ? $method : 'compression';
			$this->installer_config->set('file_update_method', $update_method);

			$compression = $this->iohandler->get_input('compression_method', '.zip');
			$supported_methods = array_keys($this->available_methods);
			$supported_methods[] = '.tar';
			$compression = (in_array($compression, $supported_methods, true)) ? $compression : '.zip';
			$this->installer_config->set('file_update_compression', $compression);
		}
		else
		{
			$this->iohandler->add_user_form_group('UPDATE_FILE_METHOD_TITLE', array(
				'method' => array(
					'label'		=> 'UPDATE_FILE_METHOD',
					'type'		=> 'select',
					'options'	=> array(
						array(
							'value'		=> 'compression',
							'label'		=> 'UPDATE_FILE_METHOD_DOWNLOAD',
							'selected'	=> true,
						),
						array(
							'value'		=> 'ftp',
							'label'		=> 'UPDATE_FILE_METHOD_FTP',
							'selected'	=> false,
						),
						array(
							'value'		=> 'direct_file',
							'label'		=> 'UPDATE_FILE_METHOD_FILESYSTEM',
							'selected'	=> false,
						),
					),
				),
				'compression_method' => array(
					'label'		=> 'SELECT_DOWNLOAD_FORMAT',
					'type'		=> 'select',
					'options'	=> $this->get_available_compression_methods(),
				),
				'submit_update_file' => array(
					'label'	=> 'SUBMIT',
					'type'	=> 'submit',
				),
			));

			throw new user_interaction_required_exception();
		}
	}

	/**
	 * Returns form elements in an array of available compression methods
	 *
	 * @return array
	 */
||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_PROP
                    (AST_VAR))
                (
                    (SCALAR)
                    (AST_CONST)))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_PROP
                            (AST_VAR))
                        (
                            (SCALAR)
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CONDITIONAL
                        (AST_CALL
                            (
                                (AST_VAR)
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_VAR)
                        (SCALAR)))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR)))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_PROP
                            (AST_VAR))
                        (
                            (SCALAR)
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CALL
                        (
                            (AST_PROP
                                (AST_VAR)))))
                (AST_ASSIGN
                    (AST_DIM
                        (AST_VAR)
                        (NULL))
                    (SCALAR))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CONDITIONAL
                        (AST_CALL
                            (
                                (AST_VAR)
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_VAR)
                        (SCALAR)))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR)))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (AST_ARRAY
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL))
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL))
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL)))
                                        (SCALAR)))
                                (SCALAR))
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (AST_METHOD_CALL
                                            (AST_VAR))
                                        (SCALAR)))
                                (SCALAR))
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR)))
                                (SCALAR)))))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR)))
                (AST_THROW
                    (AST_NEW))))))||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_PROP
                    (AST_VAR))
                (
                    (SCALAR)
                    (AST_CONST)))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_PROP
                            (AST_VAR))
                        (
                            (SCALAR)
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CONDITIONAL
                        (AST_CALL
                            (
                                (AST_VAR)
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_VAR)
                        (SCALAR)))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR)))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_PROP
                            (AST_VAR))
                        (
                            (SCALAR)
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CALL
                        (
                            (AST_PROP
                                (AST_VAR)))))
                (AST_ASSIGN
                    (AST_DIM
                        (AST_VAR)
                        (NULL))
                    (SCALAR))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CONDITIONAL
                        (AST_CALL
                            (
                                (AST_VAR)
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_VAR)
                        (SCALAR)))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR)))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (AST_ARRAY
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL))
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL))
                                            (AST_ARRAY_ELEM
                                                (AST_ARRAY
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (SCALAR)
                                                        (SCALAR))
                                                    (AST_ARRAY_ELEM
                                                        (AST_CONST)
                                                        (SCALAR)))
                                                (NULL)))
                                        (SCALAR)))
                                (SCALAR))
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (AST_METHOD_CALL
                                            (AST_VAR))
                                        (SCALAR)))
                                (SCALAR))
                            (AST_ARRAY_ELEM
                                (AST_ARRAY
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR))
                                    (AST_ARRAY_ELEM
                                        (SCALAR)
                                        (SCALAR)))
                                (SCALAR)))))
                (AST_THROW
                    (AST_NEW))))))