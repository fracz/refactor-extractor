commit 1764dd7d4ab6e6e5c799eaa9ce007fce48fa0b63
Author: Andrey Andreev <narf@bofh.bg>
Date:   Sat Jun 16 18:48:19 2012 +0300

    Fix issue #938 + some related improvements