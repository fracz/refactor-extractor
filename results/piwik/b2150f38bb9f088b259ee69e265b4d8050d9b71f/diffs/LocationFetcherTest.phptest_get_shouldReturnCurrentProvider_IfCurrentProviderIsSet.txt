    public function test_get_shouldReturnCurrentProvider_IfCurrentProviderIsSet()
    {
        $providerGetterMock = $this->getMockBuilder('\Piwik\Plugins\UserCountry\tests\Mock\ProviderGetterMock')
            ->setMethods(array('getProviderById'))
            ->getMock();

        $providerGetterMock->expects($this->once())
            ->method('getProviderById')
            ->will($this->returnCallback(
                function ($id)
                {
                    switch ($id) {
                        case 'CurrentProviderId':
                            return 'CurrentProvider';

                        case 'DefaultProviderId':
                            return 'DefaultProvider';
                    }

                    return false;
                }
            ));

        $locationFetcher = new VisitorGeolocator(
            'CurrentProviderId', array($providerGetterMock, 'getProviderById')
        );

        $this->assertEquals('CurrentProvider', $locationFetcher->getProvider('DefaultProviderId'));
    }

    /**
     * @param $provider
     * @param string $currentLocationProviderId
     * @return PHPUnit_Framework_MockObject_MockObject|VisitorGeolocator
     */
||||||||||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (SCALAR)))
                (
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (NULL)))))))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_METHOD_CALL
                        (AST_VAR))))
            (
                (SCALAR)))
        (
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_CLOSURE
                        (NO_PARAM_TYPENO_PARAM_DEFAULT)
                        (NULL)
                        (
                            (AST_SWITCH
                                (AST_VAR)
                                (AST_SWITCH_LIST
                                    (AST_SWITCH_CASE
                                        (SCALAR)
                                        (
                                            (AST_RETURN
                                                (SCALAR))))
                                    (AST_SWITCH_CASE
                                        (SCALAR)
                                        (
                                            (AST_RETURN
                                                (SCALAR))))))
                            (AST_RETURN
                                (AST_CONST))))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (SCALAR)
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (AST_VAR)
                        (NULL))
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (NULL))))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (SCALAR))))))||||||||