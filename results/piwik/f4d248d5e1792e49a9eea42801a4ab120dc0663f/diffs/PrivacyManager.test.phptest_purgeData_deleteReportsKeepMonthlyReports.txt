||||||||	public function test_purgeData_deleteReportsKeepMonthlyReports()
	{
		Piwik_PrivacyManager::savePurgeDataSettings(array(
			'delete_reports_keep_month_reports' => 1
		));

		$this->addLogData();
		$this->addReportData();

		// get purge data prediction
		$prediction = Piwik_PrivacyManager::getPurgeEstimate();

		// perform checks on prediction
		$expectedPrediction = array(
			Piwik_Common::prefixTable('log_conversion') => 6,
			Piwik_Common::prefixTable('log_link_visit_action') => 6,
			Piwik_Common::prefixTable('log_visit') => 3,
			Piwik_Common::prefixTable('log_conversion_item') => 3,
			Piwik_Common::prefixTable('archive_numeric_2012_01') => -1,
			Piwik_Common::prefixTable('archive_blob_2012_01') => 10 // 5 days, 4 weeks, 1 year to remove
		);
		$this->assertEqual($expectedPrediction, $prediction);

		// purge data
		$this->setTimeToRun();
		$this->instance->deleteLogData();
		$this->instance->deleteReportData();

		// perform checks
		$this->checkLogDataPurged();
		$this->checkReportsAndMetricsPurged($janBlobsRemaining = 1); // 1 blob for 1 month
	}

	/** Test that purgeData works correctly when the 'keep yearly reports' setting is set to true. */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_STATIC_CALL
        (
            (AST_ARRAY
                (AST_ARRAY_ELEM
                    (SCALAR)
                    (SCALAR)))))
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (SCALAR)
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (AST_ARRAY_ELEM
                (SCALAR)
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (AST_ARRAY_ELEM
                (SCALAR)
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (AST_ARRAY_ELEM
                (SCALAR)
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (AST_ARRAY_ELEM
                (AST_UNARY_OP
                    (SCALAR))
                (AST_STATIC_CALL
                    (
                        (SCALAR))))
            (AST_ARRAY_ELEM
                (SCALAR)
                (AST_STATIC_CALL
                    (
                        (SCALAR))))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_ASSIGN
                (AST_VAR)
                (SCALAR)))))