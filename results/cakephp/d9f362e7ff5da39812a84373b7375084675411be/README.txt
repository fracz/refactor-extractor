commit d9f362e7ff5da39812a84373b7375084675411be
Author: Paweł Kukiełka <pkukielka@gmail.com>
Date:   Thu May 12 02:14:22 2016 +0200

    add messege test to allowEmpty when set as array
    small code refactor