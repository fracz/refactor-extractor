	public function upgrader_source_selection( $source, $remote_source , $upgrader ) {

		require_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php';
		global $wp_filesystem;
		$repo        = null;
		$matched     = false;
		$source_base = basename( $source );

		/*
		 * Check for upgrade process, return if both are false or
		 * not of same updater.
		 */
		if ( ( ! $upgrader instanceof \Plugin_Upgrader && ! $upgrader instanceof \Theme_Upgrader ) ||
		     ( $upgrader instanceof \Plugin_Upgrader && ! $this instanceof Plugin ) ||
		     ( $upgrader instanceof \Theme_Upgrader  && ! $this instanceof Theme )
		) {
			return $source;
		}

		/*
		 * Re-create $upgrader object for iThemes Sync
		 * and possibly other remote upgrade services.
		 */
			if ( $upgrader instanceof \Plugin_Upgrader && ! $upgrader->skin instanceof \Plugin_Upgrader_Skin ) {
				$_upgrader = new \Plugin_Upgrader( $skin = new \Bulk_Plugin_Upgrader_Skin() );
				$_upgrader->skin->plugin_info = $upgrader->skin->plugin_info;
				$upgrader = new \Plugin_Upgrader( $skin = new \Bulk_Plugin_Upgrader_Skin() );
				$upgrader->skin->plugin_info = $_upgrader->skin->plugin_info;
			}
			if ( $upgrader instanceof \Theme_Upgrader && ! $upgrader->skin instanceof \Theme_Upgrader_Skin ) {
				$_upgrader = new \Theme_Upgrader( $skin = new \Bulk_Theme_Upgrader_Skin() );
				$_upgrader->skin->theme_info = $upgrader->skin->theme_info;
				$upgrader = new \Theme_Upgrader( $skin = new \Bulk_Theme_Upgrader_Skin() );
				$upgrader->skin->theme_info = $_upgrader->skin->theme_info;
			}

		/*
		 * Get repo for remote install update process.
		 */
		if ( ! empty( self::$options['github_updater_install_repo'] ) ) {
			$repo = self::$options['github_updater_install_repo'];
		}

		/*
		 * Get/set $repo for updating.
		 */
		if ( empty( $repo ) ) {
			$updates = $this->_get_updating_repos();
			foreach ( $updates as $extended => $update ) {

				/*
				 * Plugin renaming.
				 */
				if ( $upgrader instanceof \Plugin_Upgrader ) {

					if ( $upgrader->skin instanceof \Plugin_Upgrader_Skin &&
					     $update === dirname( $upgrader->skin->plugin ) ||
					     $extended === dirname( $upgrader->skin->plugin )
					) {
						$matched = true;
					} elseif ( $upgrader->skin instanceof \Bulk_Plugin_Upgrader_Skin ) {
						foreach ( self::$git_servers as $git ) {
							$header = $this->parse_header_uri( $upgrader->skin->plugin_info[ $git . ' Plugin URI' ] );
							if ( $update === $header['repo'] ) {
								$matched = true;
								continue;
							}
						}
					}

					if ( $matched ) {
						if ( ( ! defined( 'GITHUB_UPDATER_EXTENDED_NAMING' ) ||
						       ( defined( 'GITHUB_UPDATER_EXTENDED_NAMING' ) && ! GITHUB_UPDATER_EXTENDED_NAMING ) ) ||
						     ( $this->config[ $update ]->dot_org &&
						       ( 'master' === $this->tag ||
						         ( ! $this->tag && 'master' === $this->config[ $update ]->branch ) ) )
						) {
							$repo = $update;
						} else {
							$repo = $extended;
						}
						break;
					}
				}

				/*
				 * Theme renaming.
				 */
				if ( $upgrader instanceof \Theme_Upgrader &&
				     ( ( $upgrader->skin instanceof \Bulk_Theme_Upgrader_Skin &&
				         $update === $upgrader->skin->theme_info->stylesheet ) ||
				       ( $upgrader->skin instanceof \Theme_Upgrader_Skin &&
				         $update === $upgrader->skin->theme ) )
				) {
					$repo = $update;
					break;
				}
			}

			/*
			 * Return already corrected $source or wp.org $source.
			 */
			if ( empty( $repo ) ) {
				return $source;
			}
		}

		$corrected_source = trailingslashit( $remote_source ) . trailingslashit( $repo );

		$upgrader->skin->feedback(
			sprintf(
				__( 'Renaming %1$s to %2$s', 'github-updater' ) . '&#8230;',
				'<span class="code">' . $source_base . '</span>',
				'<span class="code">' . basename( $corrected_source ) . '</span>'
			)
		);

		/*
		 * If we can rename, do so and return the new name.
		 */
		if ( $wp_filesystem->move( $source, $corrected_source, true ) ) {
			$upgrader->skin->feedback( __( 'Rename successful', 'github-updater' ) . '&#8230;' );
			return $corrected_source;
		}

		/*
		 * Otherwise, return an error.
		 */
		$upgrader->skin->feedback( __( 'Unable to rename downloaded repository.', 'github-updater' ) );
		return new \WP_Error();
	}

	/**
	 * Get dashboard update requested repos and return array of slugs.
	 *
	 * @return array
	 */
||||||||	public function upgrader_source_selection( $source, $remote_source , $upgrader ) {

		require_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php';
		global $wp_filesystem;
		$repo        = null;
		$matched     = false;
		$source_base = basename( $source );

		/*
		 * Check for upgrade process, return if both are false or
		 * not of same updater.
		 */
		if ( ( ! $upgrader instanceof \Plugin_Upgrader && ! $upgrader instanceof \Theme_Upgrader ) ||
		     ( $upgrader instanceof \Plugin_Upgrader && ! $this instanceof Plugin ) ||
		     ( $upgrader instanceof \Theme_Upgrader  && ! $this instanceof Theme )
		) {
			return $source;
		}

		/*
		 * Re-create $upgrader object for iThemes Sync
		 * and possibly other remote upgrade services.
		 */
			if ( $upgrader instanceof \Plugin_Upgrader &&
			     $upgrader->skin instanceof \Bulk_Plugin_Upgrader_Skin
			) {
				$_upgrader = new \Plugin_Upgrader( $skin = new \Bulk_Plugin_Upgrader_Skin() );
				$_upgrader->skin->plugin_info = $upgrader->skin->plugin_info;
				$upgrader = new \Plugin_Upgrader( $skin = new \Bulk_Plugin_Upgrader_Skin() );
				$upgrader->skin->plugin_info = $_upgrader->skin->plugin_info;
			}
			if ( $upgrader instanceof \Theme_Upgrader &&
			     $upgrader->skin instanceof \Bulk_Theme_Upgrader_Skin
			) {
				$_upgrader = new \Theme_Upgrader( $skin = new \Bulk_Theme_Upgrader_Skin() );
				$_upgrader->skin->theme_info = $upgrader->skin->theme_info;
				$upgrader = new \Theme_Upgrader( $skin = new \Bulk_Theme_Upgrader_Skin() );
				$upgrader->skin->theme_info = $_upgrader->skin->theme_info;
			}

		/*
		 * Get repo for remote install update process.
		 */
		if ( ! empty( self::$options['github_updater_install_repo'] ) ) {
			$repo = self::$options['github_updater_install_repo'];
		}

		/*
		 * Get/set $repo for updating.
		 */
		if ( empty( $repo ) ) {
			$updates = $this->_get_updating_repos();
			foreach ( $updates as $extended => $update ) {

				/*
				 * Plugin renaming.
				 */
				if ( $upgrader instanceof \Plugin_Upgrader ) {

					if ( $upgrader->skin instanceof \Plugin_Upgrader_Skin &&
					     $update === dirname( $upgrader->skin->plugin ) ||
					     $extended === dirname( $upgrader->skin->plugin )
					) {
						$matched = true;
					} elseif ( $upgrader->skin instanceof \Bulk_Plugin_Upgrader_Skin ) {
						foreach ( self::$git_servers as $git ) {
							$header = $this->parse_header_uri( $upgrader->skin->plugin_info[ $git . ' Plugin URI' ] );
							if ( $update === $header['repo'] ) {
								$matched = true;
								continue;
							}
						}
					}

					if ( $matched ) {
						if ( ( ! defined( 'GITHUB_UPDATER_EXTENDED_NAMING' ) ||
						       ( defined( 'GITHUB_UPDATER_EXTENDED_NAMING' ) && ! GITHUB_UPDATER_EXTENDED_NAMING ) ) ||
						     ( $this->config[ $update ]->dot_org &&
						       ( 'master' === $this->tag ||
						         ( ! $this->tag && 'master' === $this->config[ $update ]->branch ) ) )
						) {
							$repo = $update;
						} else {
							$repo = $extended;
						}
						break;
					}
				}

				/*
				 * Theme renaming.
				 */
				if ( $upgrader instanceof \Theme_Upgrader &&
				     ( ( $upgrader->skin instanceof \Bulk_Theme_Upgrader_Skin &&
				         $update === $upgrader->skin->theme_info->stylesheet ) ||
				       ( $upgrader->skin instanceof \Theme_Upgrader_Skin &&
				         $update === $upgrader->skin->theme ) )
				) {
					$repo = $update;
					break;
				}
			}

			/*
			 * Return already corrected $source or wp.org $source.
			 */
			if ( empty( $repo ) ) {
				return $source;
			}
		}

		$corrected_source = trailingslashit( $remote_source ) . trailingslashit( $repo );

		$upgrader->skin->feedback(
			sprintf(
				__( 'Renaming %1$s to %2$s', 'github-updater' ) . '&#8230;',
				'<span class="code">' . $source_base . '</span>',
				'<span class="code">' . basename( $corrected_source ) . '</span>'
			)
		);

		/*
		 * If we can rename, do so and return the new name.
		 */
		if ( $wp_filesystem->move( $source, $corrected_source, true ) ) {
			$upgrader->skin->feedback( __( 'Rename successful', 'github-updater' ) . '&#8230;' );
			return $corrected_source;
		}

		/*
		 * Otherwise, return an error.
		 */
		$upgrader->skin->feedback( __( 'Unable to rename downloaded repository.', 'github-updater' ) );
		return new \WP_Error();
	}

	/**
	 * Get dashboard update requested repos and return array of slugs.
	 *
	 * @return array
	 */
||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_INCLUDE_OR_EVAL
        (AST_BINARY_OP
            (AST_CONST)
            (SCALAR)))
    (AST_GLOBAL
        (AST_VAR))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CALL
            (
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR)))
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR))))
                    (AST_BINARY_OP
                        (AST_INSTANCEOF
                            (AST_VAR))
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR)))))
                (AST_BINARY_OP
                    (AST_INSTANCEOF
                        (AST_VAR))
                    (AST_UNARY_OP
                        (AST_INSTANCEOF
                            (AST_VAR)))))
            (
                (AST_RETURN
                    (AST_VAR)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_INSTANCEOF
                    (AST_VAR))
                (AST_UNARY_OP
                    (AST_INSTANCEOF
                        (AST_PROP
                            (AST_VAR)))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_INSTANCEOF
                    (AST_VAR))
                (AST_UNARY_OP
                    (AST_INSTANCEOF
                        (AST_PROP
                            (AST_VAR)))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_EMPTY
                    (AST_DIM
                        (AST_STATIC_PROP)
                        (SCALAR))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_DIM
                        (AST_STATIC_PROP)
                        (SCALAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_EMPTY
                (AST_VAR))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_VAR)))
                (AST_FOREACH
                    (AST_VAR)
                    (AST_VAR)
                    (AST_VAR)
                    (
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_INSTANCEOF
                                    (AST_VAR))
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_INSTANCEOF
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (AST_BINARY_OP
                                                        (AST_VAR)
                                                        (AST_CALL
                                                            (
                                                                (AST_PROP
                                                                    (AST_PROP
                                                                        (AST_VAR)))))))
                                                (AST_BINARY_OP
                                                    (AST_VAR)
                                                    (AST_CALL
                                                        (
                                                            (AST_PROP
                                                                (AST_PROP
                                                                    (AST_VAR)))))))
                                            (
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_CONST))))
                                        (AST_IF_ELEM
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (
                                                (AST_FOREACH
                                                    (AST_STATIC_PROP)
                                                    (AST_VAR)
                                                    (NULL)
                                                    (
                                                        (AST_ASSIGN
                                                            (AST_VAR)
                                                            (AST_METHOD_CALL
                                                                (AST_VAR)
                                                                (
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_PROP
                                                                                (AST_VAR)))
                                                                        (AST_BINARY_OP
                                                                            (AST_VAR)
                                                                            (SCALAR))))))
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_BINARY_OP
                                                                    (AST_VAR)
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR)))
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))))))))
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_VAR)
                                            (
                                                (AST_IF
                                                    (AST_IF_ELEM
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_UNARY_OP
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR))))
                                                                (AST_BINARY_OP
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR)))
                                                                    (AST_UNARY_OP
                                                                        (AST_CONST))))
                                                            (AST_BINARY_OP
                                                                (AST_PROP
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (AST_VAR)))
                                                                (AST_BINARY_OP
                                                                    (AST_BINARY_OP
                                                                        (SCALAR)
                                                                        (AST_PROP
                                                                            (AST_VAR)))
                                                                    (AST_BINARY_OP
                                                                        (AST_UNARY_OP
                                                                            (AST_PROP
                                                                                (AST_VAR)))
                                                                        (AST_BINARY_OP
                                                                            (SCALAR)
                                                                            (AST_PROP
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (AST_VAR))))))))
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_VAR)
                                                                (AST_VAR))))
                                                    (AST_IF_ELEM
                                                        (NULL)
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_VAR)
                                                                (AST_VAR)))))
                                                (AST_BREAK
                                                    (NULL))))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_BINARY_OP
                                    (AST_INSTANCEOF
                                        (AST_VAR))
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (AST_BINARY_OP
                                                (AST_VAR)
                                                (AST_PROP
                                                    (AST_PROP
                                                        (AST_PROP
                                                            (AST_VAR))))))
                                        (AST_BINARY_OP
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (AST_BINARY_OP
                                                (AST_VAR)
                                                (AST_PROP
                                                    (AST_PROP
                                                        (AST_VAR)))))))
                                (
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_BREAK
                                        (NULL)))))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_EMPTY
                            (AST_VAR))
                        (
                            (AST_RETURN
                                (AST_VAR))))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_BINARY_OP
            (AST_CALL
                (
                    (AST_VAR)))
            (AST_CALL
                (
                    (AST_VAR)))))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR))
        (
            (AST_CALL
                (
                    (AST_BINARY_OP
                        (AST_CALL
                            (
                                (SCALAR)
                                (SCALAR)))
                        (SCALAR))
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_VAR))
                        (SCALAR))
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_CALL
                                (
                                    (AST_VAR))))
                        (SCALAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR)
                    (AST_VAR)
                    (AST_CONST)))
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (AST_BINARY_OP
                            (AST_CALL
                                (
                                    (SCALAR)
                                    (SCALAR)))
                            (SCALAR))))
                (AST_RETURN
                    (AST_VAR)))))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR))
        (
            (AST_CALL
                (
                    (SCALAR)
                    (SCALAR)))))
    (AST_RETURN
        (AST_NEW)))||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_INCLUDE_OR_EVAL
        (AST_BINARY_OP
            (AST_CONST)
            (SCALAR)))
    (AST_GLOBAL
        (AST_VAR))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CONST))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CALL
            (
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR)))
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR))))
                    (AST_BINARY_OP
                        (AST_INSTANCEOF
                            (AST_VAR))
                        (AST_UNARY_OP
                            (AST_INSTANCEOF
                                (AST_VAR)))))
                (AST_BINARY_OP
                    (AST_INSTANCEOF
                        (AST_VAR))
                    (AST_UNARY_OP
                        (AST_INSTANCEOF
                            (AST_VAR)))))
            (
                (AST_RETURN
                    (AST_VAR)))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_INSTANCEOF
                    (AST_VAR))
                (AST_INSTANCEOF
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_INSTANCEOF
                    (AST_VAR))
                (AST_INSTANCEOF
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR))))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_ASSIGN
                                (AST_VAR)
                                (AST_NEW)))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_EMPTY
                    (AST_DIM
                        (AST_STATIC_PROP)
                        (SCALAR))))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_DIM
                        (AST_STATIC_PROP)
                        (SCALAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_EMPTY
                (AST_VAR))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_METHOD_CALL
                        (AST_VAR)))
                (AST_FOREACH
                    (AST_VAR)
                    (AST_VAR)
                    (AST_VAR)
                    (
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_INSTANCEOF
                                    (AST_VAR))
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (AST_BINARY_OP
                                                    (AST_INSTANCEOF
                                                        (AST_PROP
                                                            (AST_VAR)))
                                                    (AST_BINARY_OP
                                                        (AST_VAR)
                                                        (AST_CALL
                                                            (
                                                                (AST_PROP
                                                                    (AST_PROP
                                                                        (AST_VAR)))))))
                                                (AST_BINARY_OP
                                                    (AST_VAR)
                                                    (AST_CALL
                                                        (
                                                            (AST_PROP
                                                                (AST_PROP
                                                                    (AST_VAR)))))))
                                            (
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_CONST))))
                                        (AST_IF_ELEM
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (
                                                (AST_FOREACH
                                                    (AST_STATIC_PROP)
                                                    (AST_VAR)
                                                    (NULL)
                                                    (
                                                        (AST_ASSIGN
                                                            (AST_VAR)
                                                            (AST_METHOD_CALL
                                                                (AST_VAR)
                                                                (
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_PROP
                                                                                (AST_VAR)))
                                                                        (AST_BINARY_OP
                                                                            (AST_VAR)
                                                                            (SCALAR))))))
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_BINARY_OP
                                                                    (AST_VAR)
                                                                    (AST_DIM
                                                                        (AST_VAR)
                                                                        (SCALAR)))
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_CONST))
                                                                    (AST_CONTINUE
                                                                        (NULL))))))))))
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_VAR)
                                            (
                                                (AST_IF
                                                    (AST_IF_ELEM
                                                        (AST_BINARY_OP
                                                            (AST_BINARY_OP
                                                                (AST_UNARY_OP
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR))))
                                                                (AST_BINARY_OP
                                                                    (AST_CALL
                                                                        (
                                                                            (SCALAR)))
                                                                    (AST_UNARY_OP
                                                                        (AST_CONST))))
                                                            (AST_BINARY_OP
                                                                (AST_PROP
                                                                    (AST_DIM
                                                                        (AST_PROP
                                                                            (AST_VAR))
                                                                        (AST_VAR)))
                                                                (AST_BINARY_OP
                                                                    (AST_BINARY_OP
                                                                        (SCALAR)
                                                                        (AST_PROP
                                                                            (AST_VAR)))
                                                                    (AST_BINARY_OP
                                                                        (AST_UNARY_OP
                                                                            (AST_PROP
                                                                                (AST_VAR)))
                                                                        (AST_BINARY_OP
                                                                            (SCALAR)
                                                                            (AST_PROP
                                                                                (AST_DIM
                                                                                    (AST_PROP
                                                                                        (AST_VAR))
                                                                                    (AST_VAR))))))))
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_VAR)
                                                                (AST_VAR))))
                                                    (AST_IF_ELEM
                                                        (NULL)
                                                        (
                                                            (AST_ASSIGN
                                                                (AST_VAR)
                                                                (AST_VAR)))))
                                                (AST_BREAK
                                                    (NULL))))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_BINARY_OP
                                    (AST_INSTANCEOF
                                        (AST_VAR))
                                    (AST_BINARY_OP
                                        (AST_BINARY_OP
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (AST_BINARY_OP
                                                (AST_VAR)
                                                (AST_PROP
                                                    (AST_PROP
                                                        (AST_PROP
                                                            (AST_VAR))))))
                                        (AST_BINARY_OP
                                            (AST_INSTANCEOF
                                                (AST_PROP
                                                    (AST_VAR)))
                                            (AST_BINARY_OP
                                                (AST_VAR)
                                                (AST_PROP
                                                    (AST_PROP
                                                        (AST_VAR)))))))
                                (
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_VAR))
                                    (AST_BREAK
                                        (NULL)))))))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_EMPTY
                            (AST_VAR))
                        (
                            (AST_RETURN
                                (AST_VAR))))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_BINARY_OP
            (AST_CALL
                (
                    (AST_VAR)))
            (AST_CALL
                (
                    (AST_VAR)))))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR))
        (
            (AST_CALL
                (
                    (AST_BINARY_OP
                        (AST_CALL
                            (
                                (SCALAR)
                                (SCALAR)))
                        (SCALAR))
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_VAR))
                        (SCALAR))
                    (AST_BINARY_OP
                        (AST_BINARY_OP
                            (SCALAR)
                            (AST_CALL
                                (
                                    (AST_VAR))))
                        (SCALAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_VAR)
                (
                    (AST_VAR)
                    (AST_VAR)
                    (AST_CONST)))
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (AST_BINARY_OP
                            (AST_CALL
                                (
                                    (SCALAR)
                                    (SCALAR)))
                            (SCALAR))))
                (AST_RETURN
                    (AST_VAR)))))
    (AST_METHOD_CALL
        (AST_PROP
            (AST_VAR))
        (
            (AST_CALL
                (
                    (SCALAR)
                    (SCALAR)))))
    (AST_RETURN
        (AST_NEW)))