   public function DiscussionSummaryQuery() {
      $Perms = $this->CategoryPermissions();
      if($Perms !== TRUE) {
         $this->SQL->WhereIn('d.CategoryID', $Perms);
      }

      $this->SQL
         ->Select('d.InsertUserID', '', 'FirstUserID')
         ->Select('d.DateInserted', '', 'FirstDate')
         ->Select('iu.Name', '', 'FirstName') // <-- Need these for rss!
         //->Select('iup.Name', '', 'FirstPhoto')
         ->Select('fc.Body', '', 'FirstComment') // <-- Need these for rss!
         ->Select('fc.Format', '', 'FirstCommentFormat') // <-- Need these for rss!
         ->Select('lc.DateInserted', '', 'LastDate')
         ->Select('lc.InsertUserID', '', 'LastUserID')
         ->Select('lcu.Name', '', 'LastName')
         //->Select('lcup.Name', '', 'LastPhoto')
         //->Select('lc.Body', '', 'LastBody')
         ->Select("' &rarr; ', pc.Name, ca.Name", 'concat_ws', 'Category')
         ->From('Discussion d')
         ->Join('User iu', 'd.InsertUserID = iu.UserID', 'left') // First comment author is also the discussion insertuserid
         //->Join('Photo iup', 'iu.PhotoID = iup.PhotoID', 'left') // First Photo
         ->Join('Comment fc', 'd.FirstCommentID = fc.CommentID', 'left') // First comment
         ->Join('Comment lc', 'd.LastCommentID = lc.CommentID', 'left') // Last comment
         ->Join('User lcu', 'lc.InsertUserID = lcu.UserID', 'left') // Last comment user
         //->Join('Photo lcup', 'lcu.PhotoID = lcup.PhotoID', 'left') // Last Photo
         ->Join('Category ca', 'd.CategoryID = ca.CategoryID', 'left') // Category
         ->Join('Category pc', 'ca.ParentCategoryID = pc.CategoryID', 'left'); // Parent category
         //->Permission('ca', 'CategoryID', 'Vanilla.Discussions.View');

      $this->FireEvent('AfterDiscussionSummaryQuery');
   }

||||||||   public function DiscussionSummaryQuery() {
      $Perms = $this->CategoryPermissions();
      if($Perms !== TRUE) {
         $this->SQL->WhereIn('d.CategoryID', $Perms);
      }

      $this->SQL
         ->Select('d.InsertUserID', '', 'FirstUserID')
         ->Select('d.DateInserted', '', 'FirstDate')
         ->Select('iu.Name', '', 'FirstName') // <-- Need these for rss!
         ->Select('iup.Name', '', 'FirstPhoto')
         ->Select('fc.Body', '', 'FirstComment') // <-- Need these for rss!
         ->Select('fc.Format', '', 'FirstCommentFormat') // <-- Need these for rss!
         ->Select('lc.DateInserted', '', 'LastDate')
         ->Select('lc.InsertUserID', '', 'LastUserID')
         ->Select('lcu.Name', '', 'LastName')
         //->Select('lcup.Name', '', 'LastPhoto')
         //->Select('lc.Body', '', 'LastBody')
         ->Select("' &rarr; ', pc.Name, ca.Name", 'concat_ws', 'Category')
         ->From('Discussion d')
         ->Join('User iu', 'd.InsertUserID = iu.UserID', 'left') // First comment author is also the discussion insertuserid
         ->Join('Photo iup', 'iu.PhotoID = iup.PhotoID', 'left') // First Photo
         ->Join('Comment fc', 'd.FirstCommentID = fc.CommentID', 'left') // First comment
         ->Join('Comment lc', 'd.LastCommentID = lc.CommentID', 'left') // Last comment
         ->Join('User lcu', 'lc.InsertUserID = lcu.UserID', 'left') // Last comment user
         //->Join('Photo lcup', 'lcu.PhotoID = lcup.PhotoID', 'left') // Last Photo
         ->Join('Category ca', 'd.CategoryID = ca.CategoryID', 'left') // Category
         ->Join('Category pc', 'ca.ParentCategoryID = pc.CategoryID', 'left'); // Parent category
         //->Permission('ca', 'CategoryID', 'Vanilla.Discussions.View');

      $this->FireEvent('AfterDiscussionSummaryQuery');
   }

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_VAR)
                (AST_CONST))
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR))))))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_PROP
                                                                        (AST_VAR))
                                                                    (
                                                                        (SCALAR)
                                                                        (SCALAR)
                                                                        (SCALAR)))
                                                                (
                                                                    (SCALAR)
                                                                    (SCALAR)
                                                                    (SCALAR)))
                                                            (
                                                                (SCALAR)
                                                                (SCALAR)
                                                                (SCALAR)))
                                                        (
                                                            (SCALAR)
                                                            (SCALAR)
                                                            (SCALAR)))
                                                    (
                                                        (SCALAR)
                                                        (SCALAR)
                                                        (SCALAR)))
                                                (
                                                    (SCALAR)
                                                    (SCALAR)
                                                    (SCALAR)))
                                            (
                                                (SCALAR)
                                                (SCALAR)
                                                (SCALAR)))
                                        (
                                            (SCALAR)
                                            (SCALAR)
                                            (SCALAR)))
                                    (
                                        (SCALAR)
                                        (SCALAR)
                                        (SCALAR)))
                                (
                                    (SCALAR)))
                            (
                                (SCALAR)
                                (SCALAR)
                                (SCALAR)))
                        (
                            (SCALAR)
                            (SCALAR)
                            (SCALAR)))
                    (
                        (SCALAR)
                        (SCALAR)
                        (SCALAR)))
                (
                    (SCALAR)
                    (SCALAR)
                    (SCALAR)))
            (
                (SCALAR)
                (SCALAR)
                (SCALAR)))
        (
            (SCALAR)
            (SCALAR)
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_VAR)
                (AST_CONST))
            (
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (SCALAR)
                        (AST_VAR))))))
    (AST_METHOD_CALL
        (AST_METHOD_CALL
            (AST_METHOD_CALL
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_METHOD_CALL
                            (AST_METHOD_CALL
                                (AST_METHOD_CALL
                                    (AST_METHOD_CALL
                                        (AST_METHOD_CALL
                                            (AST_METHOD_CALL
                                                (AST_METHOD_CALL
                                                    (AST_METHOD_CALL
                                                        (AST_METHOD_CALL
                                                            (AST_METHOD_CALL
                                                                (AST_METHOD_CALL
                                                                    (AST_METHOD_CALL
                                                                        (AST_METHOD_CALL
                                                                            (AST_PROP
                                                                                (AST_VAR))
                                                                            (
                                                                                (SCALAR)
                                                                                (SCALAR)
                                                                                (SCALAR)))
                                                                        (
                                                                            (SCALAR)
                                                                            (SCALAR)
                                                                            (SCALAR)))
                                                                    (
                                                                        (SCALAR)
                                                                        (SCALAR)
                                                                        (SCALAR)))
                                                                (
                                                                    (SCALAR)
                                                                    (SCALAR)
                                                                    (SCALAR)))
                                                            (
                                                                (SCALAR)
                                                                (SCALAR)
                                                                (SCALAR)))
                                                        (
                                                            (SCALAR)
                                                            (SCALAR)
                                                            (SCALAR)))
                                                    (
                                                        (SCALAR)
                                                        (SCALAR)
                                                        (SCALAR)))
                                                (
                                                    (SCALAR)
                                                    (SCALAR)
                                                    (SCALAR)))
                                            (
                                                (SCALAR)
                                                (SCALAR)
                                                (SCALAR)))
                                        (
                                            (SCALAR)
                                            (SCALAR)
                                            (SCALAR)))
                                    (
                                        (SCALAR)))
                                (
                                    (SCALAR)
                                    (SCALAR)
                                    (SCALAR)))
                            (
                                (SCALAR)
                                (SCALAR)
                                (SCALAR)))
                        (
                            (SCALAR)
                            (SCALAR)
                            (SCALAR)))
                    (
                        (SCALAR)
                        (SCALAR)
                        (SCALAR)))
                (
                    (SCALAR)
                    (SCALAR)
                    (SCALAR)))
            (
                (SCALAR)
                (SCALAR)
                (SCALAR)))
        (
            (SCALAR)
            (SCALAR)
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR))))