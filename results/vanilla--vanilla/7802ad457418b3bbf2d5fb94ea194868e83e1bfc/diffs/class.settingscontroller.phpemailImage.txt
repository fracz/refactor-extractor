||||||||    public function emailImage($tk) {
        $this->addJsFile('email.js');
        $this->addSideMenu('dashboard/settings/email');
        $session = Gdn::session();
        if ($session->validateTransientKey($tk) && $session->checkPermission('Garden.Community.Manage')) {
            $this->permission('Garden.Community.Manage');
            $upload = new Gdn_UploadImage();
            $image = c('Garden.Email.Styles.Image');
            $this->Form = new Gdn_Form();
            $validation = new Gdn_Validation();
            $configurationModel = new Gdn_ConfigurationModel($validation);
            // Set the model on the form.
            $this->Form->setModel($configurationModel);
            if ($this->Form->authenticatedPostBack() !== false) {
                try {
                    // Validate the upload
                    $tmpImage = $upload->validateUpload('EmailImage', false);
                    if ($tmpImage) {
                        // Generate the target image name
                        $targetImage = $upload->generateTargetName(PATH_UPLOADS);
                        $imageBaseName = pathinfo($targetImage, PATHINFO_BASENAME);
                        // Delete any previously uploaded images.
                        if ($image) {
                            $upload->delete($image);
                        }
                        // Save the uploaded image
                        $parts = $upload->saveImageAs(
                            $tmpImage,
                            $imageBaseName,
                            c('Garden.Email.Styles.Image.MaxWidth', 800),
                            c('Garden.Email.Styles.Image.MaxHeight', 400)
                        );

                        $imageBaseName = $parts['SaveName'];
                        saveToConfig('Garden.Email.Styles.Image', $imageBaseName);
                        $this->setData('EmailImage', Gdn_UploadImage::url($imageBaseName));
                    }
                } catch (Exception $ex) {
                }
            }
            $this->render();
        }
    }

    /**
     * Main dashboard.
     *
     * You can override this method with a method in your plugin named
     * SettingsController_Index_Create. You can hook into it with methods named
     * SettingsController_Index_Before and SettingsController_Index_After.
     *
     * @since 2.0.0
     * @access public
     */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL))
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (AST_VAR)))
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (SCALAR))))
            (
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (SCALAR)))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CALL
                        (
                            (SCALAR))))
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (AST_NEW))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW))
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_NEW
                        (
                            (AST_VAR))))
                (AST_METHOD_CALL
                    (AST_PROP
                        (AST_VAR))
                    (
                        (AST_VAR)))
                (AST_IF
                    (AST_IF_ELEM
                        (AST_BINARY_OP
                            (AST_METHOD_CALL
                                (AST_PROP
                                    (AST_VAR)))
                            (AST_CONST))
                        (
                            (AST_TRY
                                (
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_METHOD_CALL
                                            (AST_VAR)
                                            (
                                                (SCALAR)
                                                (AST_CONST))))
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_VAR)
                                            (
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)
                                                        (
                                                            (AST_CONST))))
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_CALL
                                                        (
                                                            (AST_VAR)
                                                            (AST_CONST))))
                                                (AST_IF
                                                    (AST_IF_ELEM
                                                        (AST_VAR)
                                                        (
                                                            (AST_METHOD_CALL
                                                                (AST_VAR)
                                                                (
                                                                    (AST_VAR))))))
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_METHOD_CALL
                                                        (AST_VAR)
                                                        (
                                                            (AST_VAR)
                                                            (AST_VAR)
                                                            (AST_CALL
                                                                (
                                                                    (SCALAR)
                                                                    (SCALAR)))
                                                            (AST_CALL
                                                                (
                                                                    (SCALAR)
                                                                    (SCALAR))))))
                                                (AST_ASSIGN
                                                    (AST_VAR)
                                                    (AST_DIM
                                                        (AST_VAR)
                                                        (SCALAR)))
                                                (AST_CALL
                                                    (
                                                        (SCALAR)
                                                        (AST_VAR)))
                                                (AST_METHOD_CALL
                                                    (AST_VAR)
                                                    (
                                                        (SCALAR)
                                                        (AST_STATIC_CALL
                                                            (
                                                                (AST_VAR)))))))))
                                (AST_CATCH_LIST
                                    (AST_CATCH
                                        (AST_NAME_LIST)
                                        (AST_VAR)))
                                (NULL)))))
                (AST_METHOD_CALL
                    (AST_VAR))))))