commit 537d588726f0ddc1a3a0327156912a0ec4089abb
Author: Donquixote <marjunebatac@gmailcom>
Date:   Sat Oct 29 18:00:01 2016 +0800

    refactoring code to reduce cyclomatic complexit

    Signed-off-by: Roeland Jago Douma <roeland@famdouma.nl>