commit 7eef380d8acf30534220b03d3c024b8e3123c279
Author: Taylor Otwell <taylorotwell@gmail.com>
Date:   Tue Sep 6 22:04:52 2011 -0500

    more refactoring and dependency injection.