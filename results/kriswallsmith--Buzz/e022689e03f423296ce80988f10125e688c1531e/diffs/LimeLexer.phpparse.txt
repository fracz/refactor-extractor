  public function parse($content)
  {
    if (is_readable($content))
    {
      $content = file_get_contents($content);
    }

    $this->continue = true;
    $this->currentClass = array();
    $this->inClassDeclaration = false;
    $this->currentFunction = array();
    $this->inFunctionDeclaration = false;
    $this->inAssignment = false;
    $this->endOfCurrentExpr = true;
    $this->currentLine = 1;

    $tokens = token_get_all($content);
    $openBraces = 0;
    foreach ($tokens as $token)
    {
      if (is_string($token))
      {
        switch ($token)
        {
          case '{':
            ++$openBraces;
            $this->inClassDeclaration = false;
            $this->inFunctionDeclaration = false;
            break;
          case ';':
            // abstract functions
            if ($this->inFunctionDeclaration)
            {
              $this->inFunctionDeclaration = false;
              unset($this->currentFunction[$openBraces]);
            }
            $this->endOfCurrentExpr = true;
            break;
          case '}':
            $this->endOfCurrentExpr = true;
            break;
          case '=':
            $this->endOfCurrentExpr = false;
            $this->inAssignment = true;
            break;
        }


        if ($this->endOfCurrentExpr)
        {
          $this->inAssignment = false;
        }

        $this->beforeProcess($token, null);
        $this->process($token, null);
        $this->afterProcess($token, null);

        switch ($token)
        {
          case '}':
            --$openBraces;
            if (array_key_exists($openBraces, $this->currentClass))
            {
              unset($this->currentClass[$openBraces]);
            }
            if (array_key_exists($openBraces, $this->currentFunction))
            {
              unset($this->currentFunction[$openBraces]);
            }
            break;
        }
      }
      else
      {
        list($id, $text) = $token;

        switch ($id)
        {
          case T_CURLY_OPEN:
          case T_DOLLAR_OPEN_CURLY_BRACES:
            ++$openBraces;
            break;
          case T_OPEN_TAG:
          case T_CLOSE_TAG:
            $this->endOfCurrentExpr = true;
            $this->currentLine += count(explode("\n", $text)) - 1;
            break;
          case T_WHITESPACE:
          case T_START_HEREDOC:
          case T_CONSTANT_ENCAPSED_STRING:
          case T_ENCAPSED_AND_WHITESPACE:
          case T_COMMENT:
          case T_DOC_COMMENT:
            $this->currentLine += count(explode("\n", $text)) - 1;
            break;
          case T_ABSTRACT:
            if ($this->inClass())
            {
              $this->currentFunction[$openBraces] = null;
              $this->inFunctionDeclaration = true;
            }
            else
            {
              $this->currentClass[$openBraces] = null;
              $this->inClassDeclaration = true;
            }
            break;
          case T_INTERFACE:
          case T_CLASS:
            $this->currentClass[$openBraces] = null;
            $this->inClassDeclaration = true;
            break;
          case T_FUNCTION:
            $this->currentFunction[$openBraces] = null;
            $this->inFunctionDeclaration = true;
            break;
          case T_STRING:
            if (array_key_exists($openBraces, $this->currentClass) && is_null($this->currentClass[$openBraces]))
            {
              $this->currentClass[$openBraces] = $text;
            }
            if (array_key_exists($openBraces, $this->currentFunction) && is_null($this->currentFunction[$openBraces]))
            {
              $this->currentFunction[$openBraces] = $text;
            }
            break;
          case T_AND_EQUAL:
          case T_BREAK:
          case T_CASE:
          case T_CATCH:
          case T_CLONE:
          case T_CONCAT_EQUAL:
          case T_CONTINUE:
          case T_DEC:
          case T_DECLARE:
          case T_DEFAULT:
          case T_DIV_EQUAL:
          case T_DO:
          case T_ECHO:
          case T_ELSEIF:
          case T_EMPTY:
          case T_ENDDECLARE:
          case T_ENDFOR:
          case T_ENDFOREACH:
          case T_ENDIF:
          case T_ENDSWITCH:
          case T_ENDWHILE:
          case T_END_HEREDOC:
          case T_EVAL:
          case T_EXIT:
          case T_FOR:
          case T_FOREACH:
          case T_GLOBAL:
          case T_IF:
          case T_INC:
          case T_INCLUDE:
          case T_INCLUDE_ONCE:
          case T_INSTANCEOF:
          case T_ISSET:
          case T_IS_EQUAL:
          case T_IS_GREATER_OR_EQUAL:
          case T_IS_IDENTICAL:
          case T_IS_NOT_EQUAL:
          case T_IS_NOT_IDENTICAL:
          case T_IS_SMALLER_OR_EQUAL:
          case T_LIST:
          case T_LOGICAL_AND:
          case T_LOGICAL_OR:
          case T_LOGICAL_XOR:
          case T_MINUS_EQUAL:
          case T_MOD_EQUAL:
          case T_MUL_EQUAL:
          case T_NEW:
          case T_OBJECT_OPERATOR:
          case T_OR_EQUAL:
          case T_PLUS_EQUAL:
          case T_PRINT:
          case T_REQUIRE:
          case T_REQUIRE_ONCE:
          case T_RETURN:
          case T_SL:
          case T_SL_EQUAL:
          case T_SR:
          case T_SR_EQUAL:
          case T_SWITCH:
          case T_THROW:
          case T_TRY:
          case T_UNSET:
          case T_UNSET_CAST:
          case T_USE:
          case T_WHILE:
          case T_XOR_EQUAL:
            $this->endOfCurrentExpr = false;
            break;
        }

        if ($this->endOfCurrentExpr)
        {
          $this->inAssignment = false;
        }

        $this->beforeProcess($text, $id);
        $this->process($text, $id);
        $this->afterProcess($text, $id);
      }

      if (!$this->continue)
      {
        break;
      }
    }

    return $this->getResult();
  }

||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_CALL
                (
                    (AST_VAR)))
            (
                (AST_ASSIGN
                    (AST_VAR)
                    (AST_CALL
                        (
                            (AST_VAR)))))))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_ARRAY))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (AST_CONST))
    (AST_ASSIGN
        (AST_PROP
            (AST_VAR))
        (SCALAR))
    (AST_ASSIGN
        (AST_VAR)
        (AST_CALL
            (
                (AST_VAR))))
    (AST_ASSIGN
        (AST_VAR)
        (SCALAR))
    (AST_FOREACH
        (AST_VAR)
        (AST_VAR)
        (NULL)
        (
            (AST_IF
                (AST_IF_ELEM
                    (AST_CALL
                        (
                            (AST_VAR)))
                    (
                        (AST_SWITCH
                            (AST_VAR)
                            (AST_SWITCH_LIST
                                (AST_SWITCH_CASE
                                    (SCALAR)
                                    (
                                        (AST_PRE_INC
                                            (AST_VAR))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (SCALAR)
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (AST_CONST))
                                                    (AST_UNSET
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))))))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (SCALAR)
                                    (
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (SCALAR)
                                    (
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (
                                    (AST_ASSIGN
                                        (AST_PROP
                                            (AST_VAR))
                                        (AST_CONST)))))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_CONST)))
                        (AST_SWITCH
                            (AST_VAR)
                            (AST_SWITCH_LIST
                                (AST_SWITCH_CASE
                                    (SCALAR)
                                    (
                                        (AST_PRE_DEC
                                            (AST_VAR))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_CALL
                                                    (
                                                        (AST_VAR)
                                                        (AST_PROP
                                                            (AST_VAR))))
                                                (
                                                    (AST_UNSET
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))))))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_CALL
                                                    (
                                                        (AST_VAR)
                                                        (AST_PROP
                                                            (AST_VAR))))
                                                (
                                                    (AST_UNSET
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))))))
                                        (AST_BREAK
                                            (NULL))))))))
                (AST_IF_ELEM
                    (NULL)
                    (
                        (AST_ASSIGN
                            (AST_ARRAY
                                (AST_ARRAY_ELEM
                                    (AST_VAR)
                                    (NULL))
                                (AST_ARRAY_ELEM
                                    (AST_VAR)
                                    (NULL)))
                            (AST_VAR))
                        (AST_SWITCH
                            (AST_VAR)
                            (AST_SWITCH_LIST
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_PRE_INC
                                            (AST_VAR))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_ASSIGN_OP
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_BINARY_OP
                                                (AST_CALL
                                                    (
                                                        (AST_CALL
                                                            (
                                                                (SCALAR)
                                                                (AST_VAR)))))
                                                (SCALAR)))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_ASSIGN_OP
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_BINARY_OP
                                                (AST_CALL
                                                    (
                                                        (AST_CALL
                                                            (
                                                                (SCALAR)
                                                                (AST_VAR)))))
                                                (SCALAR)))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_METHOD_CALL
                                                    (AST_VAR))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))
                                                        (AST_CONST))
                                                    (AST_ASSIGN
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (AST_CONST))))
                                            (AST_IF_ELEM
                                                (NULL)
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))
                                                        (AST_CONST))
                                                    (AST_ASSIGN
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (AST_CONST)))))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_ASSIGN
                                            (AST_DIM
                                                (AST_PROP
                                                    (AST_VAR))
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_CALL
                                                        (
                                                            (AST_VAR)
                                                            (AST_PROP
                                                                (AST_VAR))))
                                                    (AST_CALL
                                                        (
                                                            (AST_DIM
                                                                (AST_PROP
                                                                    (AST_VAR))
                                                                (AST_VAR)))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))
                                                        (AST_VAR)))))
                                        (AST_IF
                                            (AST_IF_ELEM
                                                (AST_BINARY_OP
                                                    (AST_CALL
                                                        (
                                                            (AST_VAR)
                                                            (AST_PROP
                                                                (AST_VAR))))
                                                    (AST_CALL
                                                        (
                                                            (AST_DIM
                                                                (AST_PROP
                                                                    (AST_VAR))
                                                                (AST_VAR)))))
                                                (
                                                    (AST_ASSIGN
                                                        (AST_DIM
                                                            (AST_PROP
                                                                (AST_VAR))
                                                            (AST_VAR))
                                                        (AST_VAR)))))
                                        (AST_BREAK
                                            (NULL))))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST))
                                (AST_SWITCH_CASE
                                    (AST_CONST)
                                    (
                                        (AST_ASSIGN
                                            (AST_PROP
                                                (AST_VAR))
                                            (AST_CONST))
                                        (AST_BREAK
                                            (NULL))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_PROP
                                    (AST_VAR))
                                (
                                    (AST_ASSIGN
                                        (AST_PROP
                                            (AST_VAR))
                                        (AST_CONST)))))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_VAR)))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_VAR)))
                        (AST_METHOD_CALL
                            (AST_VAR)
                            (
                                (AST_VAR)
                                (AST_VAR))))))
            (AST_IF
                (AST_IF_ELEM
                    (AST_UNARY_OP
                        (AST_PROP
                            (AST_VAR)))
                    (
                        (AST_BREAK
                            (NULL)))))))
    (AST_RETURN
        (AST_METHOD_CALL
            (AST_VAR))))||||||||