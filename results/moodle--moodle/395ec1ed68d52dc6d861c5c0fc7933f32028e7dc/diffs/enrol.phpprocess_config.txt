function process_config($config) {

    if (!isset($config->enrol_imsfilelocation)) {
        $config->enrol_imsfilelocation = '';
    }
    set_config('enrol_imsfilelocation', $config->enrol_imsfilelocation);

    if (!isset($config->enrol_logtolocation)) {
        $config->enrol_logtolocation = '';
    }
    set_config('enrol_logtolocation', $config->enrol_logtolocation);

    if (!isset($config->enrol_fixcaseusernames)) {
        $config->enrol_fixcaseusernames = '';
    }
    set_config('enrol_fixcaseusernames', $config->enrol_fixcaseusernames);

    if (!isset($config->enrol_fixcasepersonalnames)) {
        $config->enrol_fixcasepersonalnames = '';
    }
    set_config('enrol_fixcasepersonalnames', $config->enrol_fixcasepersonalnames);

    if (!isset($config->enrol_truncatecoursecodes)) {
        $config->enrol_truncatecoursecodes = 0;
    }
    set_config('enrol_truncatecoursecodes', intval($config->enrol_truncatecoursecodes));

    if (!isset($config->enrol_createnewcourses)) {
        $config->enrol_createnewcourses = '';
    }
    set_config('enrol_createnewcourses', $config->enrol_createnewcourses);

    if (!isset($config->enrol_createnewcategories)) {
        $config->enrol_createnewcategories = '';
    }
    set_config('enrol_createnewcategories', $config->enrol_createnewcategories);

    if (!isset($config->enrol_createnewusers)) {
        $config->enrol_createnewusers = '';
    }
    set_config('enrol_createnewusers', $config->enrol_createnewusers);

    if (!isset($config->enrol_imsdeleteusers)) {
        $config->enrol_imsdeleteusers = '';
    }
    set_config('enrol_imsdeleteusers', $config->enrol_imsdeleteusers);

    if (!isset($config->enrol_mailadmins)) {
        $config->enrol_mailadmins = '';
    }
    set_config('enrol_mailadmins', $config->enrol_mailadmins);

    if (!isset($config->enrol_imsunenrol)) {
        $config->enrol_imsunenrol = '';
    }
    set_config('enrol_imsunenrol', $config->enrol_imsunenrol);

    if (!isset($config->enrol_imssourcedidfallback)) {
        $config->enrol_imssourcedidfallback = '';
    }
    set_config('enrol_imssourcedidfallback', $config->enrol_imssourcedidfallback);

    if (!isset($config->enrol_imscapitafix)) {
        $config->enrol_imscapitafix = '';
    }
    set_config('enrol_imscapitafix', $config->enrol_imscapitafix);

    //Antoni Mas. 07/12/2005. Incloem la opci de la foto dels usuaris
    if (!isset($config->enrol_processphoto)) {
        $config->enrol_processphoto = '';
    }
    set_config('enrol_processphoto', $config->enrol_processphoto);

    if (!isset($config->enrol_imsrestricttarget)) {
        $config->enrol_imsrestricttarget = '';
    }
    set_config('enrol_imsrestricttarget', $config->enrol_imsrestricttarget);


    return true;

}

||||||||function process_config($config) {

    if (!isset($config->enrol_imsfilelocation)) {
        $config->enrol_imsfilelocation = '';
    }
    set_config('enrol_imsfilelocation', $config->enrol_imsfilelocation);

    if (!isset($config->enrol_logtolocation)) {
        $config->enrol_logtolocation = '';
    }
    set_config('enrol_logtolocation', $config->enrol_logtolocation);

    if (!isset($config->enrol_fixcaseusernames)) {
        $config->enrol_fixcaseusernames = '';
    }
    set_config('enrol_fixcaseusernames', $config->enrol_fixcaseusernames);

    if (!isset($config->enrol_fixcasepersonalnames)) {
        $config->enrol_fixcasepersonalnames = '';
    }
    set_config('enrol_fixcasepersonalnames', $config->enrol_fixcasepersonalnames);

    if (!isset($config->enrol_truncatecoursecodes)) {
        $config->enrol_truncatecoursecodes = 0;
    }
    set_config('enrol_truncatecoursecodes', intval($config->enrol_truncatecoursecodes));

    if (!isset($config->enrol_createnewcourses)) {
        $config->enrol_createnewcourses = '';
    }
    set_config('enrol_createnewcourses', $config->enrol_createnewcourses);

    if (!isset($config->enrol_createnewcategories)) {
        $config->enrol_createnewcategories = '';
    }
    set_config('enrol_createnewcategories', $config->enrol_createnewcategories);

    if (!isset($config->enrol_createnewusers)) {
        $config->enrol_createnewusers = '';
    }
    set_config('enrol_createnewusers', $config->enrol_createnewusers);

    if (!isset($config->enrol_imsdeleteusers)) {
        $config->enrol_imsdeleteusers = '';
    }
    set_config('enrol_imsdeleteusers', $config->enrol_imsdeleteusers);

    if (!isset($config->enrol_mailadmins)) {
        $config->enrol_mailadmins = '';
    }
    set_config('enrol_mailadmins', $config->enrol_mailadmins);

    if (!isset($config->enrol_imsunenrol)) {
        $config->enrol_imsunenrol = '';
    }
    set_config('enrol_imsunenrol', $config->enrol_imsunenrol);

    if (!isset($config->enrol_imssourcedidfallback)) {
        $config->enrol_imssourcedidfallback = '';
    }
    set_config('enrol_imssourcedidfallback', $config->enrol_imssourcedidfallback);

    if (!isset($config->enrol_imscapitafix)) {
        $config->enrol_imscapitafix = '';
    }
    set_config('enrol_imscapitafix', $config->enrol_imscapitafix);

    //Antoni Mas. 07/12/2005. Incloem la opci de la foto dels usuaris
    if (!isset($config->enrol_processphoto)) {
        $config->enrol_processphoto = '';
    }
    set_config('enrol_processphoto', $config->enrol_processphoto);

    if (!isset($config->enrol_imsrestricttarget)) {
        $config->enrol_imsrestricttarget = '';
    }
    set_config('enrol_imsrestricttarget', $config->enrol_imsrestricttarget);

    set_config('enrol_ims_prev_md5',  ''); // Forget the MD5 - to force re-processing if we change the config setting
    set_config('enrol_ims_prev_time', ''); // Ditto
    return true;

}

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_CALL
                (
                    (AST_PROP
                        (AST_VAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_RETURN
        (AST_CONST)))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_CALL
                (
                    (AST_PROP
                        (AST_VAR))))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_UNARY_OP
                (AST_ISSET
                    (AST_PROP
                        (AST_VAR))))
            (
                (AST_ASSIGN
                    (AST_PROP
                        (AST_VAR))
                    (SCALAR)))))
    (AST_CALL
        (
            (SCALAR)
            (AST_PROP
                (AST_VAR))))
    (AST_CALL
        (
            (SCALAR)
            (SCALAR)))
    (AST_CALL
        (
            (SCALAR)
            (SCALAR)))
    (AST_RETURN
        (AST_CONST)))