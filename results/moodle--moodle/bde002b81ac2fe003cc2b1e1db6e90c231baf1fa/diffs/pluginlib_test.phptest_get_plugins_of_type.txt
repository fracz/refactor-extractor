    public function test_get_plugins_of_type() {
        $pluginman = testable_plugin_manager::instance();
        $mods = $pluginman->get_plugins_of_type('mod');
        $this->assertInternalType('array', $mods);
        $this->assertCount(5, $mods);
        $this->assertInstanceOf('testable_plugininfo_mod', $mods['foo']);
        $this->assertInstanceOf('testable_plugininfo_mod', $mods['bar']);
        $this->assertInstanceOf('testable_plugininfo_mod', $mods['baz']);
        $this->assertInstanceOf('testable_plugininfo_mod', $mods['qux']);
        $this->assertInstanceOf('testable_plugininfo_mod', $mods['new']);
        $foolishes = $pluginman->get_plugins_of_type('foolish');
        $this->assertCount(2, $foolishes);
        $this->assertInstanceOf('testable_pluginfo_foolish', $foolishes['frog']);
        $this->assertInstanceOf('testable_pluginfo_foolish', $foolishes['hippo']);
        $bazmegs = $pluginman->get_plugins_of_type('bazmeg');
        $this->assertCount(1, $bazmegs);
        $this->assertInstanceOf('testable_pluginfo_bazmeg', $bazmegs['one']);
        $quxcats = $pluginman->get_plugins_of_type('quxcat');
        $this->assertCount(1, $quxcats);
        $this->assertInstanceOf('testable_pluginfo_quxcat', $quxcats['one']);
        $unknown = $pluginman->get_plugins_of_type('muhehe');
        $this->assertSame(array(), $unknown);
    }

||||||||||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (SCALAR)
            (AST_DIM
                (AST_VAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_ARRAY)
            (AST_VAR))))||||||||