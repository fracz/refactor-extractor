    function _is_visible() {
        global $USER;
        /* Can we see this field? Choices are:
           1 - VISIBLE ALL;
           2 - VISIBLE PRIVATE - either we are viewing our own profile or we have required capability;
           3 - VISIBLE NONE - we have the required capability
         */
        return (      ($this->field->visible === PROFILE_VISIBLE_ALL)
                 or ( ($this->field->visible === PROFILE_VISIBLE_PRIVATE)
                      and ($this->userid == $USER->id) )
                 or has_capability('moodle/user:update', get_context_instance(CONTEXT_SYSTEM, SITEID)) );
    }

    /**
     * Check if the field is locked to the current user
     * @return  boolean
     */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_GLOBAL
        (AST_VAR))
    (AST_RETURN
        (AST_BINARY_OP
            (AST_BINARY_OP
                (AST_BINARY_OP
                    (AST_PROP
                        (AST_PROP
                            (AST_VAR)))
                    (AST_CONST))
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (AST_PROP
                            (AST_PROP
                                (AST_VAR)))
                        (AST_CONST))
                    (AST_BINARY_OP
                        (AST_PROP
                            (AST_VAR))
                        (AST_PROP
                            (AST_VAR)))))
            (AST_CALL
                (
                    (SCALAR)
                    (AST_CALL
                        (
                            (AST_CONST)
                            (AST_CONST))))))))||||||||