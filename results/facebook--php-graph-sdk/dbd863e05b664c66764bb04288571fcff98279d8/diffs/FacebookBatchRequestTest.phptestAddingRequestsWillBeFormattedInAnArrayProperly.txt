  public function testAddingRequestsWillBeFormattedInAnArrayProperly()
  {
    $app = new FacebookApp('123', 'foo_secret');
    $batchRequest = new FacebookBatchRequest($app, 'foo_token');

    $requestOne = new FacebookRequest(null, null, 'GET', '/foo');
    $requestTwo = new FacebookRequest(null, null, 'POST', '/bar', ['foo' => 'bar']);
    $requestThree = new FacebookRequest(null, null, 'DELETE', '/baz');

    $batchRequest->add($requestOne);
    $batchRequest->add($requestTwo, 'my-second-request');
    $batchRequest->add($requestThree, 'my-third-request');

    $requests = $batchRequest->getRequests();

    $expectedRequests = [
      [
        'name' => null,
        'request' => $requestOne,
      ],
      [
        'name' => 'my-second-request',
        'request' => $requestTwo,
      ],
      [
        'name' => 'my-third-request',
        'request' => $requestThree,
      ],
    ];
    $this->assertEquals($expectedRequests, $requests);
  }

||||||||  public function testAddingRequestsWillBeFormattedInAnArrayProperly()
  {
    $requests = [
      null => new FacebookRequest(null, null, 'GET', '/foo'),
      'my-second-request' => new FacebookRequest(null, null, 'POST', '/bar', ['foo' => 'bar']),
      'my-third-request' => new FacebookRequest(null, null, 'DELETE', '/baz')
    ];

    $batchRequest = $this->createBatchRequest();
    $batchRequest->add($requests[null]);
    $batchRequest->add($requests['my-second-request'], 'my-second-request');
    $batchRequest->add($requests['my-third-request'], 'my-third-request');

    $formattedRequests = $batchRequest->getRequests();

    $this->assertRequestsMatch($requests, $formattedRequests);
  }

||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (SCALAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_CONST)
                (AST_CONST)
                (SCALAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_CONST)
                (AST_CONST)
                (SCALAR)
                (SCALAR)
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_CONST)
                (AST_CONST)
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (AST_CONST)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (AST_VAR)
                        (SCALAR)))
                (NULL))
            (AST_ARRAY_ELEM
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (AST_VAR)
                        (SCALAR)))
                (NULL))
            (AST_ARRAY_ELEM
                (AST_ARRAY
                    (AST_ARRAY_ELEM
                        (SCALAR)
                        (SCALAR))
                    (AST_ARRAY_ELEM
                        (AST_VAR)
                        (SCALAR)))
                (NULL))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR))))||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_NEW
                    (
                        (AST_CONST)
                        (AST_CONST)
                        (SCALAR)
                        (SCALAR)))
                (AST_CONST))
            (AST_ARRAY_ELEM
                (AST_NEW
                    (
                        (AST_CONST)
                        (AST_CONST)
                        (SCALAR)
                        (SCALAR)
                        (AST_ARRAY
                            (AST_ARRAY_ELEM
                                (SCALAR)
                                (SCALAR)))))
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_NEW
                    (
                        (AST_CONST)
                        (AST_CONST)
                        (SCALAR)
                        (SCALAR)))
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_DIM
                (AST_VAR)
                (AST_CONST))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_DIM
                (AST_VAR)
                (SCALAR))
            (SCALAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_DIM
                (AST_VAR)
                (SCALAR))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR))))