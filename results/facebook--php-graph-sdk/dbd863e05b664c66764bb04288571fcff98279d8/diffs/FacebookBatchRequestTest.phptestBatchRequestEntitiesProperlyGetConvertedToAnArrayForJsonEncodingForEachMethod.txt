  public function testBatchRequestEntitiesProperlyGetConvertedToAnArrayForJsonEncodingForEachMethod()
  {
    $app = new FacebookApp('123', 'foo_secret');

    // GET request
    $batchRequest = new FacebookBatchRequest($app, 'foo_token');
    $batchRequest->add(new FacebookRequest(null, null, 'GET', '/foo', ['foo' => 'bar']), 'foo_name');

    $requests = $batchRequest->getRequests();
    $batchRequestArray = FacebookBatchRequest::requestEntityToBatchArray($requests[0]['request'], $requests[0]['name']);

    $expectedArray = [
      'headers' => $this->requestHeaders,
      'method' => 'GET',
      'relative_url' => '/'.FacebookRequest::getDefaultGraphApiVersion().'/foo?foo=bar&access_token=foo_token&appsecret_proof=df4256903ba4e23636cc142117aa632133d75c642bd2a68955be1443bd14deb9',
      'name' => 'foo_name',
    ];

    $this->assertEquals($expectedArray, $batchRequestArray);

    // POST request
    $batchRequest = new FacebookBatchRequest($app, 'bar_token');
    $batchRequest->add(new FacebookRequest(null, null, 'POST', '/bar', ['bar' => 'baz']), 'bar_name');

    $requests = $batchRequest->getRequests();
    $batchRequestArray = FacebookBatchRequest::requestEntityToBatchArray($requests[0]['request'], $requests[0]['name']);

    $expectedArray = [
      'headers' => $this->requestHeaders,
      'method' => 'POST',
      'relative_url' => '/'.FacebookRequest::getDefaultGraphApiVersion().'/bar',
      'body' => 'bar=baz&access_token=bar_token&appsecret_proof=2ceec40b7b9fd7d38fff1767b766bcc6b1f9feb378febac4612c156e6a8354bd',
      'name' => 'bar_name',
    ];

    $this->assertEquals($expectedArray, $batchRequestArray);

    // DELETE request
    $batchRequest = new FacebookBatchRequest($app, 'bar_token');
    $batchRequest->add(new FacebookRequest(null, null, 'DELETE', '/bar'), 'bar_name');

    $requests = $batchRequest->getRequests();
    $batchRequestArray = FacebookBatchRequest::requestEntityToBatchArray($requests[0]['request'], $requests[0]['name']);

    $expectedArray = [
      'headers' => $this->requestHeaders,
      'method' => 'DELETE',
      'relative_url' => '/'.FacebookRequest::getDefaultGraphApiVersion().'/bar?access_token=bar_token&appsecret_proof=2ceec40b7b9fd7d38fff1767b766bcc6b1f9feb378febac4612c156e6a8354bd',
      'name' => 'bar_name',
    ];

    $this->assertEquals($expectedArray, $batchRequestArray);
  }

||||||||||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (SCALAR)
                (SCALAR))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_NEW
                (
                    (AST_CONST)
                    (AST_CONST)
                    (SCALAR)
                    (SCALAR)
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (SCALAR)))))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL
            (
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR))
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_PROP
                    (AST_VAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (SCALAR)
                        (AST_STATIC_CALL))
                    (SCALAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_NEW
                (
                    (AST_CONST)
                    (AST_CONST)
                    (SCALAR)
                    (SCALAR)
                    (AST_ARRAY
                        (AST_ARRAY_ELEM
                            (SCALAR)
                            (SCALAR)))))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL
            (
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR))
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_PROP
                    (AST_VAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (SCALAR)
                        (AST_STATIC_CALL))
                    (SCALAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_NEW
            (
                (AST_VAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_NEW
                (
                    (AST_CONST)
                    (AST_CONST)
                    (SCALAR)
                    (SCALAR)))
            (SCALAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_VAR)))
    (AST_ASSIGN
        (AST_VAR)
        (AST_STATIC_CALL
            (
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR))
                (AST_DIM
                    (AST_DIM
                        (AST_VAR)
                        (SCALAR))
                    (SCALAR)))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_ARRAY
            (AST_ARRAY_ELEM
                (AST_PROP
                    (AST_VAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))
            (AST_ARRAY_ELEM
                (AST_BINARY_OP
                    (AST_BINARY_OP
                        (SCALAR)
                        (AST_STATIC_CALL))
                    (SCALAR))
                (SCALAR))
            (AST_ARRAY_ELEM
                (SCALAR)
                (SCALAR))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)
            (AST_VAR))))||||||||