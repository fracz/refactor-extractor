commit c660917b29ed8c1994b497937ea67c80b56a8be2
Author: Evan You <yyx990803@gmail.com>
Date:   Fri Jan 13 19:44:32 2017 -0500

    improve event update algorithm (thanks to suggestions from @defcc)