||||||||  public function replyTo($original_message, $body) {
    if ($original_message->getCommand() != 'MESSAGE') {
      throw new Exception(
        "Handler is trying to reply to something which is not a message!");
    }

    $reply = id(new PhabricatorBotMessage())
      ->setCommand('MESSAGE');

    if ($original_message->isPublic()) {
      // This is a public target, like a chatroom. Send the response to the
      // chatroom.
      $reply->setTarget($original_message->getTarget());
    } else {
      // This is a private target, like a private message. Send the response
      // back to the sender (presumably, we are the target).
      $reply->setTarget($original_message->getSender())
        ->setPublic(false);
    }

    $reply->setBody($body);

    return $this->writeMessage($reply);
  }
}||||||||||||||||NO_DOC_COMMENTNO_RETURN_TYPE
(NO_PARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPENO_PARAM_DEFAULT)
(
    (AST_IF
        (AST_IF_ELEM
            (AST_BINARY_OP
                (AST_METHOD_CALL
                    (AST_VAR))
                (SCALAR))
            (
                (AST_THROW
                    (AST_NEW
                        (
                            (SCALAR)))))))
    (AST_ASSIGN
        (AST_VAR)
        (AST_METHOD_CALL
            (AST_CALL
                (
                    (AST_NEW)))
            (
                (SCALAR))))
    (AST_IF
        (AST_IF_ELEM
            (AST_METHOD_CALL
                (AST_VAR))
            (
                (AST_METHOD_CALL
                    (AST_VAR)
                    (
                        (AST_METHOD_CALL
                            (AST_VAR))))))
        (AST_IF_ELEM
            (NULL)
            (
                (AST_METHOD_CALL
                    (AST_METHOD_CALL
                        (AST_VAR)
                        (
                            (AST_METHOD_CALL
                                (AST_VAR))))
                    (
                        (AST_CONST))))))
    (AST_METHOD_CALL
        (AST_VAR)
        (
            (AST_VAR)))
    (AST_RETURN
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (AST_VAR)))))