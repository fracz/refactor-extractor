AST_STMT_LIST
    0: AST_NAMESPACE
        name: "CachetHQ\Cachet\Models"
        stmts: null
    1: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "GuzzleHttp\Client"
            alias: null
    2: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "GuzzleHttp\Exception\ClientException"
            alias: null
    3: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "Illuminate\Database\Eloquent\Builder"
            alias: null
    4: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "Illuminate\Database\Eloquent\Model"
            alias: null
    5: AST_CLASS
        flags: 0
        name: "WebHook"
        docComment: null
        extends: AST_NAME
            flags: NAME_NOT_FQ (1)
            name: "Model"
        implements: null
        stmts: AST_STMT_LIST
            0: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "HEAD"
                    value: 0
                    docComment: null
            1: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "GET"
                    value: 1
                    docComment: null
            2: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "POST"
                    value: 2
                    docComment: null
            3: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "PATCH"
                    value: 3
                    docComment: null
            4: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "PUT"
                    value: 4
                    docComment: null
            5: AST_CLASS_CONST_DECL
                flags: MODIFIER_PUBLIC (256)
                0: AST_CONST_ELEM
                    name: "DELETE"
                    value: 5
                    docComment: null
            6: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "response"
                docComment: "/**
                     * Returns all responses for a WebHook.
                     *
                     * @return \Illuminate\Database\Eloquent\Relations\HasMany
                     */"
                params: AST_PARAM_LIST
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_RETURN
                        expr: AST_METHOD_CALL
                            expr: AST_VAR
                                name: "this"
                            method: "hasMany"
                            args: AST_ARG_LIST
                                0: "WebHookContent"
                                1: "hook_id"
                                2: "id"
                returnType: null
                __declId: 0
            7: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "scopeActive"
                docComment: "/**
                     * Returns all active hooks.
                     *
                     * @param \Illuminate\Database\Eloquent\Builder $query
                     *
                     * @return \Illuminate\Database\Eloquent\Builder
                     */"
                params: AST_PARAM_LIST
                    0: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "Builder"
                        name: "query"
                        default: null
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_RETURN
                        expr: AST_METHOD_CALL
                            expr: AST_VAR
                                name: "query"
                            method: "where"
                            args: AST_ARG_LIST
                                0: "active"
                                1: 1
                returnType: null
                __declId: 1
            8: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "ping"
                docComment: "/**
                     * Setups a ping event that is fired upon a web hook.
                     *
                     * @return \CachetHQ\Cachet\Models\WebHookResponse
                     */"
                params: AST_PARAM_LIST
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_RETURN
                        expr: AST_METHOD_CALL
                            expr: AST_VAR
                                name: "this"
                            method: "fire"
                            args: AST_ARG_LIST
                                0: "ping"
                                1: "Coming live to you from Cachet."
                returnType: null
                __declId: 2
            9: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "fire"
                docComment: "/**
                     * Fires the actual web hook event.
                     *
                     * @param string $eventType The event to send X-Cachet-Event
                     * @param mixed  $data      Data to send to the Web Hook
                     *
                     * @return \CachetHQ\Cachet\Models\WebHookResponse
                     */"
                params: AST_PARAM_LIST
                    0: AST_PARAM
                        flags: 0
                        type: null
                        name: "eventType"
                        default: null
                    1: AST_PARAM
                        flags: 0
                        type: null
                        name: "data"
                        default: AST_CONST
                            name: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "null"
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_ASSIGN
                        var: AST_VAR
                            name: "startTime"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "microtime"
                            args: AST_ARG_LIST
                                0: AST_CONST
                                    name: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "true"
                    1: AST_ASSIGN
                        var: AST_VAR
                            name: "client"
                        expr: AST_NEW
                            class: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "Client"
                            args: AST_ARG_LIST
                    2: AST_ASSIGN
                        var: AST_VAR
                            name: "request"
                        expr: AST_METHOD_CALL
                            expr: AST_VAR
                                name: "client"
                            method: "createRequest"
                            args: AST_ARG_LIST
                                0: AST_PROP
                                    expr: AST_VAR
                                        name: "this"
                                    prop: "requestMethod"
                                1: AST_PROP
                                    expr: AST_VAR
                                        name: "this"
                                    prop: "endpoint"
                                2: AST_ARRAY
                                    flags: ARRAY_SYNTAX_SHORT (3)
                                    0: AST_ARRAY_ELEM
                                        flags: 0
                                        value: AST_ARRAY
                                            flags: ARRAY_SYNTAX_SHORT (3)
                                            0: AST_ARRAY_ELEM
                                                flags: 0
                                                value: AST_VAR
                                                    name: "eventType"
                                                key: "X-Cachet-Event"
                                        key: "headers"
                                    1: AST_ARRAY_ELEM
                                        flags: 0
                                        value: AST_VAR
                                            name: "data"
                                        key: "body"
                    3: AST_TRY
                        try: AST_STMT_LIST
                            0: AST_ASSIGN
                                var: AST_VAR
                                    name: "response"
                                expr: AST_METHOD_CALL
                                    expr: AST_VAR
                                        name: "client"
                                    method: "send"
                                    args: AST_ARG_LIST
                                        0: AST_VAR
                                            name: "request"
                        catches: AST_CATCH_LIST
                            0: AST_CATCH
                                class: AST_NAME_LIST
                                    0: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "ClientException"
                                var: AST_VAR
                                    name: "e"
                                stmts: AST_STMT_LIST
                                    0: AST_ASSIGN
                                        var: AST_VAR
                                            name: "response"
                                        expr: AST_METHOD_CALL
                                            expr: AST_VAR
                                                name: "e"
                                            method: "getResponse"
                                            args: AST_ARG_LIST
                        finally: null
                    4: AST_ASSIGN
                        var: AST_VAR
                            name: "timeTaken"
                        expr: AST_BINARY_OP
                            flags: BINARY_SUB (2)
                            left: AST_CALL
                                expr: AST_NAME
                                    flags: NAME_NOT_FQ (1)
                                    name: "microtime"
                                args: AST_ARG_LIST
                                    0: AST_CONST
                                        name: AST_NAME
                                            flags: NAME_NOT_FQ (1)
                                            name: "true"
                            right: AST_VAR
                                name: "startTime"
                    5: AST_ASSIGN
                        var: AST_VAR
                            name: "hookResponse"
                        expr: AST_NEW
                            class: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "WebHookResponse"
                            args: AST_ARG_LIST
                    6: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "web_hook_id"
                        expr: AST_PROP
                            expr: AST_VAR
                                name: "this"
                            prop: "id"
                    7: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "response_code"
                        expr: AST_METHOD_CALL
                            expr: AST_VAR
                                name: "response"
                            method: "getStatusCode"
                            args: AST_ARG_LIST
                    8: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "sent_headers"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "json_encode"
                            args: AST_ARG_LIST
                                0: AST_METHOD_CALL
                                    expr: AST_VAR
                                        name: "request"
                                    method: "getHeaders"
                                    args: AST_ARG_LIST
                    9: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "sent_body"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "json_encode"
                            args: AST_ARG_LIST
                                0: AST_VAR
                                    name: "data"
                    10: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "recv_headers"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "json_encode"
                            args: AST_ARG_LIST
                                0: AST_METHOD_CALL
                                    expr: AST_VAR
                                        name: "response"
                                    method: "getHeaders"
                                    args: AST_ARG_LIST
                    11: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "recv_body"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "json_encode"
                            args: AST_ARG_LIST
                                0: AST_METHOD_CALL
                                    expr: AST_VAR
                                        name: "response"
                                    method: "getBody"
                                    args: AST_ARG_LIST
                    12: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "hookResponse"
                            prop: "time_taken"
                        expr: AST_VAR
                            name: "timeTaken"
                    13: AST_METHOD_CALL
                        expr: AST_VAR
                            name: "hookResponse"
                        method: "save"
                        args: AST_ARG_LIST
                    14: AST_RETURN
                        expr: AST_VAR
                            name: "hookResponse"
                returnType: null
                __declId: 3
            10: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "getRequestMethodAttribute"
                docComment: "/**
                     * Returns a human readable request type name.
                     *
                     * @throws \Exception
                     *
                     * @return string
                     */"
                params: AST_PARAM_LIST
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_ASSIGN
                        var: AST_VAR
                            name: "requestMethod"
                        expr: AST_CONST
                            name: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "null"
                    1: AST_SWITCH
                        cond: AST_PROP
                            expr: AST_VAR
                                name: "this"
                            prop: "request_type"
                        stmts: AST_SWITCH_LIST
                            0: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "HEAD"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "HEAD"
                            1: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "GET"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "GET"
                            2: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "POST"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "POST"
                            3: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "PATCH"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "PATCH"
                            4: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "PUT"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "PUT"
                            5: AST_SWITCH_CASE
                                cond: AST_CLASS_CONST
                                    class: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "self"
                                    const: "DELETE"
                                stmts: AST_STMT_LIST
                                    0: AST_RETURN
                                        expr: "DELETE"
                            6: AST_SWITCH_CASE
                                cond: null
                                stmts: AST_STMT_LIST
                                    0: AST_THROW
                                        expr: AST_NEW
                                            class: AST_NAME
                                                flags: NAME_NOT_FQ (1)
                                                name: "Exception"
                                            args: AST_ARG_LIST
                                                0: AST_BINARY_OP
                                                    flags: BINARY_CONCAT (8)
                                                    left: "Unknown request type value: "
                                                    right: AST_PROP
                                                        expr: AST_VAR
                                                            name: "this"
                                                        prop: "request_type"
                returnType: null
                __declId: 4
        __declId: 5