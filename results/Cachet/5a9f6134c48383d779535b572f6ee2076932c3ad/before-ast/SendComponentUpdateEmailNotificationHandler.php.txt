AST_STMT_LIST
    0: AST_NAMESPACE
        name: "CachetHQ\Cachet\Bus\Handlers\Events\Component"
        stmts: null
    1: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "CachetHQ\Cachet\Bus\Events\Component\ComponentStatusWasUpdatedEvent"
            alias: null
    2: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "CachetHQ\Cachet\Models\Component"
            alias: null
    3: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "CachetHQ\Cachet\Models\Subscriber"
            alias: null
    4: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "Illuminate\Contracts\Mail\MailQueue"
            alias: null
    5: AST_USE
        flags: USE_NORMAL (361)
        0: AST_USE_ELEM
            flags: 0
            name: "McCool\LaravelAutoPresenter\Facades\AutoPresenter"
            alias: null
    6: AST_CLASS
        flags: 0
        name: "SendComponentUpdateEmailNotificationHandler"
        docComment: null
        extends: null
        implements: null
        stmts: AST_STMT_LIST
            0: AST_PROP_DECL
                flags: MODIFIER_PROTECTED (512)
                0: AST_PROP_ELEM
                    name: "mailer"
                    default: null
                    docComment: "/**
                         * The mailer instance.
                         *
                         * @var \Illuminate\Contracts\Mail\Mailer
                         */"
            1: AST_PROP_DECL
                flags: MODIFIER_PROTECTED (512)
                0: AST_PROP_ELEM
                    name: "subscriber"
                    default: null
                    docComment: "/**
                         * The subscriber instance.
                         *
                         * @var \CachetHQ\Cachet\Models\Subscriber
                         */"
            2: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "__construct"
                docComment: "/**
                     * Create a new send incident email notification handler.
                     *
                     * @param \Illuminate\Contracts\Mail\Mailer  $mailer
                     * @param \CachetHQ\Cachet\Models\Subscriber $subscriber
                     *
                     * @return void
                     */"
                params: AST_PARAM_LIST
                    0: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "MailQueue"
                        name: "mailer"
                        default: null
                    1: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "Subscriber"
                        name: "subscriber"
                        default: null
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "this"
                            prop: "mailer"
                        expr: AST_VAR
                            name: "mailer"
                    1: AST_ASSIGN
                        var: AST_PROP
                            expr: AST_VAR
                                name: "this"
                            prop: "subscriber"
                        expr: AST_VAR
                            name: "subscriber"
                returnType: null
                __declId: 0
            3: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "handle"
                docComment: "/**
                     * Handle the event.
                     *
                     * @param \CachetHQ\Cachet\Bus\Events\Component\ComponentStatusWasUpdatedEvent $event
                     *
                     * @return void
                     */"
                params: AST_PARAM_LIST
                    0: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "ComponentStatusWasUpdatedEvent"
                        name: "event"
                        default: null
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_ASSIGN
                        var: AST_VAR
                            name: "component"
                        expr: AST_PROP
                            expr: AST_VAR
                                name: "event"
                            prop: "component"
                    1: AST_IF
                        0: AST_IF_ELEM
                            cond: AST_BINARY_OP
                                flags: BINARY_IS_IDENTICAL (15)
                                left: AST_PROP
                                    expr: AST_VAR
                                        name: "event"
                                    prop: "original_status"
                                right: AST_PROP
                                    expr: AST_VAR
                                        name: "event"
                                    prop: "new_status"
                            stmts: AST_STMT_LIST
                                0: AST_RETURN
                                    expr: null
                    2: AST_ASSIGN
                        var: AST_VAR
                            name: "globalSubscribers"
                        expr: AST_METHOD_CALL
                            expr: AST_METHOD_CALL
                                expr: AST_METHOD_CALL
                                    expr: AST_PROP
                                        expr: AST_VAR
                                            name: "this"
                                        prop: "subscriber"
                                    method: "isVerified"
                                    args: AST_ARG_LIST
                                method: "isGlobal"
                                args: AST_ARG_LIST
                            method: "get"
                            args: AST_ARG_LIST
                    3: AST_FOREACH
                        expr: AST_VAR
                            name: "globalSubscribers"
                        value: AST_VAR
                            name: "subscriber"
                        key: null
                        stmts: AST_STMT_LIST
                            0: AST_METHOD_CALL
                                expr: AST_VAR
                                    name: "this"
                                method: "notify"
                                args: AST_ARG_LIST
                                    0: AST_VAR
                                        name: "component"
                                    1: AST_VAR
                                        name: "subscriber"
                    4: AST_ASSIGN
                        var: AST_VAR
                            name: "notified"
                        expr: AST_METHOD_CALL
                            expr: AST_METHOD_CALL
                                expr: AST_VAR
                                    name: "globalSubscribers"
                                method: "pluck"
                                args: AST_ARG_LIST
                                    0: "id"
                            method: "all"
                            args: AST_ARG_LIST
                    5: AST_ASSIGN
                        var: AST_VAR
                            name: "componentSubscribers"
                        expr: AST_METHOD_CALL
                            expr: AST_METHOD_CALL
                                expr: AST_METHOD_CALL
                                    expr: AST_METHOD_CALL
                                        expr: AST_PROP
                                            expr: AST_VAR
                                                name: "this"
                                            prop: "subscriber"
                                        method: "isVerified"
                                        args: AST_ARG_LIST
                                    method: "forComponent"
                                    args: AST_ARG_LIST
                                        0: AST_PROP
                                            expr: AST_VAR
                                                name: "component"
                                            prop: "id"
                                method: "get"
                                args: AST_ARG_LIST
                            method: "reject"
                            args: AST_ARG_LIST
                                0: AST_CLOSURE
                                    flags: 0
                                    name: "{closure}"
                                    docComment: null
                                    params: AST_PARAM_LIST
                                        0: AST_PARAM
                                            flags: 0
                                            type: null
                                            name: "subscriber"
                                            default: null
                                    uses: AST_CLOSURE_USES
                                        0: AST_CLOSURE_VAR
                                            flags: 0
                                            name: "notified"
                                    stmts: AST_STMT_LIST
                                        0: AST_RETURN
                                            expr: AST_CALL
                                                expr: AST_NAME
                                                    flags: NAME_NOT_FQ (1)
                                                    name: "in_array"
                                                args: AST_ARG_LIST
                                                    0: AST_PROP
                                                        expr: AST_VAR
                                                            name: "subscriber"
                                                        prop: "id"
                                                    1: AST_VAR
                                                        name: "notified"
                                    returnType: null
                                    __declId: 1
                    6: AST_FOREACH
                        expr: AST_VAR
                            name: "componentSubscribers"
                        value: AST_VAR
                            name: "subscriber"
                        key: null
                        stmts: AST_STMT_LIST
                            0: AST_METHOD_CALL
                                expr: AST_VAR
                                    name: "this"
                                method: "notify"
                                args: AST_ARG_LIST
                                    0: AST_VAR
                                        name: "component"
                                    1: AST_VAR
                                        name: "subscriber"
                returnType: null
                __declId: 2
            4: AST_METHOD
                flags: MODIFIER_PUBLIC (256)
                name: "notify"
                docComment: "/**
                     * Send notification to subscriber.
                     *
                     * @param \CachetHQ\Cachet\Models\Component  $component
                     * @param \CachetHQ\Cachet\Models\Subscriber $subscriber
                     *
                     * @return \Illuminate\Database\Eloquent\Collection
                     */"
                params: AST_PARAM_LIST
                    0: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "Component"
                        name: "component"
                        default: null
                    1: AST_PARAM
                        flags: 0
                        type: AST_NAME
                            flags: NAME_NOT_FQ (1)
                            name: "Subscriber"
                        name: "subscriber"
                        default: null
                uses: null
                stmts: AST_STMT_LIST
                    0: AST_ASSIGN
                        var: AST_VAR
                            name: "component"
                        expr: AST_STATIC_CALL
                            class: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "AutoPresenter"
                            method: "decorate"
                            args: AST_ARG_LIST
                                0: AST_VAR
                                    name: "component"
                    1: AST_ASSIGN
                        var: AST_VAR
                            name: "mail"
                        expr: AST_ARRAY
                            flags: ARRAY_SYNTAX_SHORT (3)
                            0: AST_ARRAY_ELEM
                                flags: 0
                                value: AST_CALL
                                    expr: AST_NAME
                                        flags: NAME_NOT_FQ (1)
                                        name: "trans"
                                    args: AST_ARG_LIST
                                        0: "cachet.subscriber.email.component.subject"
                                key: "subject"
                            1: AST_ARRAY_ELEM
                                flags: 0
                                value: AST_PROP
                                    expr: AST_VAR
                                        name: "component"
                                    prop: "name"
                                key: "component_name"
                            2: AST_ARRAY_ELEM
                                flags: 0
                                value: AST_PROP
                                    expr: AST_VAR
                                        name: "component"
                                    prop: "human_status"
                                key: "component_human_status"
                    2: AST_ASSIGN
                        var: AST_DIM
                            expr: AST_VAR
                                name: "mail"
                            dim: "email"
                        expr: AST_PROP
                            expr: AST_VAR
                                name: "subscriber"
                            prop: "email"
                    3: AST_ASSIGN
                        var: AST_DIM
                            expr: AST_VAR
                                name: "mail"
                            dim: "manage_link"
                        expr: AST_CALL
                            expr: AST_NAME
                                flags: NAME_NOT_FQ (1)
                                name: "route"
                            args: AST_ARG_LIST
                                0: "subscribe.manage"
                                1: AST_ARRAY
                                    flags: ARRAY_SYNTAX_SHORT (3)
                                    0: AST_ARRAY_ELEM
                                        flags: 0
                                        value: AST_PROP
                                            expr: AST_VAR
                                                name: "subscriber"
                                            prop: "verify_code"
                                        key: "code"
                    4: AST_METHOD_CALL
                        expr: AST_PROP
                            expr: AST_VAR
                                name: "this"
                            prop: "mailer"
                        method: "queue"
                        args: AST_ARG_LIST
                            0: AST_ARRAY
                                flags: ARRAY_SYNTAX_SHORT (3)
                                0: AST_ARRAY_ELEM
                                    flags: 0
                                    value: "emails.components.update-html"
                                    key: "html"
                                1: AST_ARRAY_ELEM
                                    flags: 0
                                    value: "emails.components.update-text"
                                    key: "text"
                            1: AST_VAR
                                name: "mail"
                            2: AST_CLOSURE
                                flags: 0
                                name: "{closure}"
                                docComment: null
                                params: AST_PARAM_LIST
                                    0: AST_PARAM
                                        flags: 0
                                        type: null
                                        name: "message"
                                        default: null
                                uses: AST_CLOSURE_USES
                                    0: AST_CLOSURE_VAR
                                        flags: 0
                                        name: "mail"
                                stmts: AST_STMT_LIST
                                    0: AST_METHOD_CALL
                                        expr: AST_METHOD_CALL
                                            expr: AST_VAR
                                                name: "message"
                                            method: "to"
                                            args: AST_ARG_LIST
                                                0: AST_DIM
                                                    expr: AST_VAR
                                                        name: "mail"
                                                    dim: "email"
                                        method: "subject"
                                        args: AST_ARG_LIST
                                            0: AST_DIM
                                                expr: AST_VAR
                                                    name: "mail"
                                                dim: "subject"
                                returnType: null
                                __declId: 3
                returnType: null
                __declId: 4
        __declId: 5