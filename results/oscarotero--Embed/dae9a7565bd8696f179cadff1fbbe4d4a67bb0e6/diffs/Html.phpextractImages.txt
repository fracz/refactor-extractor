||||||||    protected static function extractImages(\DOMElement $html, Bag $bag, $domain = null)
    {
        foreach ($html->getElementsByTagName('img') as $img) {
            if ($img->hasAttribute('src')) {
                $src = new Url($img->getAttribute('src'));

                //Is src relative?
                if (!$src->getDomain()) {
                    $bag->add('images', $src->getUrl());
                    continue;
                }

                //Avoid external images or in external links
                if ($domain) {
                    if ($src->getDomain() !== $domain) {
                        continue;
                    }

                    $parent = $img->parentNode;

                    while ($parent && isset($parent->tagName)) {
                        if ($parent->tagName === 'a') {
                            if ($parent->hasAttribute('href')) {
                                $href = new Url($parent->getAttribute('href'));

                                if ($href->getDomain() && $src->getDomain() !== $domain) {
                                    continue 2;
                                }
                            }

                            break;
                        }

                        $parent = $parent->parentNode;
                    }

                    $bag->add('images', $src->getUrl());
                }
            }
        }
    }

    /**
     * Returns the main element of the document
     *
     * @param \DOMDocument $html
     *
     * @return \DOMElement
     */
||||||||||||||||HAS_DOC_COMMENTNO_RETURN_TYPE
(PARAM_TYPENO_PARAM_DEFAULTPARAM_TYPENO_PARAM_DEFAULTNO_PARAM_TYPEPARAM_DEFAULT)
(
    (AST_FOREACH
        (AST_METHOD_CALL
            (AST_VAR)
            (
                (SCALAR)))
        (AST_VAR)
        (NULL)
        (
            (AST_IF
                (AST_IF_ELEM
                    (AST_METHOD_CALL
                        (AST_VAR)
                        (
                            (SCALAR)))
                    (
                        (AST_ASSIGN
                            (AST_VAR)
                            (AST_NEW
                                (
                                    (AST_METHOD_CALL
                                        (AST_VAR)
                                        (
                                            (SCALAR))))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_UNARY_OP
                                    (AST_METHOD_CALL
                                        (AST_VAR)))
                                (
                                    (AST_METHOD_CALL
                                        (AST_VAR)
                                        (
                                            (SCALAR)
                                            (AST_METHOD_CALL
                                                (AST_VAR))))
                                    (AST_CONTINUE
                                        (NULL)))))
                        (AST_IF
                            (AST_IF_ELEM
                                (AST_VAR)
                                (
                                    (AST_IF
                                        (AST_IF_ELEM
                                            (AST_BINARY_OP
                                                (AST_METHOD_CALL
                                                    (AST_VAR))
                                                (AST_VAR))
                                            (
                                                (AST_CONTINUE
                                                    (NULL)))))
                                    (AST_ASSIGN
                                        (AST_VAR)
                                        (AST_PROP
                                            (AST_VAR)))
                                    (AST_WHILE
                                        (AST_BINARY_OP
                                            (AST_VAR)
                                            (AST_ISSET
                                                (AST_PROP
                                                    (AST_VAR))))
                                        (
                                            (AST_IF
                                                (AST_IF_ELEM
                                                    (AST_BINARY_OP
                                                        (AST_PROP
                                                            (AST_VAR))
                                                        (SCALAR))
                                                    (
                                                        (AST_IF
                                                            (AST_IF_ELEM
                                                                (AST_METHOD_CALL
                                                                    (AST_VAR)
                                                                    (
                                                                        (SCALAR)))
                                                                (
                                                                    (AST_ASSIGN
                                                                        (AST_VAR)
                                                                        (AST_NEW
                                                                            (
                                                                                (AST_METHOD_CALL
                                                                                    (AST_VAR)
                                                                                    (
                                                                                        (SCALAR))))))
                                                                    (AST_IF
                                                                        (AST_IF_ELEM
                                                                            (AST_BINARY_OP
                                                                                (AST_METHOD_CALL
                                                                                    (AST_VAR))
                                                                                (AST_BINARY_OP
                                                                                    (AST_METHOD_CALL
                                                                                        (AST_VAR))
                                                                                    (AST_VAR)))
                                                                            (
                                                                                (AST_CONTINUE
                                                                                    (SCALAR))))))))
                                                        (AST_BREAK
                                                            (NULL)))))
                                            (AST_ASSIGN
                                                (AST_VAR)
                                                (AST_PROP
                                                    (AST_VAR)))))
                                    (AST_METHOD_CALL
                                        (AST_VAR)
                                        (
                                            (SCALAR)
                                            (AST_METHOD_CALL
                                                (AST_VAR)))))))))))))