commit 22af0e627cfd4de73b9b78f9e3355d31ef2a579c
Author: Ryan Ernst <ryan@iernst.net>
Date:   Sat Apr 18 18:17:13 2015 -0700

    cleanup order of before/after stuff, reorganize helper methods a bit